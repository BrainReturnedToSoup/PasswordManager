import{s as te,n as Y,r as Ue,e as Ne}from"../chunks/scheduler.BbOnFq8D.js";import{S as ne,i as se,g as _,h as g,j as h,f as i,a as J,k,s as $,m as z,c as D,n as P,x as Ve,y as c,z as X,o as Ie,p as Be,t as M,b as je,d as Q,r as re,u as oe,v as ce,w as ae,e as $e}from"../chunks/index.6BdSON7m.js";import{b as qe,a as He,r as ze,c as Pe,g as Me,p as Qe,d as Re,L as Ge}from"../chunks/authState.zRFCQuIp.js";const N=Object.freeze({credentials:"credentials",settings:"settings"}),q=Object.freeze({credentials:Object.freeze({main:"main",creator:"creator"}),settings:Object.freeze({account:"account",preferences:"preferences",faq:"faq"})});function Je(o){let e;return{c(){e=_("div")},l(n){e=g(n,"DIV",{}),h(e).forEach(i)},m(n,t){J(n,e,t)},p:Y,i:Y,o:Y,d(n){n&&i(e)}}}function Ke(o,e,n){let{secondaryFocus:t}=e,{pendingLogout:s}=e;return o.$$set=r=>{"secondaryFocus"in r&&n(0,t=r.secondaryFocus),"pendingLogout"in r&&n(1,s=r.pendingLogout)},[t,s]}class We extends ne{constructor(e){super(),se(this,e,Ke,Je,te,{secondaryFocus:0,pendingLogout:1})}}function Xe(o){let e;return{c(){e=_("div"),this.h()},l(n){e=g(n,"DIV",{class:!0}),h(e).forEach(i),this.h()},h(){k(e,"class","settings container")},m(n,t){J(n,e,t)},p:Y,i:Y,o:Y,d(n){n&&i(e)}}}function Ye(o,e,n){let{secondaryFocus:t}=e,{pendingLogout:s}=e;return o.$$set=r=>{"secondaryFocus"in r&&n(0,t=r.secondaryFocus),"pendingLogout"in r&&n(1,s=r.pendingLogout)},[t,s]}class Ze extends ne{constructor(e){super(),se(this,e,Ye,Xe,te,{secondaryFocus:0,pendingLogout:1})}}function De(o){let e,n;return{c(){e=_("p"),n=z(o[0]),this.h()},l(t){e=g(t,"P",{class:!0});var s=h(e);n=P(s,o[0]),s.forEach(i),this.h()},h(){k(e,"class","error-message")},m(t,s){J(t,e,s),c(e,n)},p(t,s){s&1&&Ie(n,t[0])},d(t){t&&i(e)}}}function xe(o){let e,n;return e=new Ze({props:{secondaryFocus:o[3],pendingLogout:o[4]}}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,s){ce(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.secondaryFocus=t[3]),s&16&&(r.pendingLogout=t[4]),e.$set(r)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function et(o){let e,n;return e=new We({props:{secondaryFocus:o[3],pendingLogout:o[4]}}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,s){ce(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.secondaryFocus=t[3]),s&16&&(r.pendingLogout=t[4]),e.$set(r)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function tt(o){let e,n,t,s,r,d,v,E,u,A,a,F,T,w,Z,x,R,O,L,y,S,G,be="Settings",le,V,ie,ue,I,de,fe,B,_e,ge,K,m,b,C,he,pe,p=o[0]&&De(o);const ke=[et,xe],j=[];function ve(l,f){return l[2]===N.credentials?0:l[2]===N.settings?1:-1}return~(m=ve(o))&&(b=j[m]=ke[m](o)),{c(){e=_("div"),n=_("div"),p&&p.c(),t=$(),s=_("nav"),r=_("div"),d=_("h1"),v=z(o[1]),E=$(),u=_("button"),A=z("Log out"),F=$(),T=_("div"),w=_("button"),Z=z("Back to main"),x=$(),R=_("div"),O=_("button"),L=z("New Credentials+"),y=$(),S=_("div"),G=_("h1"),G.textContent=be,le=$(),V=_("button"),ie=z("Account"),ue=$(),I=_("button"),de=z("Preferences"),fe=$(),B=_("button"),_e=z("FAQ"),ge=$(),K=_("main"),b&&b.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var f=h(e);n=g(f,"DIV",{class:!0});var W=h(n);p&&p.l(W),W.forEach(i),t=D(f),s=g(f,"NAV",{});var H=h(s);r=g(H,"DIV",{class:!0});var ee=h(r);d=g(ee,"H1",{class:!0});var Ee=h(d);v=P(Ee,o[1]),Ee.forEach(i),E=D(ee),u=g(ee,"BUTTON",{class:!0});var Se=h(u);A=P(Se,"Log out"),Se.forEach(i),ee.forEach(i),F=D(H),T=g(H,"DIV",{class:!0});var Fe=h(T);w=g(Fe,"BUTTON",{class:!0});var Le=h(w);Z=P(Le,"Back to main"),Le.forEach(i),Fe.forEach(i),x=D(H),R=g(H,"DIV",{class:!0});var ye=h(R);O=g(ye,"BUTTON",{class:!0});var Te=h(O);L=P(Te,"New Credentials+"),Te.forEach(i),ye.forEach(i),y=D(H),S=g(H,"DIV",{class:!0});var U=h(S);G=g(U,"H1",{class:!0,"data-svelte-h":!0}),Ve(G)!=="svelte-d985ew"&&(G.textContent=be),le=D(U),V=g(U,"BUTTON",{class:!0});var Ce=h(V);ie=P(Ce,"Account"),Ce.forEach(i),ue=D(U),I=g(U,"BUTTON",{class:!0});var Ae=h(I);de=P(Ae,"Preferences"),Ae.forEach(i),fe=D(U),B=g(U,"BUTTON",{class:!0});var we=h(B);_e=P(we,"FAQ"),we.forEach(i),U.forEach(i),H.forEach(i),ge=D(f),K=g(f,"MAIN",{});var Oe=h(K);b&&b.l(Oe),Oe.forEach(i),f.forEach(i),this.h()},h(){k(n,"class","error-message container"),k(d,"class","censored-email"),k(u,"class","log-out"),u.disabled=a=o[4]||o[5],k(r,"class","profile container"),k(w,"class","credentials-main button"),w.disabled=o[4],k(T,"class","credentials-main container"),k(O,"class","credentials-creator button"),O.disabled=o[4],k(R,"class","credentials-creator container"),k(G,"class","settings header"),k(V,"class","settings account"),V.disabled=o[4],k(I,"class","settings preferences button"),I.disabled=o[4],k(B,"class","settings faq button"),B.disabled=o[4],k(S,"class","settings container button"),k(e,"class","page home")},m(l,f){J(l,e,f),c(e,n),p&&p.m(n,null),c(e,t),c(e,s),c(s,r),c(r,d),c(d,v),c(r,E),c(r,u),c(u,A),c(s,F),c(s,T),c(T,w),c(w,Z),c(s,x),c(s,R),c(R,O),c(O,L),c(s,y),c(s,S),c(S,G),c(S,le),c(S,V),c(V,ie),c(S,ue),c(S,I),c(I,de),c(S,fe),c(S,B),c(B,_e),c(e,ge),c(e,K),~m&&j[m].m(K,null),C=!0,he||(pe=[X(u,"click",o[8]),X(w,"click",o[9]),X(O,"click",o[10]),X(V,"click",o[11]),X(I,"click",o[12]),X(B,"click",o[13])],he=!0)},p(l,[f]){l[0]?p?p.p(l,f):(p=De(l),p.c(),p.m(n,null)):p&&(p.d(1),p=null),(!C||f&2)&&Ie(v,l[1]),(!C||f&48&&a!==(a=l[4]||l[5]))&&(u.disabled=a),(!C||f&16)&&(w.disabled=l[4]),(!C||f&16)&&(O.disabled=l[4]),(!C||f&16)&&(V.disabled=l[4]),(!C||f&16)&&(I.disabled=l[4]),(!C||f&16)&&(B.disabled=l[4]);let W=m;m=ve(l),m===W?~m&&j[m].p(l,f):(b&&(Be(),M(j[W],1,1,()=>{j[W]=null}),je()),~m?(b=j[m],b?b.p(l,f):(b=j[m]=ke[m](l),b.c()),Q(b,1),b.m(K,null)):b=null)},i(l){C||(Q(b),C=!0)},o(l){M(b),C=!1},d(l){l&&i(e),p&&p.d(),~m&&j[m].d(),he=!1,Ue(pe)}}}const me="",nt=2e3;function st(o,e,n){let t=me,s=me;const r=qe.subscribe(L=>{n(1,s=L)});Ne(r);let d=N.credentials,v=q.credentials.main;function E(L,y){L in N&&y in q[L]?(n(2,d=L),n(3,v=y)):(n(2,d=N.credentials),n(3,v=q.credentials.main))}let u=!1,A=!1;function a(){n(5,A=!0),setTimeout(()=>{n(5,A=!1)},nt)}async function F(){n(4,u=!0);let L,y;try{L=await(await fetch("/log-out",{method:"POST"})).json()}catch(S){y=S}y?(console.error("handleLogout: ",y,y.stack),n(0,t=`Fatal ${y}`),a()):L.success?(n(0,t=me),He.authedFalse(),ze.true()):(n(0,t=L.error),a()),n(4,u=!1)}return[t,s,d,v,u,A,E,F,()=>{F()},()=>{E(N.credentials,q.credentials.main)},()=>{E(N.credentials,q.credentials.creator)},()=>{E(N.settings,q.settings.account)},()=>{E(N.settings,q.settings.preferences)},()=>{E(N.settings,q.settings.faq)}]}class rt extends ne{constructor(e){super(),se(this,e,st,tt,te,{})}}function ot(o){let e,n;return e=new Ge({}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,s){ce(e,t,s),n=!0},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function ct(o){let e,n;return e=new rt({}),{c(){re(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,s){ce(e,t,s),n=!0},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function at(o){let e,n="this works",t,s,r,d,v;const E=[ct,ot],u=[];function A(a,F){return!a[0].pendingAuthCheckStore&&a[0].authStateStore?0:1}return s=A(o),r=u[s]=E[s](o),{c(){e=_("div"),e.textContent=n,t=$(),r.c(),d=$e()},l(a){e=g(a,"DIV",{"data-svelte-h":!0}),Ve(e)!=="svelte-1t6dbre"&&(e.textContent=n),t=D(a),r.l(a),d=$e()},m(a,F){J(a,e,F),J(a,t,F),u[s].m(a,F),J(a,d,F),v=!0},p(a,[F]){let T=s;s=A(a),s!==T&&(Be(),M(u[T],1,1,()=>{u[T]=null}),je(),r=u[s],r||(r=u[s]=E[s](a),r.c()),Q(r,1),r.m(d.parentNode,d))},i(a){v||(Q(r),v=!0)},o(a){M(r),v=!1},d(a){a&&(i(e),i(t),i(d)),u[s].d(a)}}}function lt(o,e,n){const t={pendingAuthCheckStore:Qe,authStateStore:He,redirectToHomeStore:Re},s={};let r={};for(const[d,v]of Object.entries(t))s[d]=v.subscribe(E=>{const u={...r};u[d]=E,n(0,r=u)}),Ne(s[d]);return!r.pendingAuthCheckStore&&!r.redirectToHomeStore&&Pe(),t.redirectToHomeStore.false(),o.$$.update=()=>{o.$$.dirty&1&&!r.pendingAuthCheckStore&&!r.authStateStore&&Me("/log-in")},[r]}class ft extends ne{constructor(e){super(),se(this,e,lt,at,te,{})}}export{ft as component};
