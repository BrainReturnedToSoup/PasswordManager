import{r as Le,s as fe,n as ae,e as Se,i as dt,b as ge,f as Ce,o as ft,t as Xe}from"../chunks/scheduler.XwmuOfpH.js";import{t as Z,d as x,S as me,i as pe,g,m as be,s as I,h as v,j as N,n as he,f as y,c as P,x as z,k as h,a as te,y as u,z as J,o as Ne,p as Re,b as Ge,e as Fe,r as le,u as ue,v as ce,w as de,A as W,B as ye,C as ke}from"../chunks/index.BP64-74v.js";import{s as ve,a as Be,b as mt,c as pt,g as bt,p as ht,L as _t}from"../chunks/navigation.29WGVOxU.js";import{w as Ue}from"../chunks/singletons.oUhOjixv.js";import{r as qe,a as xe}from"../chunks/redirect.WCuc7_wB.js";import{v as gt,a as vt,b as wt}from"../chunks/constraintValidation.du7N9Ism.js";function et(n){return n?.length!==void 0?n:Array.from(n)}function St(n,e){Z(n,1,1,()=>{e.delete(n.key)})}function Ct(n,e,t,s,o,a,i,d,r,l,b,c){let m=n.length,f=a.length,S=m;const p={};for(;S--;)p[n[S].key]=S;const w=[],_=new Map,B=new Map,C=[];for(S=f;S--;){const k=c(o,a,S),T=t(k);let D=i.get(T);D?s&&C.push(()=>D.p(k,e)):(D=l(T,k),D.c()),_.set(T,w[S]=D),T in p&&B.set(T,Math.abs(S-p[T]))}const E=new Set,q=new Set;function V(k){x(k,1),k.m(d,b),i.set(k.key,k),b=k.first,f--}for(;m&&f;){const k=w[f-1],T=n[m-1],D=k.key,U=T.key;k===T?(b=k.first,m--,f--):_.has(U)?!i.has(D)||E.has(D)?V(k):q.has(U)?m--:B.get(D)>B.get(U)?(q.add(D),V(k)):(E.add(U),m--):(r(T,i),m--)}for(;m--;){const k=n[m];_.has(k.key)||r(k,i)}for(;f;)V(w[f-1]);return Le(C),w}const yt=()=>{const{subscribe:n,set:e}=Ue("");return{subscribe:n,set:e,clear:()=>{e("")}}},re=yt(),De={get:{credentials:async n=>await ve(`/home/credentials?credentialID=${n}`,"GET"),description:async n=>await ve(`/home/credentials/description?credentialID=${n}`,"GET"),emailUsername:async n=>await ve(`/home/credentials/email-username?credentialID=${n}`,"GET"),password:async n=>await ve(`/home/credentials/password?credentialID=${n}`),idAndNameSet:async()=>await ve("/home/credentials/id-name-set")},post:{credential:async(n,e,t,s)=>await ve("/home/credentials","POST",{name:n,emailUsername:e,password:t,description:s})},put:{credential:async(n,e)=>await ve(`/home/credentials?credentialID=${n}`,"PUT",{...e,credentialID:n})},delete:{credential:async n=>await ve(`/home/credentials?credentialID=${n}`,"DELETE")}};function Ee(){setTimeout(()=>{qe.true(),Be.authedFalse(),re.clear()},4e3),re.set("Session expired, please log-in and try again")}const Et=()=>{const{subscribe:n,set:e,update:t}=Ue({credentialID:null,name:null,emailUsername:null,password:null,description:null});return{subscribe:n,set:e,update:t,clear:()=>{e({credentialID:null,name:null,emailUsername:null,password:null,description:null})}}},ze=Et(),Ae=Object.freeze({credentials:"credentials",settings:"settings"}),se=Object.freeze({credentials:Object.freeze({main:"main",creator:"creator",updater:"updater"}),settings:Object.freeze({account:"account",preferences:"preferences",faq:"faq"})}),Tt=()=>{const{subscribe:n,set:e}=Ue(Ae.credentials);return{subscribe:n,credentials:()=>{e(Ae.credentials)},settings:()=>{e(Ae.settings)},reset:()=>{e(Ae.credentials)}}},kt=()=>{const{subscribe:n,set:e}=Ue(se.credentials.main);return{subscribe:n,credentials:{main:()=>{e(se.credentials.main)},creator:()=>{e(se.credentials.creator)},updater:()=>{e(se.credentials.updater)}},settings:{account:()=>{e(se.settings.account)},preferences:()=>{e(se.settings.preferences)},faq:()=>{e(se.settings.faq)}},reset:()=>{e(se.credentials.main)}}},Ve=Tt(),we=kt();function Dt(n){return{name:n.credential_name,emailUsername:n.email_username,password:n.pw,description:n.description}}const Bt=()=>{const{subscribe:n,set:e,update:t}=Ue({});return{subscribe:n,set:e,update:t,clear:()=>{e({})}}},Oe=Bt();async function tt(n){try{await navigator.clipboard.writeText(n)}catch(e){console.error(`copyToClipboard catch block: value: ${n} error: ${e} ${e.stack}`)}}function nt(n){let e,t;return{c(){e=g("p"),t=be(n[1]),this.h()},l(s){e=v(s,"P",{class:!0});var o=N(e);t=he(o,n[1]),o.forEach(y),this.h()},h(){h(e,"class","credential description")},m(s,o){te(s,e,o),u(e,t)},p(s,o){o&2&&Ne(t,s[1])},d(s){s&&y(e)}}}function Ut(n){let e,t,s,o,a,i,d="Update",r,l,b="Delete",c,m,f,S="Copy Email/Username",p,w,_="Copy Password",B,C,E,q="Description",V,k,T,D=n[1]&&nt(n);return{c(){e=g("div"),t=g("h2"),s=be(n[0]),o=I(),a=g("div"),i=g("button"),i.textContent=d,r=I(),l=g("button"),l.textContent=b,c=I(),m=g("div"),f=g("button"),f.textContent=S,p=I(),w=g("button"),w.textContent=_,B=I(),C=g("div"),E=g("button"),E.textContent=q,V=I(),D&&D.c(),this.h()},l(U){e=v(U,"DIV",{class:!0});var A=N(e);t=v(A,"H2",{class:!0});var ne=N(t);s=he(ne,n[0]),ne.forEach(y),o=P(A),a=v(A,"DIV",{class:!0});var $=N(a);i=v($,"BUTTON",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-ggvktn"&&(i.textContent=d),r=P($),l=v($,"BUTTON",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-12ostsz"&&(l.textContent=b),$.forEach(y),c=P(A),m=v(A,"DIV",{class:!0});var H=N(m);f=v(H,"BUTTON",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-51acpn"&&(f.textContent=S),p=P(H),w=v(H,"BUTTON",{class:!0,"data-svelte-h":!0}),z(w)!=="svelte-1o8qm1s"&&(w.textContent=_),H.forEach(y),B=P(A),C=v(A,"DIV",{class:!0});var ee=N(C);E=v(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),z(E)!=="svelte-wjijel"&&(E.textContent=q),V=P(ee),D&&D.l(ee),ee.forEach(y),A.forEach(y),this.h()},h(){h(t,"class","credential name"),h(i,"class","credential button update"),h(l,"class","credential button delete"),h(a,"class","credential buttons update delete"),h(f,"class","credential button copy email-username"),h(w,"class","credential button copy password"),h(m,"class","credential buttons copy"),h(E,"class","credential description toggle"),h(C,"class","credential description container"),h(e,"class","credential")},m(U,A){te(U,e,A),u(e,t),u(t,s),u(e,o),u(e,a),u(a,i),u(a,r),u(a,l),u(e,c),u(e,m),u(m,f),u(m,p),u(m,w),u(e,B),u(e,C),u(C,E),u(C,V),D&&D.m(C,null),k||(T=[J(i,"click",n[3]),J(l,"click",n[4]),J(f,"click",n[5]),J(w,"click",n[6]),J(E,"click",n[2])],k=!0)},p(U,[A]){A&1&&Ne(s,U[0]),U[1]?D?D.p(U,A):(D=nt(U),D.c(),D.m(C,null)):D&&(D.d(1),D=null)},i:ae,o:ae,d(U){U&&y(e),D&&D.d(),k=!1,Le(T)}}}function It(n,e,t){let{id:s,name:o}=e,a="";async function i(){if(a){t(1,a="");return}const c=await De.get.description(s);c.success?t(1,a=c.description):"auth"in c&&!c.auth?Ee():re(c.error)}async function d(){const c=await De.get.credentials(s);if(!c.success)"auth"in c&&!c.auth?Ee():re(c.error);else{const m=Dt(c.credential);ze.set({...m,credentialID:s}),we.credentials.updater()}}async function r(){const c=await De.delete.credential(s);c.success?Oe.update(m=>(delete m[s],m)):"auth"in c&&!c.auth?Ee():re(c.error)}async function l(){if(!navigator.clipboard){const m="copy emailUsername error: no navigator clipboard";console.error(m),re.set(m);return}const c=await De.get.emailUsername(s);c.success?await tt(c.emailUsername):"auth"in c&&!c.auth?Ee():re(c.error)}async function b(){if(!navigator.clipboard){const m="copy password error: no navigator clipboard";console.error(m),re.set(m);return}const c=await De.get.password(s);c.success?await tt(c.password):"auth"in c&&!c.auth?Ee():re(c.error)}return n.$$set=c=>{"id"in c&&t(7,s=c.id),"name"in c&&t(0,o=c.name)},[o,a,i,d,r,l,b,s]}class Pt extends me{constructor(e){super(),pe(this,e,It,Ut,fe,{id:7,name:0})}}function st(n,e,t){const s=n.slice();return s[2]=e[t][0],s[3]=e[t][1],s}function rt(n,e){let t,s,o;return s=new Pt({props:{id:e[2],name:e[3]}}),{key:n,first:null,c(){t=Fe(),le(s.$$.fragment),this.h()},l(a){t=Fe(),ue(s.$$.fragment,a),this.h()},h(){this.first=t},m(a,i){te(a,t,i),ce(s,a,i),o=!0},p(a,i){e=a;const d={};i&1&&(d.id=e[2]),i&1&&(d.name=e[3]),s.$set(d)},i(a){o||(x(s.$$.fragment,a),o=!0)},o(a){Z(s.$$.fragment,a),o=!1},d(a){a&&y(t),de(s,a)}}}function Vt(n){let e,t,s="",o,a,i=[],d=new Map,r,l=et(Object.entries(n[0].credSetStore));const b=c=>c[2];for(let c=0;c<l.length;c+=1){let m=st(n,l,c),f=b(m);d.set(f,i[c]=rt(f,m))}return{c(){e=g("div"),t=g("div"),t.innerHTML=s,o=I(),a=g("div");for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=v(c,"DIV",{class:!0});var m=N(e);t=v(m,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-k2cro1"&&(t.innerHTML=s),o=P(m),a=v(m,"DIV",{class:!0});var f=N(a);for(let S=0;S<i.length;S+=1)i[S].l(f);f.forEach(y),m.forEach(y),this.h()},h(){h(t,"class","credentials-search"),h(a,"class","credentials-list svelte-1ht3s0y"),h(e,"class","credentials-main")},m(c,m){te(c,e,m),u(e,t),u(e,o),u(e,a);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(a,null);r=!0},p(c,[m]){m&1&&(l=et(Object.entries(c[0].credSetStore)),Re(),i=Ct(i,m,b,1,c,l,d,a,St,rt,null,st),Ge())},i(c){if(!r){for(let m=0;m<l.length;m+=1)x(i[m]);r=!0}},o(c){for(let m=0;m<i.length;m+=1)Z(i[m]);r=!1},d(c){c&&y(e);for(let m=0;m<i.length;m+=1)i[m].d()}}}function Nt(n,e,t){const s={credSetStore:Oe};let o={};for(const[a,i]of Object.entries(s)){const d=i.subscribe(r=>{const l={...o};l[a]=r,t(0,o=l)});Se(d)}return[o]}class qt extends me{constructor(e){super(),pe(this,e,Nt,Vt,fe,{})}}const Ot=()=>{const{subscribe:n,set:e}=Ue(!1);return{subscribe:n,true:()=>{e(!0)},false:()=>{e(!1)},reset:()=>{e(!1)}}},He=Ot();function Lt(n){let e,t,s,o="Name",a,i,d,r,l,b,c="Email/Username",m,f,S,p,w,_,B="Password",C,E,q,V,k,T="Description",D,U,A,ne,$,H,ee,R,L;return{c(){e=g("form"),t=g("div"),s=g("label"),s.textContent=o,a=I(),i=g("input"),r=I(),l=g("div"),b=g("label"),b.textContent=c,m=I(),f=g("input"),p=I(),w=g("div"),_=g("label"),_.textContent=B,C=I(),E=g("input"),q=I(),V=g("div"),k=g("label"),k.textContent=T,D=I(),U=g("textarea"),ne=I(),$=g("button"),H=be(n[5]),this.h()},l(F){e=v(F,"FORM",{});var O=N(e);t=v(O,"DIV",{class:!0});var G=N(t);s=v(G,"LABEL",{for:!0,"data-svelte-h":!0}),z(s)!=="svelte-1f757gv"&&(s.textContent=o),a=P(G),i=v(G,"INPUT",{id:!0,type:!0}),G.forEach(y),r=P(O),l=v(O,"DIV",{class:!0});var _e=N(l);b=v(_e,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-p1kt7x"&&(b.textContent=c),m=P(_e),f=v(_e,"INPUT",{id:!0,type:!0}),_e.forEach(y),p=P(O),w=v(O,"DIV",{class:!0});var X=N(w);_=v(X,"LABEL",{for:!0,"data-svelte-h":!0}),z(_)!=="svelte-1so3zff"&&(_.textContent=B),C=P(X),E=v(X,"INPUT",{id:!0,type:!0}),X.forEach(y),q=P(O),V=v(O,"DIV",{class:!0});var M=N(V);k=v(M,"LABEL",{for:!0,"data-svelte-h":!0}),z(k)!=="svelte-r4xeun"&&(k.textContent=T),D=P(M),U=v(M,"TEXTAREA",{id:!0}),N(U).forEach(y),M.forEach(y),ne=P(O),$=v(O,"BUTTON",{type:!0});var ie=N($);H=he(ie,n[5]),ie.forEach(y),O.forEach(y),this.h()},h(){h(s,"for","credential-creator-name"),h(i,"id","credential-creator-name"),h(i,"type","text"),i.disabled=d=n[6].disableButtonStateStore,i.required=!0,h(t,"class","credential-creator name container"),h(b,"for","credential-creator-email-username"),h(f,"id","credential-creator-email-username"),h(f,"type","text"),f.disabled=S=n[6].disableButtonStateStore,h(l,"class","credential-creator email container"),h(_,"for","credential-creator-password"),h(E,"id","credential-creator-password"),h(E,"type","password"),h(w,"class","credential-creator password"),h(k,"for","credential-creator-description"),h(U,"id","credential-creator-description"),U.disabled=A=n[6].disableButtonStateStore,h(V,"class","credential-creator description"),h($,"type","submit"),$.disabled=ee=!n[7]},m(F,O){te(F,e,O),u(e,t),u(t,s),u(t,a),u(t,i),W(i,n[0]),u(e,r),u(e,l),u(l,b),u(l,m),u(l,f),W(f,n[1]),u(e,p),u(e,w),u(w,_),u(w,C),u(w,E),W(E,n[2]),u(e,q),u(e,V),u(V,k),u(V,D),u(V,U),W(U,n[3]),u(e,ne),u(e,$),u($,H),R||(L=[J(i,"input",n[9]),J(f,"input",n[10]),J(E,"input",n[11]),J(U,"input",n[12]),J(e,"submit",function(){dt(n[4])&&n[4].apply(this,arguments)})],R=!0)},p(F,[O]){n=F,O&64&&d!==(d=n[6].disableButtonStateStore)&&(i.disabled=d),O&1&&i.value!==n[0]&&W(i,n[0]),O&64&&S!==(S=n[6].disableButtonStateStore)&&(f.disabled=S),O&2&&f.value!==n[1]&&W(f,n[1]),O&4&&E.value!==n[2]&&W(E,n[2]),O&64&&A!==(A=n[6].disableButtonStateStore)&&(U.disabled=A),O&8&&W(U,n[3]),O&32&&Ne(H,n[5]),O&128&&ee!==(ee=!n[7])&&($.disabled=ee)},i:ae,o:ae,d(F){F&&y(e),R=!1,Le(L)}}}function At(n,e,t){let s,{handleSubmit:o,submitEnabled:a,submitText:i}=e,{name:d,emailUsername:r,password:l,description:b}=e;const c={disableButtonStateStore:He};let m={};for(const[_,B]of Object.entries(c)){const C=B.subscribe(E=>{const q={...m};q[_]=E,t(6,m=q)});Se(C)}function f(){d=this.value,t(0,d)}function S(){r=this.value,t(1,r)}function p(){l=this.value,t(2,l)}function w(){b=this.value,t(3,b)}return n.$$set=_=>{"handleSubmit"in _&&t(4,o=_.handleSubmit),"submitEnabled"in _&&t(8,a=_.submitEnabled),"submitText"in _&&t(5,i=_.submitText),"name"in _&&t(0,d=_.name),"emailUsername"in _&&t(1,r=_.emailUsername),"password"in _&&t(2,l=_.password),"description"in _&&t(3,b=_.description)},n.$$.update=()=>{n.$$.dirty&320&&t(7,s=a&&!m.disableButtonStateStore)},[d,r,l,b,o,i,m,s,a,f,S,p,w]}class ct extends me{constructor(e){super(),pe(this,e,At,Lt,fe,{handleSubmit:4,submitEnabled:8,submitText:5,name:0,emailUsername:1,password:2,description:3})}}function at(n){let e,t="Credential Created!";return{c(){e=g("p"),e.textContent=t},l(s){e=v(s,"P",{"data-svelte-h":!0}),z(e)!=="svelte-fkqjxo"&&(e.textContent=t)},m(s,o){te(s,e,o)},d(s){s&&y(e)}}}function Ft(n){let e,t,s,o,a,i,d,r,l=n[4]&&at();function b(p){n[9](p)}function c(p){n[10](p)}function m(p){n[11](p)}function f(p){n[12](p)}let S={handleSubmit:n[6],submitEnabled:n[5],submitText:"Create"};return n[0]!==void 0&&(S.name=n[0]),n[1]!==void 0&&(S.emailUsername=n[1]),n[2]!==void 0&&(S.password=n[2]),n[3]!==void 0&&(S.description=n[3]),s=new ct({props:S}),ge.push(()=>ye(s,"name",b)),ge.push(()=>ye(s,"emailUsername",c)),ge.push(()=>ye(s,"password",m)),ge.push(()=>ye(s,"description",f)),{c(){e=g("div"),l&&l.c(),t=I(),le(s.$$.fragment),this.h()},l(p){e=v(p,"DIV",{class:!0});var w=N(e);l&&l.l(w),t=P(w),ue(s.$$.fragment,w),w.forEach(y),this.h()},h(){h(e,"class","credentials-creator")},m(p,w){te(p,e,w),l&&l.m(e,null),u(e,t),ce(s,e,null),r=!0},p(p,[w]){p[4]?l||(l=at(),l.c(),l.m(e,t)):l&&(l.d(1),l=null);const _={};w&32&&(_.submitEnabled=p[5]),!o&&w&1&&(o=!0,_.name=p[0],Ce(()=>o=!1)),!a&&w&2&&(a=!0,_.emailUsername=p[1],Ce(()=>a=!1)),!i&&w&4&&(i=!0,_.password=p[2],Ce(()=>i=!1)),!d&&w&8&&(d=!0,_.description=p[3],Ce(()=>d=!1)),s.$set(_)},i(p){r||(x(s.$$.fragment,p),r=!0)},o(p){Z(s.$$.fragment,p),r=!1},d(p){p&&y(e),l&&l.d(),de(s)}}}function jt(n,e,t){let s;const o={credSetStore:Oe};let a={};for(const[V,k]of Object.entries(o)){const T=k.subscribe(D=>{const U={...a};U[V]=D,a=U});Se(T)}let i,d,r,l,b=!1;async function c(V){if(V.preventDefault(),!_(i)){re.set(`Failed to add credential, the name '${i}' is
         already associated with an existing credential.`),p();return}t(7,b=!0);const k=await De.post.credential(i,d,r,l);k.success?(Oe.update(T=>({...T,[k.credentialID]:i})),w(),S(),p(2e3)):"auth"in k&&!k.auth?Ee():(re.set(k.error),p()),t(7,b=!1)}let m=!1,f=!1;function S(V=2e3){t(4,m=!0),setTimeout(()=>{t(4,m=!1)},V)}function p(V=3e3){t(8,f=!0),setTimeout(()=>{t(8,f=!1)},V)}function w(){t(0,i=""),t(1,d=""),t(2,r=""),t(3,l="")}function _(V){return!Object.values(a.credSetStore).includes(V)}function B(V){i=V,t(0,i)}function C(V){d=V,t(1,d)}function E(V){r=V,t(2,r)}function q(V){l=V,t(3,l)}return n.$$.update=()=>{n.$$.dirty&384&&t(5,s=!b&&!f)},[i,d,r,l,m,s,c,b,f,B,C,E,q]}class $t extends me{constructor(e){super(),pe(this,e,jt,Ft,fe,{})}}function it(n){let e,t="Credential Updated!";return{c(){e=g("p"),e.textContent=t},l(s){e=v(s,"P",{"data-svelte-h":!0}),z(e)!=="svelte-vurctt"&&(e.textContent=t)},m(s,o){te(s,e,o)},d(s){s&&y(e)}}}function Mt(n){let e,t,s,o,a,i,d,r,l=n[4]&&it();function b(p){n[11](p)}function c(p){n[12](p)}function m(p){n[13](p)}function f(p){n[14](p)}let S={handleSubmit:n[6],submitEnabled:n[5],submitText:"Update"};return n[0]!==void 0&&(S.name=n[0]),n[1]!==void 0&&(S.emailUsername=n[1]),n[2]!==void 0&&(S.password=n[2]),n[3]!==void 0&&(S.description=n[3]),s=new ct({props:S}),ge.push(()=>ye(s,"name",b)),ge.push(()=>ye(s,"emailUsername",c)),ge.push(()=>ye(s,"password",m)),ge.push(()=>ye(s,"description",f)),{c(){e=g("div"),l&&l.c(),t=I(),le(s.$$.fragment),this.h()},l(p){e=v(p,"DIV",{class:!0});var w=N(e);l&&l.l(w),t=P(w),ue(s.$$.fragment,w),w.forEach(y),this.h()},h(){h(e,"class","credentials-updater")},m(p,w){te(p,e,w),l&&l.m(e,null),u(e,t),ce(s,e,null),r=!0},p(p,[w]){p[4]?l||(l=it(),l.c(),l.m(e,t)):l&&(l.d(1),l=null);const _={};w&32&&(_.submitEnabled=p[5]),!o&&w&1&&(o=!0,_.name=p[0],Ce(()=>o=!1)),!a&&w&2&&(a=!0,_.emailUsername=p[1],Ce(()=>a=!1)),!i&&w&4&&(i=!0,_.password=p[2],Ce(()=>i=!1)),!d&&w&8&&(d=!0,_.description=p[3],Ce(()=>d=!1)),s.$set(_)},i(p){r||(x(s.$$.fragment,p),r=!0)},o(p){Z(s.$$.fragment,p),r=!1},d(p){p&&y(e),l&&l.d(),de(s)}}}function Ht(n,e,t){let s,o;const a={updaterStateStore:ze,credSetStore:Oe};let i={};for(const[T,D]of Object.entries(a)){const U=D.subscribe(A=>{const ne={...i};ne[T]=A,t(7,i=ne)});Se(U)}let d,r,l,b,c=!1;async function m(T){T.preventDefault();const D=f();if("name"in D&&!C(D.name)){re.set(`Failed to update credential, the name '${d}' is
         already associated with a different existing credential.`),B();return}t(8,c=!0);const U=await De.put.credential(i.updaterStateStore.credentialID,D);U.success?(S(D),_(),B(2e3)):"auth"in U&&!U.auth?Ee():(re.set(U.error),B()),t(8,c=!1)}function f(){const T={};return d!==i.updaterStateStore.name&&(T.name=d),r!==i.updaterStateStore.emailUsername&&(T.emailUsername=r),l!==i.updaterStateStore.password&&(T.password=l),b!==i.updaterStateStore.description&&(T.description=b),T}function S(T){"name"in T&&Oe.update(D=>({...D,[i.updaterStateStore.credentialID]:T.name})),ze.update(D=>({...D,...T}))}let p=!1,w=!1;function _(T=2e3){t(4,p=!0),setTimeout(()=>{t(4,p=!1)},T)}function B(T=3e3){t(9,w=!0),setTimeout(()=>{t(9,w=!1)},T)}function C(T){return!Object.values(i.credSetStore).includes(T)}ft(()=>{t(0,d=i.updaterStateStore.name),t(1,r=i.updaterStateStore.emailUsername),t(2,l=i.updaterStateStore.password),t(3,b=i.updaterStateStore.description)});function E(T){d=T,t(0,d)}function q(T){r=T,t(1,r)}function V(T){l=T,t(2,l)}function k(T){b=T,t(3,b)}return n.$$.update=()=>{n.$$.dirty&143&&t(10,s=i.updaterStateStore.name!==d||i.updaterStateStore.emailUsername!==r||i.updaterStateStore.password!==l||i.updaterStateStore.description!==b),n.$$.dirty&1792&&t(5,o=!c&&!w&&s)},[d,r,l,b,p,o,m,i,c,w,s,E,q,V,k]}class zt extends me{constructor(e){super(),pe(this,e,Ht,Mt,fe,{})}}function Rt(n){let e,t;return e=new zt({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Gt(n){let e,t;return e=new $t({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Qt(n){let e,t;return e=new qt({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Xt(n){let e,t,s,o;const a=[Qt,Gt,Rt],i=[];function d(r,l){return r[0].secondaryFocusStore===se.credentials.main?0:r[0].secondaryFocusStore===se.credentials.creator?1:r[0].secondaryFocusStore===se.credentials.updater?2:-1}return~(t=d(n))&&(s=i[t]=a[t](n)),{c(){e=g("div"),s&&s.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var l=N(e);s&&s.l(l),l.forEach(y),this.h()},h(){h(e,"class","credentials container")},m(r,l){te(r,e,l),~t&&i[t].m(e,null),o=!0},p(r,[l]){let b=t;t=d(r),t!==b&&(s&&(Re(),Z(i[b],1,1,()=>{i[b]=null}),Ge()),~t?(s=i[t],s||(s=i[t]=a[t](r),s.c()),x(s,1),s.m(e,null)):s=null)},i(r){o||(x(s),o=!0)},o(r){Z(s),o=!1},d(r){r&&y(e),~t&&i[t].d()}}}function Yt(n,e,t){const s={secondaryFocusStore:we};let o={};for(const[a,i]of Object.entries(s)){const d=i.subscribe(r=>{const l={...o};l[a]=r,t(0,o=l)});Se(d)}return[o]}class Jt extends me{constructor(e){super(),pe(this,e,Yt,Xt,fe,{})}}const Qe={get:{data:async()=>await ve("/home/settings","GET")},put:{password:async(n,e)=>await ve("/home/settings/new-password","POST",{oldPassword:n,newPassword:e}),email:async(n,e,t)=>await ve("/home/settings/new-email","POST",{oldEmail:n,password:e,newEmail:t})},delete:{account:async(n,e)=>await ve("/home/settings/delete-account","POST",{email:n,password:e})}};function Kt(n){let e,t,s="Delete Your Account",o,a,i="Desc Here",d,r,l,b="Email",c,m,f,S,p,w="Password",_,B,C,E,q,V="Confirm Password",k,T,D,U,A,ne,$,H,ee;return{c(){e=g("div"),t=g("h3"),t.textContent=s,o=I(),a=g("p"),a.textContent=i,d=I(),r=g("form"),l=g("label"),l.textContent=b,c=I(),m=g("input"),S=I(),p=g("label"),p.textContent=w,_=I(),B=g("input"),E=I(),q=g("label"),q.textContent=V,k=I(),T=g("input"),U=I(),A=g("button"),ne=be("Delete"),this.h()},l(R){e=v(R,"DIV",{class:!0});var L=N(e);t=v(L,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-bjgs3s"&&(t.textContent=s),o=P(L),a=v(L,"P",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1tvstg1"&&(a.textContent=i),d=P(L),r=v(L,"FORM",{action:!0,method:!0});var F=N(r);l=v(F,"LABEL",{for:!0,"data-svelte-h":!0}),z(l)!=="svelte-2vstyi"&&(l.textContent=b),c=P(F),m=v(F,"INPUT",{id:!0,name:!0,type:!0}),S=P(F),p=v(F,"LABEL",{for:!0,"data-svelte-h":!0}),z(p)!=="svelte-9e3l82"&&(p.textContent=w),_=P(F),B=v(F,"INPUT",{id:!0,name:!0,type:!0}),E=P(F),q=v(F,"LABEL",{for:!0,"data-svelte-h":!0}),z(q)!=="svelte-14qrn4n"&&(q.textContent=V),k=P(F),T=v(F,"INPUT",{id:!0,name:!0,type:!0}),U=P(F),A=v(F,"BUTTON",{type:!0});var O=N(A);ne=he(O,"Delete"),O.forEach(y),F.forEach(y),L.forEach(y),this.h()},h(){h(t,"class","delete-account header"),h(a,"class","delete-account description"),h(l,"for","delete-account-email"),h(m,"id","delete-account-email"),h(m,"name","email"),h(m,"type","email"),m.disabled=f=n[0].disableButtonStateStore,h(p,"for","delete-account-password"),h(B,"id","delete-account-password"),h(B,"name","password"),h(B,"type","password"),B.disabled=C=n[0].disableButtonStateStore,h(q,"for","delete-account-confirm-password"),h(T,"id","delete-account-confirm-password"),h(T,"name","confirmPassword"),h(T,"type","password"),T.disabled=D=n[0].disableButtonStateStore,h(A,"type","submit"),A.disabled=$=!n[4],h(r,"action","/home/settings/delete-account"),h(r,"method","POST"),h(e,"class","delete-account container")},m(R,L){te(R,e,L),u(e,t),u(e,o),u(e,a),u(e,d),u(e,r),u(r,l),u(r,c),u(r,m),W(m,n[1]),u(r,S),u(r,p),u(r,_),u(r,B),W(B,n[2]),u(r,E),u(r,q),u(r,k),u(r,T),W(T,n[3]),u(r,U),u(r,A),u(A,ne),H||(ee=[J(m,"input",n[8]),J(B,"input",n[9]),J(T,"input",n[10]),J(r,"submit",n[5])],H=!0)},p(R,[L]){L&1&&f!==(f=R[0].disableButtonStateStore)&&(m.disabled=f),L&2&&m.value!==R[1]&&W(m,R[1]),L&1&&C!==(C=R[0].disableButtonStateStore)&&(B.disabled=C),L&4&&B.value!==R[2]&&W(B,R[2]),L&1&&D!==(D=R[0].disableButtonStateStore)&&(T.disabled=D),L&8&&T.value!==R[3]&&W(T,R[3]),L&16&&$!==($=!R[4])&&(A.disabled=$)},i:ae,o:ae,d(R){R&&y(e),H=!1,Le(ee)}}}function Wt(n,e,t){let s;const o={disableButtonStateStore:He};let a={};for(const[w,_]of Object.entries(o)){const B=_.subscribe(C=>{const E={...a};E[w]=C,t(0,a=E)});Se(B)}let i,d,r,l=!1;async function b(w){w.preventDefault(),t(6,l=!0);const _=await Qe.delete.account(i,d);_.success?(qe.true(),Be.authedFalse()):"auth"in _&&!_.auth?Ee():(re.set(_.error),m()),t(6,l=!1)}let c=!1;function m(w=2e3){t(7,c=!0),setTimeout(()=>{t(7,c=!1)},w)}function f(){i=this.value,t(1,i)}function S(){d=this.value,t(2,d)}function p(){r=this.value,t(3,r)}return n.$$.update=()=>{n.$$.dirty&207&&t(4,s=i&&d&&r&&buttonEnabled&&!l&&!c&&!a.disableButtonStateStore)},[a,i,d,r,s,b,l,c,f,S,p]}class Zt extends me{constructor(e){super(),pe(this,e,Wt,Kt,fe,{})}}function xt(n){let e,t,s="New Password",o,a,i="Desc Here",d,r,l,b,c="Old Password",m,f,S,p,w,_,B,C,E,q="New Password",V,k,T,D,U,A,ne,$,H,ee="Confirm New Password",R,L,F,O,G,_e,X,M,ie;return{c(){e=g("div"),t=g("h3"),t.textContent=s,o=I(),a=g("p"),a.textContent=i,d=I(),r=g("form"),l=g("div"),b=g("label"),b.textContent=c,m=I(),f=g("input"),p=I(),w=g("p"),_=be(n[4]),B=I(),C=g("div"),E=g("label"),E.textContent=q,V=I(),k=g("input"),D=I(),U=g("p"),A=be(n[5]),ne=I(),$=g("div"),H=g("label"),H.textContent=ee,R=I(),L=g("input"),O=I(),G=g("button"),_e=be("Set"),this.h()},l(Q){e=v(Q,"DIV",{class:!0});var K=N(e);t=v(K,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1pzclo9"&&(t.textContent=s),o=P(K),a=v(K,"P",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-17yatlw"&&(a.textContent=i),d=P(K),r=v(K,"FORM",{});var j=N(r);l=v(j,"DIV",{class:!0});var Y=N(l);b=v(Y,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-1dztljq"&&(b.textContent=c),m=P(Y),f=v(Y,"INPUT",{id:!0,name:!0,type:!0}),Y.forEach(y),p=P(j),w=v(j,"P",{class:!0});var oe=N(w);_=he(oe,n[4]),oe.forEach(y),B=P(j),C=v(j,"DIV",{class:!0});var Ie=N(C);E=v(Ie,"LABEL",{for:!0,"data-svelte-h":!0}),z(E)!=="svelte-gu95ju"&&(E.textContent=q),V=P(Ie),k=v(Ie,"INPUT",{id:!0,name:!0,type:!0}),Ie.forEach(y),D=P(j),U=v(j,"P",{class:!0});var je=N(U);A=he(je,n[5]),je.forEach(y),ne=P(j),$=v(j,"DIV",{class:!0});var Pe=N($);H=v(Pe,"LABEL",{for:!0,"data-svelte-h":!0}),z(H)!=="svelte-1w1roi4"&&(H.textContent=ee),R=P(Pe),L=v(Pe,"INPUT",{id:!0,name:!0,type:!0}),Pe.forEach(y),O=P(j),G=v(j,"BUTTON",{type:!0});var $e=N(G);_e=he($e,"Set"),$e.forEach(y),j.forEach(y),K.forEach(y),this.h()},h(){h(t,"class","new-password header"),h(a,"class","new-password description"),h(b,"for","new-password-old-password"),h(f,"id","new-password-old-password"),h(f,"name","oldPassword"),h(f,"type","password"),f.disabled=S=n[0].disableButtonStateStore,h(l,"class","new-password-old-password container"),h(w,"class","new-password-new-password error-message"),h(E,"for","new-password-new-password"),h(k,"id","new-password-new-password"),h(k,"name","newPassword"),h(k,"type","password"),k.disabled=T=n[0].disableButtonStateStore,h(C,"class","new-password-new-password container"),h(U,"class","new-password-confirm-password error-message"),h(H,"for","new-password-confirm-password"),h(L,"id","new-password-confirm-password"),h(L,"name","confirmPassword"),h(L,"type","password"),L.disabled=F=n[0].disableButtonStateStore,h($,"class","new-password-confirm-password container"),h(G,"type","submit"),G.disabled=X=!n[6],h(e,"class","new-password container")},m(Q,K){te(Q,e,K),u(e,t),u(e,o),u(e,a),u(e,d),u(e,r),u(r,l),u(l,b),u(l,m),u(l,f),W(f,n[1]),u(r,p),u(r,w),u(w,_),u(r,B),u(r,C),u(C,E),u(C,V),u(C,k),W(k,n[2]),u(r,D),u(r,U),u(U,A),u(r,ne),u(r,$),u($,H),u($,R),u($,L),W(L,n[3]),u(r,O),u(r,G),u(G,_e),M||(ie=[J(f,"input",n[10]),J(k,"input",n[11]),J(L,"input",n[12]),J(r,"submit",n[7])],M=!0)},p(Q,[K]){K&1&&S!==(S=Q[0].disableButtonStateStore)&&(f.disabled=S),K&2&&f.value!==Q[1]&&W(f,Q[1]),K&16&&Ne(_,Q[4]),K&1&&T!==(T=Q[0].disableButtonStateStore)&&(k.disabled=T),K&4&&k.value!==Q[2]&&W(k,Q[2]),K&32&&Ne(A,Q[5]),K&1&&F!==(F=Q[0].disableButtonStateStore)&&(L.disabled=F),K&8&&L.value!==Q[3]&&W(L,Q[3]),K&64&&X!==(X=!Q[6])&&(G.disabled=X)},i:ae,o:ae,d(Q){Q&&y(e),M=!1,Le(ie)}}}function en(n,e,t){let s;const o={disableButtonStateStore:He};let a={};for(const[B,C]of Object.entries(o)){const E=C.subscribe(q=>{const V={...a};V[B]=q,t(0,a=V)});Se(E)}let i,d,r,l="",b="",c=!1;async function m(B){B.preventDefault(),t(8,c=!0);const C=await Qe.put.password(i,d);C.success?(qe.true(),Be.authedFalse()):"auth"in C&&!C.auth?Ee():(re.set(C.error),S()),t(8,c=!1)}let f=!1;function S(B=2e3){t(9,f=!0),setTimeout(()=>{t(9,f=!1)},B)}function p(){i=this.value,t(1,i)}function w(){d=this.value,t(2,d)}function _(){r=this.value,t(3,r)}return n.$$.update=()=>{n.$$.dirty&4&&(d!==""?t(4,l=gt(d)):t(4,l="")),n.$$.dirty&12&&(r!==""&&d!==""?t(5,b=vt(r,d)):t(5,b="")),n.$$.dirty&831&&t(6,s=i&&d&&r&&buttonEnabled&&!l&&!b&&!c&&!f&&!a.disableButtonStateStore)},[a,i,d,r,l,b,s,m,c,f,p,w,_]}class tn extends me{constructor(e){super(),pe(this,e,en,xt,fe,{})}}function nn(n){let e,t,s="Update Account Email",o,a,i="Desc Here",d,r,l,b,c="Current Email",m,f,S,p,w,_,B="Password",C,E,q,V,k,T,D,U,A,ne="New Email",$,H,ee,R,L,F,O,G,_e;return{c(){e=g("div"),t=g("h3"),t.textContent=s,o=I(),a=g("p"),a.textContent=i,d=I(),r=g("form"),l=g("div"),b=g("label"),b.textContent=c,m=I(),f=g("input"),p=I(),w=g("div"),_=g("label"),_.textContent=B,C=I(),E=g("input"),V=I(),k=g("p"),T=be(n[4]),D=I(),U=g("div"),A=g("label"),A.textContent=ne,$=I(),H=g("input"),R=I(),L=g("button"),F=be("Set"),this.h()},l(X){e=v(X,"DIV",{class:!0});var M=N(e);t=v(M,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-tlkmds"&&(t.textContent=s),o=P(M),a=v(M,"P",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-npnfgg"&&(a.textContent=i),d=P(M),r=v(M,"FORM",{});var ie=N(r);l=v(ie,"DIV",{class:!0});var Q=N(l);b=v(Q,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-18m3fc4"&&(b.textContent=c),m=P(Q),f=v(Q,"INPUT",{id:!0,type:!0,name:!0}),Q.forEach(y),p=P(ie),w=v(ie,"DIV",{class:!0});var K=N(w);_=v(K,"LABEL",{for:!0,"data-svelte-h":!0}),z(_)!=="svelte-1zdtl7"&&(_.textContent=B),C=P(K),E=v(K,"INPUT",{id:!0,type:!0,name:!0}),K.forEach(y),V=P(ie),k=v(ie,"P",{class:!0});var j=N(k);T=he(j,n[4]),j.forEach(y),D=P(ie),U=v(ie,"DIV",{class:!0});var Y=N(U);A=v(Y,"LABEL",{for:!0,"data-svelte-h":!0}),z(A)!=="svelte-d2nd6i"&&(A.textContent=ne),$=P(Y),H=v(Y,"INPUT",{id:!0,type:!0,name:!0}),Y.forEach(y),R=P(ie),L=v(ie,"BUTTON",{type:!0});var oe=N(L);F=he(oe,"Set"),oe.forEach(y),ie.forEach(y),M.forEach(y),this.h()},h(){h(t,"class","update-email header"),h(a,"class","update-email description"),h(b,"for","update-email-current-email"),h(f,"id","update-email-current-email"),h(f,"type","email"),h(f,"name","email"),f.disabled=S=n[0].disableButtonStateStore,h(l,"class","update-email current-email container"),h(_,"for","update-email-password"),h(E,"id","update-email-password"),h(E,"type","password"),h(E,"name","password"),E.disabled=q=n[0].disableButtonStateStore,h(w,"class","update-email password container"),h(k,"class","update-email-new-email error-message"),h(A,"for","update-email-new-email"),h(H,"id","update-email-new-email"),h(H,"type","email"),h(H,"name","newEmail"),H.disabled=ee=n[0].disableButtonStateStore,h(U,"class","update-email new-email container"),h(L,"type","submit"),L.disabled=O=!n[5],h(e,"class","update-email")},m(X,M){te(X,e,M),u(e,t),u(e,o),u(e,a),u(e,d),u(e,r),u(r,l),u(l,b),u(l,m),u(l,f),W(f,n[1]),u(r,p),u(r,w),u(w,_),u(w,C),u(w,E),W(E,n[2]),u(r,V),u(r,k),u(k,T),u(r,D),u(r,U),u(U,A),u(U,$),u(U,H),W(H,n[3]),u(r,R),u(r,L),u(L,F),G||(_e=[J(f,"input",n[9]),J(E,"input",n[10]),J(H,"input",n[11]),J(r,"submit",n[6])],G=!0)},p(X,[M]){M&1&&S!==(S=X[0].disableButtonStateStore)&&(f.disabled=S),M&2&&f.value!==X[1]&&W(f,X[1]),M&1&&q!==(q=X[0].disableButtonStateStore)&&(E.disabled=q),M&4&&E.value!==X[2]&&W(E,X[2]),M&16&&Ne(T,X[4]),M&1&&ee!==(ee=X[0].disableButtonStateStore)&&(H.disabled=ee),M&8&&H.value!==X[3]&&W(H,X[3]),M&32&&O!==(O=!X[5])&&(L.disabled=O)},i:ae,o:ae,d(X){X&&y(e),G=!1,Le(_e)}}}function sn(n,e,t){let s;const o={disableButtonStateStore:He};let a={};for(const[_,B]of Object.entries(o)){const C=B.subscribe(E=>{const q={...a};q[_]=E,t(0,a=q)});Se(C)}let i,d,r,l="",b=!1;async function c(_){_.preventDefault(),t(7,b=!0);const B=await Qe.put.email(i,d,r);B.success?(qe.true(),Be.authedFalse()):"auth"in B&&!B.auth?Ee():(re.set(B.error),f()),t(7,b=!1)}let m=!1;function f(_=2e3){t(8,m=!0),setTimeout(()=>{t(8,m=!1)},_)}function S(){i=this.value,t(1,i)}function p(){d=this.value,t(2,d)}function w(){r=this.value,t(3,r)}return n.$$.update=()=>{n.$$.dirty&8&&(r!==""?t(4,l=wt(r)):t(4,l="")),n.$$.dirty&415&&t(5,s=i&&d&&r&&buttonEnabled&&!l&&!b&&!m&&!a.disableButtonStateStore)},[a,i,d,r,l,s,c,b,m,S,p,w]}class rn extends me{constructor(e){super(),pe(this,e,sn,nn,fe,{})}}function an(n){let e,t='<h3 class="verify-email header">Verify Email</h3> <p class="verify-email description"></p> <button>Send Verification Code</button> <form action="/home/settings/verify-email" method="POST"><label for="verify-email-code-input">Verification Code</label> <input id="verify-email-code-input" value="verificationCode"/> <button type="submit">Verify</button></form>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1tq9h5t"&&(e.innerHTML=t),this.h()},h(){h(e,"class","verify-email container")},m(s,o){te(s,e,o)},p:ae,i:ae,o:ae,d(s){s&&y(e)}}}class on extends me{constructor(e){super(),pe(this,e,null,an,fe,{})}}function ln(n){let e,t,s="Account",o,a,i,d,r,l,b,c,m;return a=new Zt({}),d=new tn({}),l=new rn({}),c=new on({}),{c(){e=g("div"),t=g("h2"),t.textContent=s,o=I(),le(a.$$.fragment),i=I(),le(d.$$.fragment),r=I(),le(l.$$.fragment),b=I(),le(c.$$.fragment),this.h()},l(f){e=v(f,"DIV",{class:!0});var S=N(e);t=v(S,"H2",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-xopwpk"&&(t.textContent=s),o=P(S),ue(a.$$.fragment,S),i=P(S),ue(d.$$.fragment,S),r=P(S),ue(l.$$.fragment,S),b=P(S),ue(c.$$.fragment,S),S.forEach(y),this.h()},h(){h(t,"class","settings-account header"),h(e,"class","settings-account container svelte-15u0fo5")},m(f,S){te(f,e,S),u(e,t),u(e,o),ce(a,e,null),u(e,i),ce(d,e,null),u(e,r),ce(l,e,null),u(e,b),ce(c,e,null),n[1](e),m=!0},p:ae,i(f){m||(x(a.$$.fragment,f),x(d.$$.fragment,f),x(l.$$.fragment,f),x(c.$$.fragment,f),m=!0)},o(f){Z(a.$$.fragment,f),Z(d.$$.fragment,f),Z(l.$$.fragment,f),Z(c.$$.fragment,f),m=!1},d(f){f&&y(e),de(a),de(d),de(l),de(c),n[1](null)}}}function un(n,e,t){let{accountContainer:s}=e;function o(a){ge[a?"unshift":"push"](()=>{s=a,t(0,s)})}return n.$$set=a=>{"accountContainer"in a&&t(0,s=a.accountContainer)},[s,o]}class cn extends me{constructor(e){super(),pe(this,e,un,ln,fe,{accountContainer:0})}}function dn(n){let e,t='<h2 class="settings-preferences header">Preferences</h2> <div class="settings-preferences general container svelte-svrx2m"></div> <div class="settings-preferences theme container svelte-svrx2m"></div> <div class="settings-preferences font container svelte-svrx2m"></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-h1uwy9"&&(e.innerHTML=t),this.h()},h(){h(e,"class","settings-preferences container svelte-svrx2m")},m(s,o){te(s,e,o),n[1](e)},p:ae,i:ae,o:ae,d(s){s&&y(e),n[1](null)}}}function fn(n,e,t){let{preferencesContainer:s}=e;function o(a){ge[a?"unshift":"push"](()=>{s=a,t(0,s)})}return n.$$set=a=>{"preferencesContainer"in a&&t(0,s=a.preferencesContainer)},[s,o]}class mn extends me{constructor(e){super(),pe(this,e,fn,dn,fe,{preferencesContainer:0})}}function pn(n){let e,t='<h2 class="settings-faq header">FAQ</h2> <div class="settings-faq about container svelte-iytjw8"></div> <div class="settings-faq is-it-safe container svelte-iytjw8"></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-7lj1tf"&&(e.innerHTML=t),this.h()},h(){h(e,"class","settings-faq container svelte-iytjw8")},m(s,o){te(s,e,o),n[1](e)},p:ae,i:ae,o:ae,d(s){s&&y(e),n[1](null)}}}function bn(n,e,t){let{faqContainer:s}=e;function o(a){ge[a?"unshift":"push"](()=>{s=a,t(0,s)})}return n.$$set=a=>{"faqContainer"in a&&t(0,s=a.faqContainer)},[s,o]}class hn extends me{constructor(e){super(),pe(this,e,bn,pn,fe,{faqContainer:0})}}const _n=()=>{const{subscribe:n,update:e,set:t}=Ue({});return{subscribe:n,update:e,set:t,clear:()=>{t({})}}},gn=()=>{const{subscribe:n,set:e}=Ue(!1);return{subscribe:n,true:()=>{e(!0)},false:()=>{e(!1)}}},vn=_n(),Me=gn();function wn(n){let e,t,s,o,a,i,d,r,l,b,c,m;function f(C){n[6](C)}let S={};n[1]!==void 0&&(S.accountContainer=n[1]),t=new cn({props:S}),ge.push(()=>ye(t,"accountContainer",f));function p(C){n[7](C)}let w={};n[2]!==void 0&&(w.preferencesContainer=n[2]),a=new mn({props:w}),ge.push(()=>ye(a,"preferencesContainer",p));function _(C){n[8](C)}let B={};return n[3]!==void 0&&(B.faqContainer=n[3]),r=new hn({props:B}),ge.push(()=>ye(r,"faqContainer",_)),{c(){e=g("div"),le(t.$$.fragment),o=I(),le(a.$$.fragment),d=I(),le(r.$$.fragment),this.h()},l(C){e=v(C,"DIV",{class:!0});var E=N(e);ue(t.$$.fragment,E),o=P(E),ue(a.$$.fragment,E),d=P(E),ue(r.$$.fragment,E),E.forEach(y),this.h()},h(){h(e,"class","settings container svelte-1ruvxrw")},m(C,E){te(C,e,E),ce(t,e,null),u(e,o),ce(a,e,null),u(e,d),ce(r,e,null),n[9](e),b=!0,c||(m=J(e,"scroll",n[4]),c=!0)},p(C,[E]){const q={};!s&&E&2&&(s=!0,q.accountContainer=C[1],Ce(()=>s=!1)),t.$set(q);const V={};!i&&E&4&&(i=!0,V.preferencesContainer=C[2],Ce(()=>i=!1)),a.$set(V);const k={};!l&&E&8&&(l=!0,k.faqContainer=C[3],Ce(()=>l=!1)),r.$set(k)},i(C){b||(x(t.$$.fragment,C),x(a.$$.fragment,C),x(r.$$.fragment,C),b=!0)},o(C){Z(t.$$.fragment,C),Z(a.$$.fragment,C),Z(r.$$.fragment,C),b=!1},d(C){C&&y(e),de(t),de(a),de(r),n[9](null),c=!1,m()}}}function Sn(n,e,t){const s={primaryFocusStore:Ve,secondaryFocusStore:we,settingsNavClickedStore:Me};let o={};for(const[p,w]of Object.entries(s)){const _=w.subscribe(B=>{const C={...o};C[p]=B,t(5,o=C)});Se(_)}let a,i,d,r;async function l(){await Xe();const p={[se.settings.account]:i.offsetTop,[se.settings.preferences]:d.offsetTop,[se.settings.faq]:r.offsetTop};t(0,a.scrollTop=p[o.secondaryFocusStore]-p[se.settings.account],a),await Xe(),Me.false()}async function b(){if(o.settingsNavClickedStore)return;await Xe();const{scrollTop:p}=a;p>=0&&p<i.offsetTop?we.settings.account():p>i.offsetTop&&p<=d.offsetTop?we.settings.preferences():we.settings.faq()}function c(p){i=p,t(1,i)}function m(p){d=p,t(2,d)}function f(p){r=p,t(3,r)}function S(p){ge[p?"unshift":"push"](()=>{a=p,t(0,a)})}return n.$$.update=()=>{n.$$.dirty&32&&o.settingsNavClickedStore&&l()},[a,i,d,r,b,o,c,m,f,S]}class Cn extends me{constructor(e){super(),pe(this,e,Sn,wn,fe,{})}}function ot(n){let e,t="X",s,o,a,i=n[0].errorMessageStore+"",d,r,l;return{c(){e=g("button"),e.textContent=t,s=I(),o=g("div"),a=g("p"),d=be(i),this.h()},l(b){e=v(b,"BUTTON",{"data-svelte-h":!0}),z(e)!=="svelte-16nmebw"&&(e.textContent=t),s=P(b),o=v(b,"DIV",{class:!0});var c=N(o);a=v(c,"P",{class:!0});var m=N(a);d=he(m,i),m.forEach(y),c.forEach(y),this.h()},h(){h(a,"class","error-message"),h(o,"class","error-popup container")},m(b,c){te(b,e,c),te(b,s,c),te(b,o,c),u(o,a),u(a,d),r||(l=J(e,"click",n[1]),r=!0)},p(b,c){c&1&&i!==(i=b[0].errorMessageStore+"")&&Ne(d,i)},d(b){b&&(y(e),y(s),y(o)),r=!1,l()}}}function yn(n){let e,t=n[0].errorMessageStore&&ot(n);return{c(){t&&t.c(),e=Fe()},l(s){t&&t.l(s),e=Fe()},m(s,o){t&&t.m(s,o),te(s,e,o)},p(s,[o]){s[0].errorMessageStore?t?t.p(s,o):(t=ot(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ae,o:ae,d(s){s&&y(e),t&&t.d(s)}}}function En(n,e,t){const s={errorMessageStore:re};let o={};for(const[i,d]of Object.entries(s)){const r=d.subscribe(l=>{const b={...o};b[i]=l,t(0,o=b)});Se(r)}function a(){re.clear()}return[o,a]}let Tn=class extends me{constructor(e){super(),pe(this,e,En,yn,fe,{})}};function lt(n){let e,t,s,o,a;return{c(){e=g("button"),t=be("Back to main"),this.h()},l(i){e=v(i,"BUTTON",{class:!0});var d=N(e);t=he(d,"Back to main"),d.forEach(y),this.h()},h(){h(e,"class","credentials-main button"),e.disabled=s=n[0].disableButtonStateStore},m(i,d){te(i,e,d),u(e,t),o||(a=J(e,"click",n[5].credentials.main),o=!0)},p(i,d){d&1&&s!==(s=i[0].disableButtonStateStore)&&(e.disabled=s)},d(i){i&&y(e),o=!1,a()}}}function kn(n){let e,t;return e=new Jt({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Dn(n){let e,t;return e=new Cn({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Bn(n){let e,t,s,o,a,i,d,r,l,b,c,m,f,S,p,w,_,B,C="Settings",E,q,V,k,T,D,U,A,ne,$,H,ee,R,L,F,O,G,_e,X;t=new Tn({});let M=n[0].secondaryFocusStore!==se.credentials.main&&lt(n);const ie=[Dn,kn],Q=[];function K(j,Y){return j[0].primaryFocusStore===Ae.settings?0:j[0].primaryFocusStore===Ae.credentials?1:-1}return~(F=K(n))&&(O=Q[F]=ie[F](n)),{c(){e=g("div"),le(t.$$.fragment),s=I(),o=g("nav"),a=g("div"),i=g("button"),d=be("Log out"),l=I(),b=g("div"),M&&M.c(),c=I(),m=g("div"),f=g("button"),S=be("New Credentials"),w=I(),_=g("div"),B=g("h1"),B.textContent=C,E=I(),q=g("button"),V=be("Account"),T=I(),D=g("button"),U=be("Preferences"),ne=I(),$=g("button"),H=be("FAQ"),R=I(),L=g("main"),O&&O.c(),this.h()},l(j){e=v(j,"DIV",{class:!0});var Y=N(e);ue(t.$$.fragment,Y),s=P(Y),o=v(Y,"NAV",{});var oe=N(o);a=v(oe,"DIV",{class:!0});var Ie=N(a);i=v(Ie,"BUTTON",{class:!0});var je=N(i);d=he(je,"Log out"),je.forEach(y),Ie.forEach(y),l=P(oe),b=v(oe,"DIV",{class:!0});var Pe=N(b);M&&M.l(Pe),Pe.forEach(y),c=P(oe),m=v(oe,"DIV",{class:!0});var $e=N(m);f=v($e,"BUTTON",{class:!0});var Ye=N(f);S=he(Ye,"New Credentials"),Ye.forEach(y),$e.forEach(y),w=P(oe),_=v(oe,"DIV",{class:!0});var Te=N(_);B=v(Te,"H1",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-d985ew"&&(B.textContent=C),E=P(Te),q=v(Te,"BUTTON",{class:!0});var Je=N(q);V=he(Je,"Account"),Je.forEach(y),T=P(Te),D=v(Te,"BUTTON",{class:!0});var Ke=N(D);U=he(Ke,"Preferences"),Ke.forEach(y),ne=P(Te),$=v(Te,"BUTTON",{class:!0});var We=N($);H=he(We,"FAQ"),We.forEach(y),Te.forEach(y),oe.forEach(y),R=P(Y),L=v(Y,"MAIN",{});var Ze=N(L);O&&O.l(Ze),Ze.forEach(y),Y.forEach(y),this.h()},h(){h(i,"class","log-out"),i.disabled=r=n[1]||n[2],h(a,"class","profile container"),h(b,"class","credentials-main button container"),h(f,"class","credentials-creator button svelte-qi1hey"),f.disabled=p=n[0].disableButtonStateStore,ke(f,"selected",n[3].creator),h(m,"class","credentials-creator button container"),h(B,"class","settings header"),h(q,"class","settings-account button svelte-qi1hey"),q.disabled=k=n[0].disableButtonStateStore,ke(q,"selected",n[3].account),h(D,"class","settings-preferences button svelte-qi1hey"),D.disabled=A=n[0].disableButtonStateStore,ke(D,"selected",n[3].preferences),h($,"class","settings-faq button svelte-qi1hey"),$.disabled=ee=n[0].disableButtonStateStore,ke($,"selected",n[3].faq),h(_,"class","settings-button container"),h(e,"class","page home")},m(j,Y){te(j,e,Y),ce(t,e,null),u(e,s),u(e,o),u(o,a),u(a,i),u(i,d),u(o,l),u(o,b),M&&M.m(b,null),u(o,c),u(o,m),u(m,f),u(f,S),u(o,w),u(o,_),u(_,B),u(_,E),u(_,q),u(q,V),u(_,T),u(_,D),u(D,U),u(_,ne),u(_,$),u($,H),u(e,R),u(e,L),~F&&Q[F].m(L,null),G=!0,_e||(X=[J(i,"click",n[4]),J(f,"click",n[5].credentials.creator),J(q,"click",n[5].settings.account),J(D,"click",n[5].settings.preferences),J($,"click",n[5].settings.faq)],_e=!0)},p(j,[Y]){(!G||Y&6&&r!==(r=j[1]||j[2]))&&(i.disabled=r),j[0].secondaryFocusStore!==se.credentials.main?M?M.p(j,Y):(M=lt(j),M.c(),M.m(b,null)):M&&(M.d(1),M=null),(!G||Y&1&&p!==(p=j[0].disableButtonStateStore))&&(f.disabled=p),(!G||Y&8)&&ke(f,"selected",j[3].creator),(!G||Y&1&&k!==(k=j[0].disableButtonStateStore))&&(q.disabled=k),(!G||Y&8)&&ke(q,"selected",j[3].account),(!G||Y&1&&A!==(A=j[0].disableButtonStateStore))&&(D.disabled=A),(!G||Y&8)&&ke(D,"selected",j[3].preferences),(!G||Y&1&&ee!==(ee=j[0].disableButtonStateStore))&&($.disabled=ee),(!G||Y&8)&&ke($,"selected",j[3].faq);let oe=F;F=K(j),F!==oe&&(O&&(Re(),Z(Q[oe],1,1,()=>{Q[oe]=null}),Ge()),~F?(O=Q[F],O||(O=Q[F]=ie[F](j),O.c()),x(O,1),O.m(L,null)):O=null)},i(j){G||(x(t.$$.fragment,j),x(O),G=!0)},o(j){Z(t.$$.fragment,j),Z(O),G=!1},d(j){j&&y(e),de(t),M&&M.d(),~F&&Q[F].d(),_e=!1,Le(X)}}}function Un(n,e,t){let s;const o={primaryFocusStore:Ve,secondaryFocusStore:we,errorMessageStore:re,disableButtonStateStore:He};let a={};for(const[c,m]of Object.entries(o)){const f=m.subscribe(S=>{const p={...a};p[c]=S,t(0,a=p)});Se(f)}let i=!1,d=!1;async function r(){t(1,i=!0);const c=await mt.post.logout();!c.success&&!("auth"in c)?(re.set(c.error),l()):(qe.true(),Be.authedFalse()),t(1,i=!1)}function l(c=2e3){t(2,d=!0),setTimeout(()=>{t(2,d=!1)},c)}const b={credentials:{main:()=>{Ve.credentials(),we.credentials.main()},creator:()=>{Ve.credentials(),we.credentials.creator()}},settings:{account:()=>{Me.true(),Ve.settings(),we.settings.account()},preferences:()=>{Me.true(),Ve.settings(),we.settings.preferences()},faq:()=>{Me.true(),Ve.settings(),we.settings.faq()}}};return n.$$.update=()=>{n.$$.dirty&1&&t(3,s={creator:a.secondaryFocusStore===se.credentials.creator,account:a.secondaryFocusStore===se.settings.account,preferences:a.secondaryFocusStore===se.settings.preferences,faq:a.secondaryFocusStore===se.settings.faq}),n.$$.dirty&1&&a.secondaryFocusStore!==se.credentials.updater&&ze.clear()},[a,i,d,s,r,b]}class In extends me{constructor(e){super(),pe(this,e,Un,Bn,fe,{})}}const ut={settings:async()=>{const n=await Qe.get.data();if(!n.success){if("auth"in n&&!n.auth){qe.true(),Be.authedFalse();return}re.set(n.error);return}vn.set(n.settings)},credSet:async()=>{const n=await De.get.idAndNameSet();if(!n){if("auth"in n&&!n.auth){qe.true(),Be.authedFalse();return}re.set(n.error);return}const e={};for(const t of n.idAndNameSet)e[t.credential_id]=t.credential_name;Oe.set(e)}};function Pn(n){let e,t;return e=new _t({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Vn(n){let e,t;return e=new In({}),{c(){le(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){ce(e,s,o),t=!0},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Nn(n){let e,t,s,o;const a=[Vn,Pn],i=[];function d(r,l){return!r[0].pendingAuthCheckStore&&r[0].authStateStore&&!r[1]?0:1}return e=d(n),t=i[e]=a[e](n),{c(){t.c(),s=Fe()},l(r){t.l(r),s=Fe()},m(r,l){i[e].m(r,l),te(r,s,l),o=!0},p(r,[l]){let b=e;e=d(r),e!==b&&(Re(),Z(i[b],1,1,()=>{i[b]=null}),Ge(),t=i[e],t||(t=i[e]=a[e](r),t.c()),x(t,1),t.m(s.parentNode,s))},i(r){o||(x(t),o=!0)},o(r){Z(t),o=!1},d(r){r&&y(s),i[e].d(r)}}}function qn(n,e,t){const s={pendingAuthCheckStore:ht,authStateStore:Be,redirectToHomeStore:xe};let o={};for(const[d,r]of Object.entries(s)){const l=r.subscribe(b=>{const c={...o};c[d]=b,t(0,o=c)});Se(l)}!o.pendingAuthCheckStore&&!o.redirectToHomeStore&&pt(),xe.false();let a=!1;async function i(){t(1,a=!0),await ut.settings(),await ut.credSet(),t(1,a=!1)}return n.$$.update=()=>{n.$$.dirty&1&&!o.pendingAuthCheckStore&&!o.authStateStore&&bt("/log-in"),n.$$.dirty&1&&!o.pendingAuthCheckStore&&o.authStateStore&&i()},[o,a]}class Hn extends me{constructor(e){super(),pe(this,e,qn,Nn,fe,{})}}export{Hn as component};
