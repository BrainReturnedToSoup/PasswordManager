import{s as le,n as $,r as Ee,b as _e,f as Te,e as qe,t as Re}from"../chunks/scheduler.ycOvhNHW.js";import{S as ce,i as ue,g as b,h as v,x as z,k as d,a as Z,f as S,j as D,p as Pe,t as M,b as Fe,d as R,r as re,u as oe,v as ie,w as ae,s as q,m as ee,c as P,n as te,y as l,z as se,A as j,o as Se,B as ke,C as me,e as ze}from"../chunks/index.5tyFQWbo.js";import{b as we,r as Ce,a as ve,c as et,g as tt,p as nt,d as st,L as rt}from"../chunks/authState.mnAURLlg.js";import{w as We}from"../chunks/singletons.gDiUmHDR.js";function ot(s){let e,t='<div class="credentials-search"></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1rvj1ra"&&(e.innerHTML=t),this.h()},h(){d(e,"class","credentials-main")},m(n,o){Z(n,e,o)},p:$,i:$,o:$,d(n){n&&S(e)}}}function it(s,e,t){let{pendingLogout:n}=e;return s.$$set=o=>{"pendingLogout"in o&&t(0,n=o.pendingLogout)},[n]}class at extends ce{constructor(e){super(),ue(this,e,it,ot,le,{pendingLogout:0})}}function lt(s){let e,t='<form action="/new-credentials" method="POST"></form>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-14exx1w"&&(e.innerHTML=t),this.h()},h(){d(e,"class","credentials-creator")},m(n,o){Z(n,e,o)},p:$,i:$,o:$,d(n){n&&S(e)}}}function ct(s,e,t){let{pendingLogout:n}=e;return s.$$set=o=>{"pendingLogout"in o&&t(0,n=o.pendingLogout)},[n]}class ut extends ce{constructor(e){super(),ue(this,e,ct,lt,le,{pendingLogout:0})}}const x=Object.freeze({credentials:"credentials",settings:"settings"}),H=Object.freeze({credentials:Object.freeze({main:"main",creator:"creator"}),settings:Object.freeze({account:"account",preferences:"preferences",faq:"faq"})});function ft(s){let e,t;return e=new ut({props:{pendingLogout:s[1]}}),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ie(e,n,o),t=!0},p(n,o){const i={};o&2&&(i.pendingLogout=n[1]),e.$set(i)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function dt(s){let e,t;return e=new at({props:{pendingLogout:s[1]}}),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ie(e,n,o),t=!0},p(n,o){const i={};o&2&&(i.pendingLogout=n[1]),e.$set(i)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function gt(s){let e,t,n,o;const i=[dt,ft],a=[];function g(r,c){return r[0]===H.credentials.main?0:r[0]===H.credentials.creator?1:-1}return~(t=g(s))&&(n=a[t]=i[t](s)),{c(){e=b("div"),n&&n.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var c=D(e);n&&n.l(c),c.forEach(S),this.h()},h(){d(e,"class","credentials container")},m(r,c){Z(r,e,c),~t&&a[t].m(e,null),o=!0},p(r,[c]){let p=t;t=g(r),t===p?~t&&a[t].p(r,c):(n&&(Pe(),M(a[p],1,1,()=>{a[p]=null}),Fe()),~t?(n=a[t],n?n.p(r,c):(n=a[t]=i[t](r),n.c()),R(n,1),n.m(e,null)):n=null)},i(r){o||(R(n),o=!0)},o(r){M(n),o=!1},d(r){r&&S(e),~t&&a[t].d()}}}function pt(s,e,t){let{secondaryFocus:n}=e,{pendingLogout:o}=e;return s.$$set=i=>{"secondaryFocus"in i&&t(0,n=i.secondaryFocus),"pendingLogout"in i&&t(1,o=i.pendingLogout)},[n,o]}class ht extends ce{constructor(e){super(),ue(this,e,pt,gt,le,{secondaryFocus:0,pendingLogout:1})}}async function Xe(s,e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return await(await fetch(s,t)).json()}async function mt(s,e){let t,n;try{t=await Xe("/home/settings/delete-account",{email:s,password:e})}catch(o){n=o}if(n)return console.error("handleDeleteAccount catch block: ",n,n.stack),n;if(!t.success)return"auth"in t&&!t.auth?(setTimeout(()=>{we.clearEmail(),Ce.true(),ve.authedFalse()},4e3),"Session expired, please log-in and attempt again"):t.error;t.success&&(we.clearEmail(),Ce.true(),ve.authedFalse())}async function _t(s,e){let t,n;try{t=await Xe("/home/settings/new-password",{oldPassword:s,newPassword:e})}catch(o){n=o}if(n)return console.error("handleNewPassword catch block: ",n,n.stack),n;if(!t.success)return"auth"in t&&!t.auth?(setTimeout(()=>{we.clearEmail(),Ce.true(),ve.authedFalse()},4e3),"Session expired, please log-in and attempt again"):t.error;t.success&&(we.clearEmail(),Ce.true(),ve.authedFalse())}function bt(s){let e,t,n="Delete Your Account",o,i,a,g,r,c,p="Email",h,f,F,C,O="Password",k,_,m,u,w="Confirm Password",V,E,I,y,W,Q,U,fe;return{c(){e=b("div"),t=b("h3"),t.textContent=n,o=q(),i=b("p"),a=ee(s[4]),g=q(),r=b("form"),c=b("label"),c.textContent=p,h=q(),f=b("input"),F=q(),C=b("label"),C.textContent=O,k=q(),_=b("input"),m=q(),u=b("label"),u.textContent=w,V=q(),E=b("input"),I=q(),y=b("button"),W=ee("Delete Your Account"),this.h()},l(T){e=v(T,"DIV",{class:!0});var L=D(e);t=v(L,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-bjgs3s"&&(t.textContent=n),o=P(L),i=v(L,"P",{class:!0});var de=D(i);a=te(de,s[4]),de.forEach(S),g=P(L),r=v(L,"FORM",{action:!0,method:!0});var A=D(r);c=v(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(c)!=="svelte-2vstyi"&&(c.textContent=p),h=P(A),f=v(A,"INPUT",{id:!0,name:!0,type:!0}),F=P(A),C=v(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(C)!=="svelte-9e3l82"&&(C.textContent=O),k=P(A),_=v(A,"INPUT",{id:!0,name:!0,type:!0}),m=P(A),u=v(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(u)!=="svelte-14qrn4n"&&(u.textContent=w),V=P(A),E=v(A,"INPUT",{id:!0,name:!0,type:!0}),I=P(A),y=v(A,"BUTTON",{type:!0});var ne=D(y);W=te(ne,"Delete Your Account"),ne.forEach(S),A.forEach(S),L.forEach(S),this.h()},h(){d(t,"class","delete-account header"),d(i,"class","delete-account description"),d(c,"for","delete-account-email"),d(f,"id","delete-account-email"),d(f,"name","email"),d(f,"type","email"),f.disabled=s[0],d(C,"for","delete-account-password"),d(_,"id","delete-account-password"),d(_,"name","password"),d(_,"type","password"),_.disabled=s[0],d(u,"for","delete-account-confirm-password"),d(E,"id","delete-account-confirm-password"),d(E,"name","confirmPassword"),d(E,"type","password"),E.disabled=s[0],d(y,"type","submit"),y.disabled=Q=!s[5],d(r,"action","/home/settings/delete-account"),d(r,"method","POST"),d(e,"class","delete-account container")},m(T,L){Z(T,e,L),l(e,t),l(e,o),l(e,i),l(i,a),l(e,g),l(e,r),l(r,c),l(r,h),l(r,f),se(f,s[1]),l(r,F),l(r,C),l(r,k),l(r,_),se(_,s[2]),l(r,m),l(r,u),l(r,V),l(r,E),se(E,s[3]),l(r,I),l(r,y),l(y,W),U||(fe=[j(f,"input",s[9]),j(f,"input",s[10]),j(_,"input",s[11]),j(_,"input",s[12]),j(E,"input",s[13]),j(E,"input",s[14]),j(r,"submit",s[6])],U=!0)},p(T,[L]){L&16&&Se(a,T[4]),L&1&&(f.disabled=T[0]),L&2&&f.value!==T[1]&&se(f,T[1]),L&1&&(_.disabled=T[0]),L&4&&_.value!==T[2]&&se(_,T[2]),L&1&&(E.disabled=T[0]),L&8&&E.value!==T[3]&&se(E,T[3]),L&32&&Q!==(Q=!T[5])&&(y.disabled=Q)},i:$,o:$,d(T){T&&S(e),U=!1,Ee(fe)}}}const Qe="";function vt(s,e,t){let n,{pendingLogout:o}=e,i=!1,a,g,r,c=Qe;async function p(m){t(8,i=!0),m.preventDefault();let u,w;try{u=await mt(a,g)}catch(V){w=V}w&&t(4,c=w),u&&t(4,c=u),t(8,i=!1)}function h(){t(4,c=Qe)}function f(){a=this.value,t(1,a)}const F=()=>{h()};function C(){g=this.value,t(2,g)}const O=()=>{h()};function k(){r=this.value,t(3,r)}const _=()=>{h()};return s.$$set=m=>{"pendingLogout"in m&&t(0,o=m.pendingLogout)},s.$$.update=()=>{s.$$.dirty&287&&t(5,n=a&&g&&r&&!o&&!i&&!c)},[o,a,g,r,c,n,p,h,i,f,F,C,O,k,_]}class wt extends ce{constructor(e){super(),ue(this,e,vt,bt,le,{pendingLogout:0})}}function Ct(s){let e,t,n="New Password",o,i,a,g,r,c,p="Old Password",h,f,F,C,O="New Password",k,_,m,u,w="Confirm New Password",V,E,I,y,W,Q,U,fe;return{c(){e=b("div"),t=b("h3"),t.textContent=n,o=q(),i=b("p"),a=ee(s[4]),g=q(),r=b("form"),c=b("label"),c.textContent=p,h=q(),f=b("input"),F=q(),C=b("label"),C.textContent=O,k=q(),_=b("input"),m=q(),u=b("label"),u.textContent=w,V=q(),E=b("input"),I=q(),y=b("button"),W=ee("Set New Password"),this.h()},l(T){e=v(T,"DIV",{class:!0});var L=D(e);t=v(L,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1pzclo9"&&(t.textContent=n),o=P(L),i=v(L,"P",{class:!0});var de=D(i);a=te(de,s[4]),de.forEach(S),g=P(L),r=v(L,"FORM",{action:!0,method:!0});var A=D(r);c=v(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(c)!=="svelte-1dztljq"&&(c.textContent=p),h=P(A),f=v(A,"INPUT",{id:!0,name:!0,type:!0}),F=P(A),C=v(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(C)!=="svelte-gu95ju"&&(C.textContent=O),k=P(A),_=v(A,"INPUT",{id:!0,name:!0,type:!0}),m=P(A),u=v(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(u)!=="svelte-1w1roi4"&&(u.textContent=w),V=P(A),E=v(A,"INPUT",{id:!0,name:!0,type:!0}),I=P(A),y=v(A,"BUTTON",{type:!0});var ne=D(y);W=te(ne,"Set New Password"),ne.forEach(S),A.forEach(S),L.forEach(S),this.h()},h(){d(t,"class","new-password header"),d(i,"class","new-password description"),d(c,"for","new-password-old-password"),d(f,"id","new-password-old-password"),d(f,"name","oldPassword"),d(f,"type","password"),f.disabled=s[0],d(C,"for","new-password-new-password"),d(_,"id","new-password-password"),d(_,"name","newPassword"),d(_,"type","password"),_.disabled=s[0],d(u,"for","new-password-confirm-password"),d(E,"id","new-password-confirm-password"),d(E,"name","confirmPassword"),d(E,"type","password"),E.disabled=s[0],d(y,"type","submit"),y.disabled=Q=!s[5],d(r,"action","/home/settings/new-password"),d(r,"method","POST"),d(e,"class","new-password container")},m(T,L){Z(T,e,L),l(e,t),l(e,o),l(e,i),l(i,a),l(e,g),l(e,r),l(r,c),l(r,h),l(r,f),se(f,s[1]),l(r,F),l(r,C),l(r,k),l(r,_),se(_,s[2]),l(r,m),l(r,u),l(r,V),l(r,E),se(E,s[3]),l(r,I),l(r,y),l(y,W),U||(fe=[j(f,"input",s[9]),j(f,"input",s[7]),j(_,"input",s[10]),j(_,"input",s[7]),j(E,"input",s[11]),j(E,"input",s[7]),j(r,"submit",s[6])],U=!0)},p(T,[L]){L&16&&Se(a,T[4]),L&1&&(f.disabled=T[0]),L&2&&f.value!==T[1]&&se(f,T[1]),L&1&&(_.disabled=T[0]),L&4&&_.value!==T[2]&&se(_,T[2]),L&1&&(E.disabled=T[0]),L&8&&E.value!==T[3]&&se(E,T[3]),L&32&&Q!==(Q=!T[5])&&(y.disabled=Q)},i:$,o:$,d(T){T&&S(e),U=!1,Ee(fe)}}}const Ye="";function Lt(s,e,t){let n,{pendingLogout:o}=e,i=!1,a,g,r,c=Ye;async function p(O){t(8,i=!0),O.preventDefault();let k,_;try{k=await _t(a,g)}catch(m){_=m}_&&t(4,c=_),k&&t(4,c=k),t(8,i=!1)}function h(){t(4,c=Ye)}function f(){a=this.value,t(1,a)}function F(){g=this.value,t(2,g)}function C(){r=this.value,t(3,r)}return s.$$set=O=>{"pendingLogout"in O&&t(0,o=O.pendingLogout)},s.$$.update=()=>{s.$$.dirty&287&&t(5,n=a&&g&&r&&!o&&!i&&!c)},[o,a,g,r,c,n,p,h,i,f,F,C]}class St extends ce{constructor(e){super(),ue(this,e,Lt,Ct,le,{pendingLogout:0})}}function yt(s){let e,t,n="Verify Email",o,i,a,g,r="Send Verification Code",c,p,h,f="Verification Code",F,C,O,k,_;return{c(){e=b("div"),t=b("h3"),t.textContent=n,o=q(),i=b("p"),a=q(),g=b("button"),g.textContent=r,c=q(),p=b("form"),h=b("label"),h.textContent=f,F=q(),C=b("input"),O=q(),k=b("button"),_=ee("Verify"),this.h()},l(m){e=v(m,"DIV",{class:!0});var u=D(e);t=v(u,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1soy2pv"&&(t.textContent=n),o=P(u),i=v(u,"P",{class:!0}),D(i).forEach(S),a=P(u),g=v(u,"BUTTON",{"data-svelte-h":!0}),z(g)!=="svelte-1s0g8uw"&&(g.textContent=r),c=P(u),p=v(u,"FORM",{action:!0,method:!0});var w=D(p);h=v(w,"LABEL",{for:!0,"data-svelte-h":!0}),z(h)!=="svelte-1879wan"&&(h.textContent=f),F=P(w),C=v(w,"INPUT",{id:!0}),O=P(w),k=v(w,"BUTTON",{type:!0});var V=D(k);_=te(V,"Verify"),V.forEach(S),w.forEach(S),u.forEach(S),this.h()},h(){d(t,"class","verify-email header"),d(i,"class","verify-email description"),d(h,"for","verify-email-code-input"),d(C,"id","verify-email-code-input"),C.value="verificationCode",C.disabled=s[0],d(k,"type","submit"),k.disabled=s[0],d(p,"action","/home/settings/verify-email"),d(p,"method","POST"),d(e,"class","verify-email container")},m(m,u){Z(m,e,u),l(e,t),l(e,o),l(e,i),l(e,a),l(e,g),l(e,c),l(e,p),l(p,h),l(p,F),l(p,C),l(p,O),l(p,k),l(k,_)},p(m,[u]){u&1&&(C.disabled=m[0]),u&1&&(k.disabled=m[0])},i:$,o:$,d(m){m&&S(e)}}}function Tt(s,e,t){let{pendingLogout:n}=e;return s.$$set=o=>{"pendingLogout"in o&&t(0,n=o.pendingLogout)},[n]}class kt extends ce{constructor(e){super(),ue(this,e,Tt,yt,le,{pendingLogout:0})}}function Et(s){let e,t,n="Account",o,i,a,g,r,c,p;return i=new wt({props:{pendingLogout:s[1]}}),g=new St({props:{pendingLogout:s[1]}}),c=new kt({props:{pendingLogout:s[1]}}),{c(){e=b("div"),t=b("h2"),t.textContent=n,o=q(),re(i.$$.fragment),a=q(),re(g.$$.fragment),r=q(),re(c.$$.fragment),this.h()},l(h){e=v(h,"DIV",{class:!0});var f=D(e);t=v(f,"H2",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-xopwpk"&&(t.textContent=n),o=P(f),oe(i.$$.fragment,f),a=P(f),oe(g.$$.fragment,f),r=P(f),oe(c.$$.fragment,f),f.forEach(S),this.h()},h(){d(t,"class","settings-account header"),d(e,"class","settings-account container svelte-1lhfk67")},m(h,f){Z(h,e,f),l(e,t),l(e,o),ie(i,e,null),l(e,a),ie(g,e,null),l(e,r),ie(c,e,null),s[2](e),p=!0},p(h,[f]){const F={};f&2&&(F.pendingLogout=h[1]),i.$set(F);const C={};f&2&&(C.pendingLogout=h[1]),g.$set(C);const O={};f&2&&(O.pendingLogout=h[1]),c.$set(O)},i(h){p||(R(i.$$.fragment,h),R(g.$$.fragment,h),R(c.$$.fragment,h),p=!0)},o(h){M(i.$$.fragment,h),M(g.$$.fragment,h),M(c.$$.fragment,h),p=!1},d(h){h&&S(e),ae(i),ae(g),ae(c),s[2](null)}}}function qt(s,e,t){let{accountContainer:n}=e,{pendingLogout:o}=e;function i(a){_e[a?"unshift":"push"](()=>{n=a,t(0,n)})}return s.$$set=a=>{"accountContainer"in a&&t(0,n=a.accountContainer),"pendingLogout"in a&&t(1,o=a.pendingLogout)},[n,o,i]}class Pt extends ce{constructor(e){super(),ue(this,e,qt,Et,le,{accountContainer:0,pendingLogout:1})}}function Ft(s){let e,t='<h2 class="settings-preferences header">Preferences</h2> <div class="settings-preferences general container svelte-svrx2m"></div> <div class="settings-preferences theme container svelte-svrx2m"></div> <div class="settings-preferences font container svelte-svrx2m"></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-h1uwy9"&&(e.innerHTML=t),this.h()},h(){d(e,"class","settings-preferences container svelte-svrx2m")},m(n,o){Z(n,e,o),s[2](e)},p:$,i:$,o:$,d(n){n&&S(e),s[2](null)}}}function At(s,e,t){let{preferencesContainer:n}=e,{pendingLogout:o}=e;function i(a){_e[a?"unshift":"push"](()=>{n=a,t(0,n)})}return s.$$set=a=>{"preferencesContainer"in a&&t(0,n=a.preferencesContainer),"pendingLogout"in a&&t(1,o=a.pendingLogout)},[n,o,i]}class Nt extends ce{constructor(e){super(),ue(this,e,At,Ft,le,{preferencesContainer:0,pendingLogout:1})}}function Ht(s){let e,t='<h2 class="settings-faq header">FAQ</h2> <div class="settings-faq about container svelte-iytjw8"></div> <div class="settings-faq is-it-safe container svelte-iytjw8"></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-7lj1tf"&&(e.innerHTML=t),this.h()},h(){d(e,"class","settings-faq container svelte-iytjw8")},m(n,o){Z(n,e,o),s[2](e)},p:$,i:$,o:$,d(n){n&&S(e),s[2](null)}}}function Ot(s,e,t){let{faqContainer:n}=e,{pendingLogout:o}=e;function i(a){_e[a?"unshift":"push"](()=>{n=a,t(0,n)})}return s.$$set=a=>{"faqContainer"in a&&t(0,n=a.faqContainer),"pendingLogout"in a&&t(1,o=a.pendingLogout)},[n,o,i]}class Dt extends ce{constructor(e){super(),ue(this,e,Ot,Ht,le,{faqContainer:0,pendingLogout:1})}}const Vt=()=>{const{subscribe:s,set:e}=We(H.settings.account);return{subscribe:s,account:()=>{e(H.settings.account)},preferences:()=>{e(H.settings.preferences)},faq:()=>{e(H.settings.faq)}}},It=()=>{const{subscribe:s,set:e}=We(!1);return{subscribe:s,true:()=>{e(!0)},false:()=>{e(!1)}}},Ze=Vt(),xe=It();function Bt(s){let e,t,n,o,i,a,g,r,c,p,h,f;function F(u){s[8](u)}let C={pendingLogout:s[0]};s[2]!==void 0&&(C.accountContainer=s[2]),t=new Pt({props:C}),_e.push(()=>ke(t,"accountContainer",F));function O(u){s[9](u)}let k={pendingLogout:s[0]};s[3]!==void 0&&(k.preferencesContainer=s[3]),i=new Nt({props:k}),_e.push(()=>ke(i,"preferencesContainer",O));function _(u){s[10](u)}let m={pendingLogout:s[0]};return s[4]!==void 0&&(m.faqContainer=s[4]),r=new Dt({props:m}),_e.push(()=>ke(r,"faqContainer",_)),{c(){e=b("div"),re(t.$$.fragment),o=q(),re(i.$$.fragment),g=q(),re(r.$$.fragment),this.h()},l(u){e=v(u,"DIV",{class:!0});var w=D(e);oe(t.$$.fragment,w),o=P(w),oe(i.$$.fragment,w),g=P(w),oe(r.$$.fragment,w),w.forEach(S),this.h()},h(){d(e,"class","settings container svelte-3os9or")},m(u,w){Z(u,e,w),ie(t,e,null),l(e,o),ie(i,e,null),l(e,g),ie(r,e,null),s[11](e),p=!0,h||(f=j(e,"scroll",s[5]),h=!0)},p(u,[w]){const V={};w&1&&(V.pendingLogout=u[0]),!n&&w&4&&(n=!0,V.accountContainer=u[2],Te(()=>n=!1)),t.$set(V);const E={};w&1&&(E.pendingLogout=u[0]),!a&&w&8&&(a=!0,E.preferencesContainer=u[3],Te(()=>a=!1)),i.$set(E);const I={};w&1&&(I.pendingLogout=u[0]),!c&&w&16&&(c=!0,I.faqContainer=u[4],Te(()=>c=!1)),r.$set(I)},i(u){p||(R(t.$$.fragment,u),R(i.$$.fragment,u),R(r.$$.fragment,u),p=!0)},o(u){M(t.$$.fragment,u),M(i.$$.fragment,u),M(r.$$.fragment,u),p=!1},d(u){u&&S(e),ae(t),ae(i),ae(r),s[11](null),h=!1,f()}}}function jt(s,e,t){let{setFocus:n}=e,{pendingLogout:o}=e;const i={settingsSecondaryFocusStore:Ze,settingsHasScrolledStore:xe},a={};let g={};for(const[m,u]of Object.entries(i))a[m]=u.subscribe(w=>{const V={...g};V[m]=w,t(7,g=V)}),qe(a[m]);let r,c,p,h;async function f(){if(await Re(),!r||!c||!p||!h)return;const m={[H.settings.account]:c.offsetTop,[H.settings.preferences]:p.offsetTop,[H.settings.faq]:h.offsetTop};t(1,r.scrollTop=m[g.settingsSecondaryFocusStore]-m[H.settings.account],r)}async function F(){if(await Re(),!r||!c||!p||!h)return;const m={[H.settings.account]:c.offsetTop,[H.settings.preferences]:p.offsetTop,[H.settings.faq]:h.offsetTop},{scrollTop:u}=r;i.settingsHasScrolledStore.true(),u>=0&&u<m[H.settings.account]?n({primary:x.settings,secondary:H.settings.account}):u>m[H.settings.account]&&u<=m[H.settings.preferences]?n({primary:x.settings,secondary:H.settings.preferences}):n({primary:x.settings,secondary:H.settings.faq})}function C(m){c=m,t(2,c)}function O(m){p=m,t(3,p)}function k(m){h=m,t(4,h)}function _(m){_e[m?"unshift":"push"](()=>{r=m,t(1,r)})}return s.$$set=m=>{"setFocus"in m&&t(6,n=m.setFocus),"pendingLogout"in m&&t(0,o=m.pendingLogout)},s.$$.update=()=>{s.$$.dirty&128&&(g.settingsHasScrolledStore||f())},[o,r,c,p,h,F,n,g,C,O,k,_]}class Ut extends ce{constructor(e){super(),ue(this,e,jt,Bt,le,{setFocus:6,pendingLogout:0})}}function Je(s){let e,t;return{c(){e=b("p"),t=ee(s[3]),this.h()},l(n){e=v(n,"P",{class:!0});var o=D(e);t=te(o,s[3]),o.forEach(S),this.h()},h(){d(e,"class","error-message")},m(n,o){Z(n,e,o),l(e,t)},p(n,o){o&8&&Se(t,n[3])},d(n){n&&S(e)}}}function Ge(s){let e,t,n,o;return{c(){e=b("button"),t=ee("Back to main"),this.h()},l(i){e=v(i,"BUTTON",{class:!0});var a=D(e);t=te(a,"Back to main"),a.forEach(S),this.h()},h(){d(e,"class","credentials-main button"),e.disabled=s[4]},m(i,a){Z(i,e,a),l(e,t),n||(o=j(e,"click",s[13]),n=!0)},p(i,a){a&16&&(e.disabled=i[4])},d(i){i&&S(e),n=!1,o()}}}function $t(s){let e,t;return e=new Ut({props:{pendingLogout:s[4],setFocus:s[11]}}),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ie(e,n,o),t=!0},p(n,o){const i={};o&16&&(i.pendingLogout=n[4]),e.$set(i)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Mt(s){let e,t;return e=new ht({props:{pendingLogout:s[4]}}),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ie(e,n,o),t=!0},p(n,o){const i={};o&16&&(i.pendingLogout=n[4]),e.$set(i)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Rt(s){let e,t,n,o,i,a,g=s[0].currAuthEmailCensoredStore+"",r,c,p,h,f,F,C,O,k,_,m,u,w,V,E="Settings",I,y,W,Q,U,fe,T,L,de,A,ne,Y,J,X,ye,Ae,G=s[3]&&Je(s),K=s[2]!==H.credentials.main&&Ge(s);const Ne=[Mt,$t],ge=[];function He(N,B){return N[1]===x.credentials?0:N[1]===x.settings?1:-1}return~(Y=He(s))&&(J=ge[Y]=Ne[Y](s)),{c(){e=b("div"),t=b("div"),G&&G.c(),n=q(),o=b("nav"),i=b("div"),a=b("h1"),r=ee(g),c=q(),p=b("button"),h=ee("Log out"),F=q(),C=b("div"),K&&K.c(),O=q(),k=b("div"),_=b("button"),m=ee("New Credentials+"),u=q(),w=b("div"),V=b("h1"),V.textContent=E,I=q(),y=b("button"),W=ee("Account"),Q=q(),U=b("button"),fe=ee("Preferences"),T=q(),L=b("button"),de=ee("FAQ"),A=q(),ne=b("main"),J&&J.c(),this.h()},l(N){e=v(N,"DIV",{class:!0});var B=D(e);t=v(B,"DIV",{class:!0});var be=D(t);G&&G.l(be),be.forEach(S),n=P(B),o=v(B,"NAV",{});var pe=D(o);i=v(pe,"DIV",{class:!0});var Le=D(i);a=v(Le,"H1",{class:!0});var Oe=D(a);r=te(Oe,g),Oe.forEach(S),c=P(Le),p=v(Le,"BUTTON",{class:!0});var De=D(p);h=te(De,"Log out"),De.forEach(S),Le.forEach(S),F=P(pe),C=v(pe,"DIV",{class:!0});var Ve=D(C);K&&K.l(Ve),Ve.forEach(S),O=P(pe),k=v(pe,"DIV",{class:!0});var Ie=D(k);_=v(Ie,"BUTTON",{class:!0});var Be=D(_);m=te(Be,"New Credentials+"),Be.forEach(S),Ie.forEach(S),u=P(pe),w=v(pe,"DIV",{class:!0});var he=D(w);V=v(he,"H1",{class:!0,"data-svelte-h":!0}),z(V)!=="svelte-d985ew"&&(V.textContent=E),I=P(he),y=v(he,"BUTTON",{class:!0});var je=D(y);W=te(je,"Account"),je.forEach(S),Q=P(he),U=v(he,"BUTTON",{class:!0});var Ue=D(U);fe=te(Ue,"Preferences"),Ue.forEach(S),T=P(he),L=v(he,"BUTTON",{class:!0});var $e=D(L);de=te($e,"FAQ"),$e.forEach(S),he.forEach(S),pe.forEach(S),A=P(B),ne=v(B,"MAIN",{});var Me=D(ne);J&&J.l(Me),Me.forEach(S),B.forEach(S),this.h()},h(){d(t,"class","error-message container"),d(a,"class","censored-email"),d(p,"class","log-out"),p.disabled=f=s[4]||s[5],d(i,"class","profile container"),d(C,"class","credentials-main button container"),d(_,"class","credentials-creator button svelte-qi1hey"),_.disabled=s[4],me(_,"selected",s[9]),d(k,"class","credentials-creator button container"),d(V,"class","settings header"),d(y,"class","settings-account button svelte-qi1hey"),y.disabled=s[4],me(y,"selected",s[8]),d(U,"class","settings-preferences button svelte-qi1hey"),U.disabled=s[4],me(U,"selected",s[7]),d(L,"class","settings-faq button svelte-qi1hey"),L.disabled=s[4],me(L,"selected",s[6]),d(w,"class","settings-button container"),d(e,"class","page home")},m(N,B){Z(N,e,B),l(e,t),G&&G.m(t,null),l(e,n),l(e,o),l(o,i),l(i,a),l(a,r),l(i,c),l(i,p),l(p,h),l(o,F),l(o,C),K&&K.m(C,null),l(o,O),l(o,k),l(k,_),l(_,m),l(o,u),l(o,w),l(w,V),l(w,I),l(w,y),l(y,W),l(w,Q),l(w,U),l(U,fe),l(w,T),l(w,L),l(L,de),l(e,A),l(e,ne),~Y&&ge[Y].m(ne,null),X=!0,ye||(Ae=[j(p,"click",s[12]),j(_,"click",s[14]),j(y,"click",s[15]),j(U,"click",s[16]),j(L,"click",s[17])],ye=!0)},p(N,[B]){N[3]?G?G.p(N,B):(G=Je(N),G.c(),G.m(t,null)):G&&(G.d(1),G=null),(!X||B&1)&&g!==(g=N[0].currAuthEmailCensoredStore+"")&&Se(r,g),(!X||B&48&&f!==(f=N[4]||N[5]))&&(p.disabled=f),N[2]!==H.credentials.main?K?K.p(N,B):(K=Ge(N),K.c(),K.m(C,null)):K&&(K.d(1),K=null),(!X||B&16)&&(_.disabled=N[4]),(!X||B&512)&&me(_,"selected",N[9]),(!X||B&16)&&(y.disabled=N[4]),(!X||B&256)&&me(y,"selected",N[8]),(!X||B&16)&&(U.disabled=N[4]),(!X||B&128)&&me(U,"selected",N[7]),(!X||B&16)&&(L.disabled=N[4]),(!X||B&64)&&me(L,"selected",N[6]);let be=Y;Y=He(N),Y===be?~Y&&ge[Y].p(N,B):(J&&(Pe(),M(ge[be],1,1,()=>{ge[be]=null}),Fe()),~Y?(J=ge[Y],J?J.p(N,B):(J=ge[Y]=Ne[Y](N),J.c()),R(J,1),J.m(ne,null)):J=null)},i(N){X||(R(J),X=!0)},o(N){M(J),X=!1},d(N){N&&S(e),G&&G.d(),K&&K.d(),~Y&&ge[Y].d(),ye=!1,Ee(Ae)}}}const Ke="",zt=2e3;function Qt(s,e,t){let n,o,i,a,g=Ke;const r={currAuthEmailCensoredStore:we,settingsSecondaryFocusStore:Ze,settingsHasScrolledStore:xe},c={};let p={};for(const[I,y]of Object.entries(r))c[I]=y.subscribe(W=>{const Q={...p};Q[I]=W,t(0,p=Q)}),qe(c[I]);let h=x.credentials,f=H.credentials.main;function F({primary:I,secondary:y}){if(I in x&&y in H[I])t(1,h=I),t(2,f=y);else throw new Error("Invalid setFocus args",`Primary: ${I} Secondary: ${y}`)}let C=!1,O=!1;function k(){t(5,O=!0),setTimeout(()=>{t(5,O=!1)},zt)}async function _(){t(4,C=!0);let I,y;try{I=await(await fetch("/home/log-out",{method:"POST"})).json()}catch(W){y=W}if(y){console.error("handleLogout: ",y,y.stack),t(3,g=`Fatal ${y}`),k();return}I.success?(t(3,g=Ke),ve.authedFalse(),Ce.true()):(t(3,g=I.error?I.error:"Server Error"),k()),t(4,C=!1)}const m=()=>{r.settingsHasScrolledStore.false(),F({primary:x.credentials,secondary:H.credentials.main})},u=()=>{r.settingsHasScrolledStore.false(),F({primary:x.credentials,secondary:H.credentials.creator})},w=()=>{r.settingsHasScrolledStore.false(),F({primary:x.settings,secondary:H.settings.account})},V=()=>{r.settingsHasScrolledStore.false(),F({primary:x.settings,secondary:H.settings.preferences})},E=()=>{r.settingsHasScrolledStore.false(),F({primary:x.settings,secondary:H.settings.faq})};return s.$$.update=()=>{s.$$.dirty&7&&h===x.settings&&!p.settingsHasScrolledStore&&r.settingsSecondaryFocusStore[f](),s.$$.dirty&4&&t(9,n=f===H.credentials.creator),s.$$.dirty&4&&t(8,o=f===H.settings.account),s.$$.dirty&4&&t(7,i=f===H.settings.preferences),s.$$.dirty&4&&t(6,a=f===H.settings.faq)},[p,h,f,g,C,O,a,i,o,n,r,F,_,m,u,w,V,E]}class Yt extends ce{constructor(e){super(),ue(this,e,Qt,Rt,le,{})}}function Jt(s){let e,t;return e=new rt({}),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ie(e,n,o),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Gt(s){let e,t;return e=new Yt({}),{c(){re(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,o){ie(e,n,o),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Kt(s){let e,t,n,o;const i=[Gt,Jt],a=[];function g(r,c){return!r[0].pendingAuthCheckStore&&r[0].authStateStore?0:1}return e=g(s),t=a[e]=i[e](s),{c(){t.c(),n=ze()},l(r){t.l(r),n=ze()},m(r,c){a[e].m(r,c),Z(r,n,c),o=!0},p(r,[c]){let p=e;e=g(r),e!==p&&(Pe(),M(a[p],1,1,()=>{a[p]=null}),Fe(),t=a[e],t||(t=a[e]=i[e](r),t.c()),R(t,1),t.m(n.parentNode,n))},i(r){o||(R(t),o=!0)},o(r){M(t),o=!1},d(r){r&&S(n),a[e].d(r)}}}function Wt(s,e,t){const n={pendingAuthCheckStore:nt,authStateStore:ve,redirectToHomeStore:st},o={};let i={};for(const[a,g]of Object.entries(n))o[a]=g.subscribe(r=>{const c={...i};c[a]=r,t(0,i=c)}),qe(o[a]);return!i.pendingAuthCheckStore&&!i.redirectToHomeStore&&et(),n.redirectToHomeStore.false(),s.$$.update=()=>{s.$$.dirty&1&&!i.pendingAuthCheckStore&&!i.authStateStore&&tt("/log-in")},[i]}class tn extends ce{constructor(e){super(),ue(this,e,Wt,Kt,le,{})}}export{tn as component};
