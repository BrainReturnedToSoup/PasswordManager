import{s as me,n as ee,r as Fe,b as Te,f as Ae,e as Ve,t as Ge}from"../chunks/scheduler.ycOvhNHW.js";import{S as he,i as _e,g,h as m,x as X,k as u,a as le,f as L,j as N,p as He,t as te,b as Oe,d as ne,r as fe,u as de,v as pe,w as ge,s as y,m as re,c as T,n as oe,y as a,z as ae,A as G,o as Ee,B as Ie,C as Le,e as Ke}from"../chunks/index.5tyFQWbo.js";import{b as Ne,r as De,a as ke,c as nt,g as st,p as rt,d as ot,L as at}from"../chunks/authState.HoVKMGlL.js";import{v as it,a as lt,b as ut}from"../chunks/constraintValidation.du7N9Ism.js";import{w as xe}from"../chunks/singletons.jwAqg-mR.js";function ct(s){let e,t='<div class="credentials-search"></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(n){e=m(n,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1rvj1ra"&&(e.innerHTML=t),this.h()},h(){u(e,"class","credentials-main")},m(n,o){le(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&L(e)}}}function ft(s,e,t){let{pendingLogout:n}=e;return s.$$set=o=>{"pendingLogout"in o&&t(0,n=o.pendingLogout)},[n]}class dt extends he{constructor(e){super(),_e(this,e,ft,ct,me,{pendingLogout:0})}}function pt(s){let e,t='<form action="/new-credentials" method="POST"></form>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(n){e=m(n,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-14exx1w"&&(e.innerHTML=t),this.h()},h(){u(e,"class","credentials-creator")},m(n,o){le(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&L(e)}}}function gt(s,e,t){let{pendingLogout:n}=e;return s.$$set=o=>{"pendingLogout"in o&&t(0,n=o.pendingLogout)},[n]}class mt extends he{constructor(e){super(),_e(this,e,gt,pt,me,{pendingLogout:0})}}const ce=Object.freeze({credentials:"credentials",settings:"settings"}),R=Object.freeze({credentials:Object.freeze({main:"main",creator:"creator"}),settings:Object.freeze({account:"account",preferences:"preferences",faq:"faq"})});function ht(s){let e,t;return e=new mt({props:{pendingLogout:s[1]}}),{c(){fe(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){pe(e,n,o),t=!0},p(n,o){const i={};o&2&&(i.pendingLogout=n[1]),e.$set(i)},i(n){t||(ne(e.$$.fragment,n),t=!0)},o(n){te(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function _t(s){let e,t;return e=new dt({props:{pendingLogout:s[1]}}),{c(){fe(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){pe(e,n,o),t=!0},p(n,o){const i={};o&2&&(i.pendingLogout=n[1]),e.$set(i)},i(n){t||(ne(e.$$.fragment,n),t=!0)},o(n){te(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function bt(s){let e,t,n,o;const i=[_t,ht],l=[];function p(r,c){return r[0]===R.credentials.main?0:r[0]===R.credentials.creator?1:-1}return~(t=p(s))&&(n=l[t]=i[t](s)),{c(){e=g("div"),n&&n.c(),this.h()},l(r){e=m(r,"DIV",{class:!0});var c=N(e);n&&n.l(c),c.forEach(L),this.h()},h(){u(e,"class","credentials container")},m(r,c){le(r,e,c),~t&&l[t].m(e,null),o=!0},p(r,[c]){let d=t;t=p(r),t===d?~t&&l[t].p(r,c):(n&&(He(),te(l[d],1,1,()=>{l[d]=null}),Oe()),~t?(n=l[t],n?n.p(r,c):(n=l[t]=i[t](r),n.c()),ne(n,1),n.m(e,null)):n=null)},i(r){o||(ne(n),o=!0)},o(r){te(n),o=!1},d(r){r&&L(e),~t&&l[t].d()}}}function vt(s,e,t){let{secondaryFocus:n}=e,{pendingLogout:o}=e;return s.$$set=i=>{"secondaryFocus"in i&&t(0,n=i.secondaryFocus),"pendingLogout"in i&&t(1,o=i.pendingLogout)},[n,o]}class wt extends he{constructor(e){super(),_e(this,e,vt,bt,me,{secondaryFocus:0,pendingLogout:1})}}function Be(){return setTimeout(()=>{Ne.clearEmail(),De.true(),ke.authedFalse()},4e3),"Session expired, please log-in and try again"}async function Ue(s,e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return await(await fetch(s,t)).json()}async function Ct(s,e){let t,n;try{t=await Ue("/home/settings/delete-account",{email:s,password:e})}catch(o){console.error(`handleDeleteAccount catch block: ${o} ${o.stack}`),n=o}if(n)return n;if(!t.success)return"auth"in t&&!t.auth?Be():t.error;Ne.clearEmail(),De.true(),ke.authedFalse()}async function Lt(s,e){let t,n;try{t=await Ue("/home/settings/new-password",{oldPassword:s,newPassword:e})}catch(o){console.error(`handleNewPassword catch block: ${o} ${o.stack}`),n=o}if(n)return n;if(!t.success)return"auth"in t&&!t.auth?Be():t.error;Ne.clearEmail(),De.true(),ke.authedFalse()}async function Et(s,e,t){let n,o;try{n=await Ue("/home/settings/new-email",{email:s,password:e,newEmail:t})}catch(i){console.error(`handleNewEmail catch block: ${i} ${i.stack}`),o=i}if(o)return o;if(!n.success)return"auth"in n&&!n.auth?Be():n.error;Ne.clearEmail(),De.true(),ke.authedFalse()}function St(s){let e,t,n="Delete Your Account",o,i,l="Desc Here",p,r,c,d,w,E,b="Email",C,k,v,P,h="Password",f,_,q,D,B="Confirm Password",F,A,se,H,x,ie,Q,K;return{c(){e=g("div"),t=g("h3"),t.textContent=n,o=y(),i=g("p"),i.textContent=l,p=y(),r=g("form"),c=g("p"),d=re(s[4]),w=y(),E=g("label"),E.textContent=b,C=y(),k=g("input"),v=y(),P=g("label"),P.textContent=h,f=y(),_=g("input"),q=y(),D=g("label"),D.textContent=B,F=y(),A=g("input"),se=y(),H=g("button"),x=re("Delete"),this.h()},l(J){e=m(J,"DIV",{class:!0});var V=N(e);t=m(V,"H3",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-bjgs3s"&&(t.textContent=n),o=T(V),i=m(V,"P",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-1tvstg1"&&(i.textContent=l),p=T(V),r=m(V,"FORM",{action:!0,method:!0});var S=N(r);c=m(S,"P",{class:!0});var Y=N(c);d=oe(Y,s[4]),Y.forEach(L),w=T(S),E=m(S,"LABEL",{for:!0,"data-svelte-h":!0}),X(E)!=="svelte-2vstyi"&&(E.textContent=b),C=T(S),k=m(S,"INPUT",{id:!0,name:!0,type:!0}),v=T(S),P=m(S,"LABEL",{for:!0,"data-svelte-h":!0}),X(P)!=="svelte-9e3l82"&&(P.textContent=h),f=T(S),_=m(S,"INPUT",{id:!0,name:!0,type:!0}),q=T(S),D=m(S,"LABEL",{for:!0,"data-svelte-h":!0}),X(D)!=="svelte-14qrn4n"&&(D.textContent=B),F=T(S),A=m(S,"INPUT",{id:!0,name:!0,type:!0}),se=T(S),H=m(S,"BUTTON",{type:!0});var z=N(H);x=oe(z,"Delete"),z.forEach(L),S.forEach(L),V.forEach(L),this.h()},h(){u(t,"class","delete-account header"),u(i,"class","delete-account description"),u(c,"class","delete-account server error-message"),u(E,"for","delete-account-email"),u(k,"id","delete-account-email"),u(k,"name","email"),u(k,"type","email"),k.disabled=s[0],u(P,"for","delete-account-password"),u(_,"id","delete-account-password"),u(_,"name","password"),u(_,"type","password"),_.disabled=s[0],u(D,"for","delete-account-confirm-password"),u(A,"id","delete-account-confirm-password"),u(A,"name","confirmPassword"),u(A,"type","password"),A.disabled=s[0],u(H,"type","submit"),H.disabled=ie=!s[5],u(r,"action","/home/settings/delete-account"),u(r,"method","POST"),u(e,"class","delete-account container")},m(J,V){le(J,e,V),a(e,t),a(e,o),a(e,i),a(e,p),a(e,r),a(r,c),a(c,d),a(r,w),a(r,E),a(r,C),a(r,k),ae(k,s[1]),a(r,v),a(r,P),a(r,f),a(r,_),ae(_,s[2]),a(r,q),a(r,D),a(r,F),a(r,A),ae(A,s[3]),a(r,se),a(r,H),a(H,x),Q||(K=[G(k,"input",s[9]),G(k,"input",s[10]),G(_,"input",s[11]),G(_,"input",s[12]),G(A,"input",s[13]),G(A,"input",s[14]),G(r,"submit",s[6])],Q=!0)},p(J,[V]){V&16&&Ee(d,J[4]),V&1&&(k.disabled=J[0]),V&2&&k.value!==J[1]&&ae(k,J[1]),V&1&&(_.disabled=J[0]),V&4&&_.value!==J[2]&&ae(_,J[2]),V&1&&(A.disabled=J[0]),V&8&&A.value!==J[3]&&ae(A,J[3]),V&32&&ie!==(ie=!J[5])&&(H.disabled=ie)},i:ee,o:ee,d(J){J&&L(e),Q=!1,Fe(K)}}}const We="";function yt(s,e,t){let n,{pendingLogout:o}=e,i=!1,l,p,r,c=We;async function d(h){t(8,i=!0),h.preventDefault();let f,_;try{f=await Ct(l,p)}catch(q){_=q}_&&t(4,c=_),f&&t(4,c=f),t(8,i=!1)}function w(){t(4,c=We)}function E(){l=this.value,t(1,l)}const b=()=>{w()};function C(){p=this.value,t(2,p)}const k=()=>{w()};function v(){r=this.value,t(3,r)}const P=()=>{w()};return s.$$set=h=>{"pendingLogout"in h&&t(0,o=h.pendingLogout)},s.$$.update=()=>{s.$$.dirty&287&&t(5,n=l&&p&&r&&!o&&!i&&!c)},[o,l,p,r,c,n,d,w,i,E,b,C,k,v,P]}class Tt extends he{constructor(e){super(),_e(this,e,yt,St,me,{pendingLogout:0})}}function kt(s){let e,t,n="New Password",o,i,l="Desc Here",p,r,c,d,w,E,b,C="Old Password",k,v,P,h,f,_,q,D,B="New Password",F,A,se,H,x,ie,Q,K,J="Confirm New Password",V,S,Y,z,we,Z,O,M;return{c(){e=g("div"),t=g("h3"),t.textContent=n,o=y(),i=g("p"),i.textContent=l,p=y(),r=g("form"),c=g("p"),d=re(s[4]),w=y(),E=g("div"),b=g("label"),b.textContent=C,k=y(),v=g("input"),P=y(),h=g("p"),f=re(s[5]),_=y(),q=g("div"),D=g("label"),D.textContent=B,F=y(),A=g("input"),se=y(),H=g("p"),x=re(s[6]),ie=y(),Q=g("div"),K=g("label"),K.textContent=J,V=y(),S=g("input"),Y=y(),z=g("button"),we=re("Set"),this.h()},l(W){e=m(W,"DIV",{class:!0});var j=N(e);t=m(j,"H3",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1pzclo9"&&(t.textContent=n),o=T(j),i=m(j,"P",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-17yatlw"&&(i.textContent=l),p=T(j),r=m(j,"FORM",{});var $=N(r);c=m($,"P",{class:!0});var I=N(c);d=oe(I,s[4]),I.forEach(L),w=T($),E=m($,"DIV",{class:!0});var U=N(E);b=m(U,"LABEL",{for:!0,"data-svelte-h":!0}),X(b)!=="svelte-1dztljq"&&(b.textContent=C),k=T(U),v=m(U,"INPUT",{id:!0,name:!0,type:!0}),U.forEach(L),P=T($),h=m($,"P",{class:!0});var be=N(h);f=oe(be,s[5]),be.forEach(L),_=T($),q=m($,"DIV",{class:!0});var ue=N(q);D=m(ue,"LABEL",{for:!0,"data-svelte-h":!0}),X(D)!=="svelte-gu95ju"&&(D.textContent=B),F=T(ue),A=m(ue,"INPUT",{id:!0,name:!0,type:!0}),ue.forEach(L),se=T($),H=m($,"P",{class:!0});var Se=N(H);x=oe(Se,s[6]),Se.forEach(L),ie=T($),Q=m($,"DIV",{class:!0});var ye=N(Q);K=m(ye,"LABEL",{for:!0,"data-svelte-h":!0}),X(K)!=="svelte-1w1roi4"&&(K.textContent=J),V=T(ye),S=m(ye,"INPUT",{id:!0,name:!0,type:!0}),ye.forEach(L),Y=T($),z=m($,"BUTTON",{type:!0});var Pe=N(z);we=oe(Pe,"Set"),Pe.forEach(L),$.forEach(L),j.forEach(L),this.h()},h(){u(t,"class","new-password header"),u(i,"class","new-password description"),u(c,"class","new-password server error-message"),u(b,"for","new-password-old-password"),u(v,"id","new-password-old-password"),u(v,"name","oldPassword"),u(v,"type","password"),v.disabled=s[0],u(E,"class","new-password-old-password container"),u(h,"class","new-password-new-password error-message"),u(D,"for","new-password-new-password"),u(A,"id","new-password-new-password"),u(A,"name","newPassword"),u(A,"type","password"),A.disabled=s[0],u(q,"class","new-password-new-password container"),u(H,"class","new-password-confirm-password error-message"),u(K,"for","new-password-confirm-password"),u(S,"id","new-password-confirm-password"),u(S,"name","confirmPassword"),u(S,"type","password"),S.disabled=s[0],u(Q,"class","new-password-confirm-password container"),u(z,"type","submit"),z.disabled=Z=!s[7],u(e,"class","new-password container")},m(W,j){le(W,e,j),a(e,t),a(e,o),a(e,i),a(e,p),a(e,r),a(r,c),a(c,d),a(r,w),a(r,E),a(E,b),a(E,k),a(E,v),ae(v,s[1]),a(r,P),a(r,h),a(h,f),a(r,_),a(r,q),a(q,D),a(q,F),a(q,A),ae(A,s[2]),a(r,se),a(r,H),a(H,x),a(r,ie),a(r,Q),a(Q,K),a(Q,V),a(Q,S),ae(S,s[3]),a(r,Y),a(r,z),a(z,we),O||(M=[G(v,"input",s[13]),G(v,"input",s[9]),G(A,"input",s[14]),G(A,"input",s[15]),G(S,"input",s[16]),G(S,"input",s[17]),G(r,"submit",s[8])],O=!0)},p(W,[j]){j&16&&Ee(d,W[4]),j&1&&(v.disabled=W[0]),j&2&&v.value!==W[1]&&ae(v,W[1]),j&32&&Ee(f,W[5]),j&1&&(A.disabled=W[0]),j&4&&A.value!==W[2]&&ae(A,W[2]),j&64&&Ee(x,W[6]),j&1&&(S.disabled=W[0]),j&8&&S.value!==W[3]&&ae(S,W[3]),j&128&&Z!==(Z=!W[7])&&(z.disabled=Z)},i:ee,o:ee,d(W){W&&L(e),O=!1,Fe(M)}}}const ve="";function Pt(s,e,t){let n,{pendingLogout:o}=e,i=!1,l,p,r,c=ve,d=ve,w=ve;async function E(q){t(12,i=!0),q.preventDefault();let D,B;try{D=await Lt(l,p)}catch(F){B=F}B&&t(4,c=B),D&&t(4,c=D),t(12,i=!1)}function b(){t(4,c=ve)}function C(){t(5,d=ve)}function k(){t(6,w=ve)}function v(){l=this.value,t(1,l)}function P(){p=this.value,t(2,p)}const h=()=>{b(),C()};function f(){r=this.value,t(3,r)}const _=()=>{b(),k()};return s.$$set=q=>{"pendingLogout"in q&&t(0,o=q.pendingLogout)},s.$$.update=()=>{s.$$.dirty&4&&(p!==ve?t(5,d=it(p)):t(5,d=ve)),s.$$.dirty&12&&(r!==ve&&p!==ve?t(6,w=lt(r,p)):t(6,w=ve)),s.$$.dirty&4223&&t(7,n=l&&p&&r&&!c&&!d&&!w&&!o&&!i)},[o,l,p,r,c,d,w,n,E,b,C,k,i,v,P,h,f,_]}class qt extends he{constructor(e){super(),_e(this,e,Pt,kt,me,{pendingLogout:0})}}function Nt(s){let e,t,n="Update Account Email",o,i,l="Desc Here",p,r,c,d,w,E,b,C="Current Email",k,v,P,h,f,_="Password",q,D,B,F,A,se,H,x,ie="New Email",Q,K,J,V,S,Y,z,we;return{c(){e=g("div"),t=g("h3"),t.textContent=n,o=y(),i=g("p"),i.textContent=l,p=y(),r=g("form"),c=g("p"),d=re(s[3]),w=y(),E=g("div"),b=g("label"),b.textContent=C,k=y(),v=g("input"),P=y(),h=g("div"),f=g("label"),f.textContent=_,q=y(),D=g("input"),B=y(),F=g("p"),A=re(s[4]),se=y(),H=g("div"),x=g("label"),x.textContent=ie,Q=y(),K=g("input"),J=y(),V=g("button"),S=re("Set"),this.h()},l(Z){e=m(Z,"DIV",{class:!0});var O=N(e);t=m(O,"H3",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-tlkmds"&&(t.textContent=n),o=T(O),i=m(O,"P",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-npnfgg"&&(i.textContent=l),p=T(O),r=m(O,"FORM",{});var M=N(r);c=m(M,"P",{class:!0});var W=N(c);d=oe(W,s[3]),W.forEach(L),w=T(M),E=m(M,"DIV",{class:!0});var j=N(E);b=m(j,"LABEL",{for:!0,"data-svelte-h":!0}),X(b)!=="svelte-18m3fc4"&&(b.textContent=C),k=T(j),v=m(j,"INPUT",{id:!0,type:!0,name:!0}),j.forEach(L),P=T(M),h=m(M,"DIV",{class:!0});var $=N(h);f=m($,"LABEL",{for:!0,"data-svelte-h":!0}),X(f)!=="svelte-1zdtl7"&&(f.textContent=_),q=T($),D=m($,"INPUT",{id:!0,type:!0,name:!0}),$.forEach(L),B=T(M),F=m(M,"P",{class:!0});var I=N(F);A=oe(I,s[4]),I.forEach(L),se=T(M),H=m(M,"DIV",{class:!0});var U=N(H);x=m(U,"LABEL",{for:!0,"data-svelte-h":!0}),X(x)!=="svelte-d2nd6i"&&(x.textContent=ie),Q=T(U),K=m(U,"INPUT",{id:!0,type:!0,name:!0}),U.forEach(L),J=T(M),V=m(M,"BUTTON",{type:!0});var be=N(V);S=oe(be,"Set"),be.forEach(L),M.forEach(L),O.forEach(L),this.h()},h(){u(t,"class","update-email header"),u(i,"class","update-email description"),u(c,"class","update-email server error-message"),u(b,"for","update-email-current-email"),u(v,"id","update-email-current-email"),u(v,"type","email"),u(v,"name","email"),u(E,"class","update-email current-email container"),u(f,"for","update-email-password"),u(D,"id","update-email-password"),u(D,"type","password"),u(D,"name","password"),u(h,"class","update-email password container"),u(F,"class","update-email-new-email error-message"),u(x,"for","update-email-new-email"),u(K,"id","update-email-new-email"),u(K,"type","email"),u(K,"name","newEmail"),u(H,"class","update-email new-email container"),u(V,"type","submit"),V.disabled=Y=!s[5],u(e,"class","update-email")},m(Z,O){le(Z,e,O),a(e,t),a(e,o),a(e,i),a(e,p),a(e,r),a(r,c),a(c,d),a(r,w),a(r,E),a(E,b),a(E,k),a(E,v),ae(v,s[0]),a(r,P),a(r,h),a(h,f),a(h,q),a(h,D),ae(D,s[1]),a(r,B),a(r,F),a(F,A),a(r,se),a(r,H),a(H,x),a(H,Q),a(H,K),ae(K,s[2]),a(r,J),a(r,V),a(V,S),z||(we=[G(v,"input",s[11]),G(v,"input",s[7]),G(D,"input",s[12]),G(D,"input",s[7]),G(K,"input",s[13]),G(K,"input",s[14]),G(r,"submit",s[6])],z=!0)},p(Z,[O]){O&8&&Ee(d,Z[3]),O&1&&v.value!==Z[0]&&ae(v,Z[0]),O&2&&D.value!==Z[1]&&ae(D,Z[1]),O&16&&Ee(A,Z[4]),O&4&&K.value!==Z[2]&&ae(K,Z[2]),O&32&&Y!==(Y=!Z[5])&&(V.disabled=Y)},i:ee,o:ee,d(Z){Z&&L(e),z=!1,Fe(we)}}}const qe="";function Dt(s,e,t){let n,{pendingLogout:o}=e,i=!1,l,p,r,c=qe,d=qe;async function w(h){t(10,i=!0),h.preventDefault();let f,_;try{f=await Et(l,p,r)}catch(q){_=q}_&&t(3,c=_),f&&t(3,c=f),t(10,i=!1)}function E(){t(3,c=qe)}function b(){t(4,d=qe)}function C(){l=this.value,t(0,l)}function k(){p=this.value,t(1,p)}function v(){r=this.value,t(2,r)}const P=()=>{E(),b()};return s.$$set=h=>{"pendingLogout"in h&&t(9,o=h.pendingLogout)},s.$$.update=()=>{s.$$.dirty&4&&r!==qe&&t(4,d=ut(r)),s.$$.dirty&1567&&t(5,n=l&&p&&r&&!c&&!d&&!o&&!i)},[l,p,r,c,d,n,w,E,b,o,i,C,k,v,P]}class Ft extends he{constructor(e){super(),_e(this,e,Dt,Nt,me,{pendingLogout:9})}}function At(s){let e,t,n="Verify Email",o,i,l,p,r="Send Verification Code",c,d,w,E="Verification Code",b,C,k,v,P;return{c(){e=g("div"),t=g("h3"),t.textContent=n,o=y(),i=g("p"),l=y(),p=g("button"),p.textContent=r,c=y(),d=g("form"),w=g("label"),w.textContent=E,b=y(),C=g("input"),k=y(),v=g("button"),P=re("Verify"),this.h()},l(h){e=m(h,"DIV",{class:!0});var f=N(e);t=m(f,"H3",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1soy2pv"&&(t.textContent=n),o=T(f),i=m(f,"P",{class:!0}),N(i).forEach(L),l=T(f),p=m(f,"BUTTON",{"data-svelte-h":!0}),X(p)!=="svelte-1s0g8uw"&&(p.textContent=r),c=T(f),d=m(f,"FORM",{action:!0,method:!0});var _=N(d);w=m(_,"LABEL",{for:!0,"data-svelte-h":!0}),X(w)!=="svelte-1879wan"&&(w.textContent=E),b=T(_),C=m(_,"INPUT",{id:!0}),k=T(_),v=m(_,"BUTTON",{type:!0});var q=N(v);P=oe(q,"Verify"),q.forEach(L),_.forEach(L),f.forEach(L),this.h()},h(){u(t,"class","verify-email header"),u(i,"class","verify-email description"),u(w,"for","verify-email-code-input"),u(C,"id","verify-email-code-input"),C.value="verificationCode",C.disabled=s[0],u(v,"type","submit"),v.disabled=s[0],u(d,"action","/home/settings/verify-email"),u(d,"method","POST"),u(e,"class","verify-email container")},m(h,f){le(h,e,f),a(e,t),a(e,o),a(e,i),a(e,l),a(e,p),a(e,c),a(e,d),a(d,w),a(d,b),a(d,C),a(d,k),a(d,v),a(v,P)},p(h,[f]){f&1&&(C.disabled=h[0]),f&1&&(v.disabled=h[0])},i:ee,o:ee,d(h){h&&L(e)}}}function It(s,e,t){let{pendingLogout:n}=e;return s.$$set=o=>{"pendingLogout"in o&&t(0,n=o.pendingLogout)},[n]}class Vt extends he{constructor(e){super(),_e(this,e,It,At,me,{pendingLogout:0})}}function Ht(s){let e,t,n="Account",o,i,l,p,r,c,d,w,E;return i=new Tt({props:{pendingLogout:s[1]}}),p=new qt({props:{pendingLogout:s[1]}}),c=new Ft({props:{pendingLogout:s[1]}}),w=new Vt({props:{pendingLogout:s[1]}}),{c(){e=g("div"),t=g("h2"),t.textContent=n,o=y(),fe(i.$$.fragment),l=y(),fe(p.$$.fragment),r=y(),fe(c.$$.fragment),d=y(),fe(w.$$.fragment),this.h()},l(b){e=m(b,"DIV",{class:!0});var C=N(e);t=m(C,"H2",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-xopwpk"&&(t.textContent=n),o=T(C),de(i.$$.fragment,C),l=T(C),de(p.$$.fragment,C),r=T(C),de(c.$$.fragment,C),d=T(C),de(w.$$.fragment,C),C.forEach(L),this.h()},h(){u(t,"class","settings-account header"),u(e,"class","settings-account container svelte-15u0fo5")},m(b,C){le(b,e,C),a(e,t),a(e,o),pe(i,e,null),a(e,l),pe(p,e,null),a(e,r),pe(c,e,null),a(e,d),pe(w,e,null),s[2](e),E=!0},p(b,[C]){const k={};C&2&&(k.pendingLogout=b[1]),i.$set(k);const v={};C&2&&(v.pendingLogout=b[1]),p.$set(v);const P={};C&2&&(P.pendingLogout=b[1]),c.$set(P);const h={};C&2&&(h.pendingLogout=b[1]),w.$set(h)},i(b){E||(ne(i.$$.fragment,b),ne(p.$$.fragment,b),ne(c.$$.fragment,b),ne(w.$$.fragment,b),E=!0)},o(b){te(i.$$.fragment,b),te(p.$$.fragment,b),te(c.$$.fragment,b),te(w.$$.fragment,b),E=!1},d(b){b&&L(e),ge(i),ge(p),ge(c),ge(w),s[2](null)}}}function Ot(s,e,t){let{accountContainer:n}=e,{pendingLogout:o}=e;function i(l){Te[l?"unshift":"push"](()=>{n=l,t(0,n)})}return s.$$set=l=>{"accountContainer"in l&&t(0,n=l.accountContainer),"pendingLogout"in l&&t(1,o=l.pendingLogout)},[n,o,i]}class Bt extends he{constructor(e){super(),_e(this,e,Ot,Ht,me,{accountContainer:0,pendingLogout:1})}}function Ut(s){let e,t='<h2 class="settings-preferences header">Preferences</h2> <div class="settings-preferences general container svelte-svrx2m"></div> <div class="settings-preferences theme container svelte-svrx2m"></div> <div class="settings-preferences font container svelte-svrx2m"></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(n){e=m(n,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-h1uwy9"&&(e.innerHTML=t),this.h()},h(){u(e,"class","settings-preferences container svelte-svrx2m")},m(n,o){le(n,e,o),s[2](e)},p:ee,i:ee,o:ee,d(n){n&&L(e),s[2](null)}}}function jt(s,e,t){let{preferencesContainer:n}=e,{pendingLogout:o}=e;function i(l){Te[l?"unshift":"push"](()=>{n=l,t(0,n)})}return s.$$set=l=>{"preferencesContainer"in l&&t(0,n=l.preferencesContainer),"pendingLogout"in l&&t(1,o=l.pendingLogout)},[n,o,i]}class Mt extends he{constructor(e){super(),_e(this,e,jt,Ut,me,{preferencesContainer:0,pendingLogout:1})}}function Rt(s){let e,t='<h2 class="settings-faq header">FAQ</h2> <div class="settings-faq about container svelte-iytjw8"></div> <div class="settings-faq is-it-safe container svelte-iytjw8"></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(n){e=m(n,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-7lj1tf"&&(e.innerHTML=t),this.h()},h(){u(e,"class","settings-faq container svelte-iytjw8")},m(n,o){le(n,e,o),s[2](e)},p:ee,i:ee,o:ee,d(n){n&&L(e),s[2](null)}}}function zt(s,e,t){let{faqContainer:n}=e,{pendingLogout:o}=e;function i(l){Te[l?"unshift":"push"](()=>{n=l,t(0,n)})}return s.$$set=l=>{"faqContainer"in l&&t(0,n=l.faqContainer),"pendingLogout"in l&&t(1,o=l.pendingLogout)},[n,o,i]}class Qt extends he{constructor(e){super(),_e(this,e,zt,Rt,me,{faqContainer:0,pendingLogout:1})}}const Jt=()=>{const{subscribe:s,set:e}=xe(R.settings.account);return{subscribe:s,account:()=>{e(R.settings.account)},preferences:()=>{e(R.settings.preferences)},faq:()=>{e(R.settings.faq)}}},Yt=()=>{const{subscribe:s,set:e}=xe(!1);return{subscribe:s,true:()=>{e(!0)},false:()=>{e(!1)}}},et=Jt(),tt=Yt();function Gt(s){let e,t,n,o,i,l,p,r,c,d,w,E;function b(f){s[8](f)}let C={pendingLogout:s[0]};s[2]!==void 0&&(C.accountContainer=s[2]),t=new Bt({props:C}),Te.push(()=>Ie(t,"accountContainer",b));function k(f){s[9](f)}let v={pendingLogout:s[0]};s[3]!==void 0&&(v.preferencesContainer=s[3]),i=new Mt({props:v}),Te.push(()=>Ie(i,"preferencesContainer",k));function P(f){s[10](f)}let h={pendingLogout:s[0]};return s[4]!==void 0&&(h.faqContainer=s[4]),r=new Qt({props:h}),Te.push(()=>Ie(r,"faqContainer",P)),{c(){e=g("div"),fe(t.$$.fragment),o=y(),fe(i.$$.fragment),p=y(),fe(r.$$.fragment),this.h()},l(f){e=m(f,"DIV",{class:!0});var _=N(e);de(t.$$.fragment,_),o=T(_),de(i.$$.fragment,_),p=T(_),de(r.$$.fragment,_),_.forEach(L),this.h()},h(){u(e,"class","settings container svelte-1ruvxrw")},m(f,_){le(f,e,_),pe(t,e,null),a(e,o),pe(i,e,null),a(e,p),pe(r,e,null),s[11](e),d=!0,w||(E=G(e,"scroll",s[5]),w=!0)},p(f,[_]){const q={};_&1&&(q.pendingLogout=f[0]),!n&&_&4&&(n=!0,q.accountContainer=f[2],Ae(()=>n=!1)),t.$set(q);const D={};_&1&&(D.pendingLogout=f[0]),!l&&_&8&&(l=!0,D.preferencesContainer=f[3],Ae(()=>l=!1)),i.$set(D);const B={};_&1&&(B.pendingLogout=f[0]),!c&&_&16&&(c=!0,B.faqContainer=f[4],Ae(()=>c=!1)),r.$set(B)},i(f){d||(ne(t.$$.fragment,f),ne(i.$$.fragment,f),ne(r.$$.fragment,f),d=!0)},o(f){te(t.$$.fragment,f),te(i.$$.fragment,f),te(r.$$.fragment,f),d=!1},d(f){f&&L(e),ge(t),ge(i),ge(r),s[11](null),w=!1,E()}}}function Kt(s,e,t){let{setFocus:n}=e,{pendingLogout:o}=e;const i={settingsSecondaryFocusStore:et,settingsHasScrolledStore:tt},l={};let p={};for(const[h,f]of Object.entries(i))l[h]=f.subscribe(_=>{const q={...p};q[h]=_,t(7,p=q)}),Ve(l[h]);let r,c,d,w;async function E(){if(await Ge(),!r||!c||!d||!w)return;const h={[R.settings.account]:c.offsetTop,[R.settings.preferences]:d.offsetTop,[R.settings.faq]:w.offsetTop};t(1,r.scrollTop=h[p.settingsSecondaryFocusStore]-h[R.settings.account],r)}async function b(){if(await Ge(),!r||!c||!d||!w)return;const h={[R.settings.account]:c.offsetTop,[R.settings.preferences]:d.offsetTop,[R.settings.faq]:w.offsetTop},{scrollTop:f}=r;i.settingsHasScrolledStore.true(),f>=0&&f<h[R.settings.account]?n({primary:ce.settings,secondary:R.settings.account}):f>h[R.settings.account]&&f<=h[R.settings.preferences]?n({primary:ce.settings,secondary:R.settings.preferences}):n({primary:ce.settings,secondary:R.settings.faq})}function C(h){c=h,t(2,c)}function k(h){d=h,t(3,d)}function v(h){w=h,t(4,w)}function P(h){Te[h?"unshift":"push"](()=>{r=h,t(1,r)})}return s.$$set=h=>{"setFocus"in h&&t(6,n=h.setFocus),"pendingLogout"in h&&t(0,o=h.pendingLogout)},s.$$.update=()=>{s.$$.dirty&128&&(p.settingsHasScrolledStore||E())},[o,r,c,d,w,b,n,p,C,k,v,P]}class Wt extends he{constructor(e){super(),_e(this,e,Kt,Gt,me,{setFocus:6,pendingLogout:0})}}function Xe(s){let e,t;return{c(){e=g("p"),t=re(s[3]),this.h()},l(n){e=m(n,"P",{class:!0});var o=N(e);t=oe(o,s[3]),o.forEach(L),this.h()},h(){u(e,"class","error-message")},m(n,o){le(n,e,o),a(e,t)},p(n,o){o&8&&Ee(t,n[3])},d(n){n&&L(e)}}}function Ze(s){let e,t,n,o;return{c(){e=g("button"),t=re("Back to main"),this.h()},l(i){e=m(i,"BUTTON",{class:!0});var l=N(e);t=oe(l,"Back to main"),l.forEach(L),this.h()},h(){u(e,"class","credentials-main button"),e.disabled=s[4]},m(i,l){le(i,e,l),a(e,t),n||(o=G(e,"click",s[13]),n=!0)},p(i,l){l&16&&(e.disabled=i[4])},d(i){i&&L(e),n=!1,o()}}}function Xt(s){let e,t;return e=new Wt({props:{pendingLogout:s[4],setFocus:s[11]}}),{c(){fe(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){pe(e,n,o),t=!0},p(n,o){const i={};o&16&&(i.pendingLogout=n[4]),e.$set(i)},i(n){t||(ne(e.$$.fragment,n),t=!0)},o(n){te(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Zt(s){let e,t;return e=new wt({props:{pendingLogout:s[4]}}),{c(){fe(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){pe(e,n,o),t=!0},p(n,o){const i={};o&16&&(i.pendingLogout=n[4]),e.$set(i)},i(n){t||(ne(e.$$.fragment,n),t=!0)},o(n){te(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function $t(s){let e,t,n,o,i,l,p=s[0].currAuthEmailCensoredStore+"",r,c,d,w,E,b,C,k,v,P,h,f,_,q,D="Settings",B,F,A,se,H,x,ie,Q,K,J,V,S,Y,z,we,Z,O=s[3]&&Xe(s),M=s[2]!==R.credentials.main&&Ze(s);const W=[Zt,Xt],j=[];function $(I,U){return I[1]===ce.credentials?0:I[1]===ce.settings?1:-1}return~(S=$(s))&&(Y=j[S]=W[S](s)),{c(){e=g("div"),t=g("div"),O&&O.c(),n=y(),o=g("nav"),i=g("div"),l=g("h1"),r=re(p),c=y(),d=g("button"),w=re("Log out"),b=y(),C=g("div"),M&&M.c(),k=y(),v=g("div"),P=g("button"),h=re("New Credentials+"),f=y(),_=g("div"),q=g("h1"),q.textContent=D,B=y(),F=g("button"),A=re("Account"),se=y(),H=g("button"),x=re("Preferences"),ie=y(),Q=g("button"),K=re("FAQ"),J=y(),V=g("main"),Y&&Y.c(),this.h()},l(I){e=m(I,"DIV",{class:!0});var U=N(e);t=m(U,"DIV",{class:!0});var be=N(t);O&&O.l(be),be.forEach(L),n=T(U),o=m(U,"NAV",{});var ue=N(o);i=m(ue,"DIV",{class:!0});var Se=N(i);l=m(Se,"H1",{class:!0});var ye=N(l);r=oe(ye,p),ye.forEach(L),c=T(Se),d=m(Se,"BUTTON",{class:!0});var Pe=N(d);w=oe(Pe,"Log out"),Pe.forEach(L),Se.forEach(L),b=T(ue),C=m(ue,"DIV",{class:!0});var je=N(C);M&&M.l(je),je.forEach(L),k=T(ue),v=m(ue,"DIV",{class:!0});var Me=N(v);P=m(Me,"BUTTON",{class:!0});var Re=N(P);h=oe(Re,"New Credentials+"),Re.forEach(L),Me.forEach(L),f=T(ue),_=m(ue,"DIV",{class:!0});var Ce=N(_);q=m(Ce,"H1",{class:!0,"data-svelte-h":!0}),X(q)!=="svelte-d985ew"&&(q.textContent=D),B=T(Ce),F=m(Ce,"BUTTON",{class:!0});var ze=N(F);A=oe(ze,"Account"),ze.forEach(L),se=T(Ce),H=m(Ce,"BUTTON",{class:!0});var Qe=N(H);x=oe(Qe,"Preferences"),Qe.forEach(L),ie=T(Ce),Q=m(Ce,"BUTTON",{class:!0});var Je=N(Q);K=oe(Je,"FAQ"),Je.forEach(L),Ce.forEach(L),ue.forEach(L),J=T(U),V=m(U,"MAIN",{});var Ye=N(V);Y&&Y.l(Ye),Ye.forEach(L),U.forEach(L),this.h()},h(){u(t,"class","error-message container"),u(l,"class","censored-email"),u(d,"class","log-out"),d.disabled=E=s[4]||s[5],u(i,"class","profile container"),u(C,"class","credentials-main button container"),u(P,"class","credentials-creator button svelte-qi1hey"),P.disabled=s[4],Le(P,"selected",s[9]),u(v,"class","credentials-creator button container"),u(q,"class","settings header"),u(F,"class","settings-account button svelte-qi1hey"),F.disabled=s[4],Le(F,"selected",s[8]),u(H,"class","settings-preferences button svelte-qi1hey"),H.disabled=s[4],Le(H,"selected",s[7]),u(Q,"class","settings-faq button svelte-qi1hey"),Q.disabled=s[4],Le(Q,"selected",s[6]),u(_,"class","settings-button container"),u(e,"class","page home")},m(I,U){le(I,e,U),a(e,t),O&&O.m(t,null),a(e,n),a(e,o),a(o,i),a(i,l),a(l,r),a(i,c),a(i,d),a(d,w),a(o,b),a(o,C),M&&M.m(C,null),a(o,k),a(o,v),a(v,P),a(P,h),a(o,f),a(o,_),a(_,q),a(_,B),a(_,F),a(F,A),a(_,se),a(_,H),a(H,x),a(_,ie),a(_,Q),a(Q,K),a(e,J),a(e,V),~S&&j[S].m(V,null),z=!0,we||(Z=[G(d,"click",s[12]),G(P,"click",s[14]),G(F,"click",s[15]),G(H,"click",s[16]),G(Q,"click",s[17])],we=!0)},p(I,[U]){I[3]?O?O.p(I,U):(O=Xe(I),O.c(),O.m(t,null)):O&&(O.d(1),O=null),(!z||U&1)&&p!==(p=I[0].currAuthEmailCensoredStore+"")&&Ee(r,p),(!z||U&48&&E!==(E=I[4]||I[5]))&&(d.disabled=E),I[2]!==R.credentials.main?M?M.p(I,U):(M=Ze(I),M.c(),M.m(C,null)):M&&(M.d(1),M=null),(!z||U&16)&&(P.disabled=I[4]),(!z||U&512)&&Le(P,"selected",I[9]),(!z||U&16)&&(F.disabled=I[4]),(!z||U&256)&&Le(F,"selected",I[8]),(!z||U&16)&&(H.disabled=I[4]),(!z||U&128)&&Le(H,"selected",I[7]),(!z||U&16)&&(Q.disabled=I[4]),(!z||U&64)&&Le(Q,"selected",I[6]);let be=S;S=$(I),S===be?~S&&j[S].p(I,U):(Y&&(He(),te(j[be],1,1,()=>{j[be]=null}),Oe()),~S?(Y=j[S],Y?Y.p(I,U):(Y=j[S]=W[S](I),Y.c()),ne(Y,1),Y.m(V,null)):Y=null)},i(I){z||(ne(Y),z=!0)},o(I){te(Y),z=!1},d(I){I&&L(e),O&&O.d(),M&&M.d(),~S&&j[S].d(),we=!1,Fe(Z)}}}const $e="",xt=2e3;function en(s,e,t){let n,o,i,l,p=$e;const r={currAuthEmailCensoredStore:Ne,settingsSecondaryFocusStore:et,settingsHasScrolledStore:tt},c={};let d={};for(const[B,F]of Object.entries(r))c[B]=F.subscribe(A=>{const se={...d};se[B]=A,t(0,d=se)}),Ve(c[B]);let w=ce.credentials,E=R.credentials.main;function b({primary:B,secondary:F}){if(B in ce&&F in R[B])t(1,w=B),t(2,E=F);else throw new Error("Invalid setFocus args",`Primary: ${B} Secondary: ${F}`)}let C=!1,k=!1;function v(){t(5,k=!0),setTimeout(()=>{t(5,k=!1)},xt)}async function P(){t(4,C=!0);let B,F;try{B=await(await fetch("/home/log-out",{method:"POST"})).json()}catch(A){F=A}if(F){console.error("handleLogout: ",F,F.stack),t(3,p=`Fatal ${F}`),v();return}B.success?(t(3,p=$e),ke.authedFalse(),De.true()):(t(3,p=B.error?B.error:"Server Error"),v()),t(4,C=!1)}const h=()=>{r.settingsHasScrolledStore.false(),b({primary:ce.credentials,secondary:R.credentials.main})},f=()=>{r.settingsHasScrolledStore.false(),b({primary:ce.credentials,secondary:R.credentials.creator})},_=()=>{r.settingsHasScrolledStore.false(),b({primary:ce.settings,secondary:R.settings.account})},q=()=>{r.settingsHasScrolledStore.false(),b({primary:ce.settings,secondary:R.settings.preferences})},D=()=>{r.settingsHasScrolledStore.false(),b({primary:ce.settings,secondary:R.settings.faq})};return s.$$.update=()=>{s.$$.dirty&7&&w===ce.settings&&!d.settingsHasScrolledStore&&r.settingsSecondaryFocusStore[E](),s.$$.dirty&4&&t(9,n=E===R.credentials.creator),s.$$.dirty&4&&t(8,o=E===R.settings.account),s.$$.dirty&4&&t(7,i=E===R.settings.preferences),s.$$.dirty&4&&t(6,l=E===R.settings.faq)},[d,w,E,p,C,k,l,i,o,n,r,b,P,h,f,_,q,D]}class tn extends he{constructor(e){super(),_e(this,e,en,$t,me,{})}}function nn(s){let e,t;return e=new at({}),{c(){fe(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){pe(e,n,o),t=!0},i(n){t||(ne(e.$$.fragment,n),t=!0)},o(n){te(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function sn(s){let e,t;return e=new tn({}),{c(){fe(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){pe(e,n,o),t=!0},i(n){t||(ne(e.$$.fragment,n),t=!0)},o(n){te(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function rn(s){let e,t,n,o;const i=[sn,nn],l=[];function p(r,c){return!r[0].pendingAuthCheckStore&&r[0].authStateStore?0:1}return e=p(s),t=l[e]=i[e](s),{c(){t.c(),n=Ke()},l(r){t.l(r),n=Ke()},m(r,c){l[e].m(r,c),le(r,n,c),o=!0},p(r,[c]){let d=e;e=p(r),e!==d&&(He(),te(l[d],1,1,()=>{l[d]=null}),Oe(),t=l[e],t||(t=l[e]=i[e](r),t.c()),ne(t,1),t.m(n.parentNode,n))},i(r){o||(ne(t),o=!0)},o(r){te(t),o=!1},d(r){r&&L(n),l[e].d(r)}}}function on(s,e,t){const n={pendingAuthCheckStore:rt,authStateStore:ke,redirectToHomeStore:ot},o={};let i={};for(const[l,p]of Object.entries(n))o[l]=p.subscribe(r=>{const c={...i};c[l]=r,t(0,i=c)}),Ve(o[l]);return!i.pendingAuthCheckStore&&!i.redirectToHomeStore&&nt(),n.redirectToHomeStore.false(),s.$$.update=()=>{s.$$.dirty&1&&!i.pendingAuthCheckStore&&!i.authStateStore&&st("/log-in")},[i]}class dn extends he{constructor(e){super(),_e(this,e,on,rn,me,{})}}export{dn as component};
