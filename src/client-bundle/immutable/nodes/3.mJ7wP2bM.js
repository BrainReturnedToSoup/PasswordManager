import{r as qe,s as _e,n as ae,e as Ce,i as _t,b as Se,f as Te,o as gt,t as Ye}from"../chunks/scheduler.XwmuOfpH.js";import{t as x,d as ee,S as ge,i as ve,g as v,m as le,s as B,h as w,j as q,n as ue,f as E,c as U,x as z,k as h,a as Y,y as u,z as X,o as Ne,p as Ge,b as Qe,e as Me,r as de,u as fe,v as me,w as pe,A as J,B as ke,C as Pe}from"../chunks/index.BP64-74v.js";import{s as we,a as De,b as vt,c as wt,g as St,p as Ct,L as yt}from"../chunks/navigation.SwcUdgsl.js";import{w as Oe}from"../chunks/singletons.XaMtsUhj.js";import{r as Ve,a as at}from"../chunks/redirect.qSmBOq2d.js";import{v as Et,a as Tt,b as kt}from"../chunks/constraintValidation.zERmOH_T.js";function it(n){return n?.length!==void 0?n:Array.from(n)}function Dt(n,e){x(n,1,1,()=>{e.delete(n.key)})}function Bt(n,e,t,s,l,i,a,c,r,o,b,m){let d=n.length,p=i.length,y=d;const f={};for(;y--;)f[n[y].key]=y;const _=[],C=new Map,D=new Map,S=[];for(y=p;y--;){const k=m(l,i,y),T=t(k);let V=a.get(T);V?s&&S.push(()=>V.p(k,e)):(V=o(T,k),V.c()),C.set(T,_[y]=V),T in f&&D.set(T,Math.abs(y-f[T]))}const g=new Set,P=new Set;function I(k){ee(k,1),k.m(c,b),a.set(k.key,k),b=k.first,p--}for(;d&&p;){const k=_[p-1],T=n[d-1],V=k.key,N=T.key;k===T?(b=k.first,d--,p--):C.has(N)?!a.has(V)||g.has(V)?I(k):P.has(N)?d--:D.get(V)>D.get(N)?(P.add(V),I(k)):(g.add(N),d--):(r(T,a),d--)}for(;d--;){const k=n[d];C.has(k.key)||r(k,a)}for(;p;)I(_[p-1]);return qe(S),_}const Ut=()=>{const{subscribe:n,set:e}=Oe("");return{subscribe:n,set:e,clear:()=>{e("")}}},te=Ut(),Ie={get:{credentials:async n=>await we(`/home/credentials?credentialID=${n}`,"GET"),description:async n=>await we(`/home/credentials/description?credentialID=${n}`,"GET"),emailUsername:async n=>await we(`/home/credentials/email-username?credentialID=${n}`,"GET"),password:async n=>await we(`/home/credentials/password?credentialID=${n}`),idAndNameSet:async()=>await we("/home/credentials/id-name-set")},post:{credential:async(n,e,t,s)=>await we("/home/credentials","POST",{name:n,emailUsername:e,password:t,description:s})},put:{credential:async(n,e)=>await we(`/home/credentials?credentialID=${n}`,"PUT",{...e,credentialID:n})},delete:{credential:async n=>await we(`/home/credentials?credentialID=${n}`,"DELETE")}};function Ee(){setTimeout(()=>{Ve.true(),De.authedFalse(),te.clear()},4e3),te.set("Session expired, please log-in and try again")}const Pt=()=>{const{subscribe:n,set:e,update:t}=Oe({credentialID:null,name:null,emailUsername:null,password:null,description:null});return{subscribe:n,set:e,update:t,clear:()=>{e({credentialID:null,name:null,emailUsername:null,password:null,description:null})}}},Re=Pt(),je=Object.freeze({credentials:"credentials",settings:"settings"}),ie=Object.freeze({credentials:Object.freeze({main:"main",creator:"creator",updater:"updater"}),settings:Object.freeze({account:"account",preferences:"preferences",faq:"faq"})}),It=()=>{const{subscribe:n,set:e}=Oe(je.credentials);return{subscribe:n,credentials:()=>{e(je.credentials)},settings:()=>{e(je.settings)},reset:()=>{e(je.credentials)}}},Vt=()=>{const{subscribe:n,set:e}=Oe(ie.credentials.main);return{subscribe:n,credentials:{main:()=>{e(ie.credentials.main)},creator:()=>{e(ie.credentials.creator)},updater:()=>{e(ie.credentials.updater)}},settings:{account:()=>{e(ie.settings.account)},preferences:()=>{e(ie.settings.preferences)},faq:()=>{e(ie.settings.faq)}},reset:()=>{e(ie.credentials.main)}}},Fe=It(),ye=Vt();function Nt(n){return{name:n.credential_name,emailUsername:n.email_username,password:n.pw,description:n.description}}const qt=()=>{const{subscribe:n,set:e,update:t}=Oe({});return{subscribe:n,set:e,update:t,clear:()=>{e({})}}},Ae=qt();async function ot(n){try{await navigator.clipboard.writeText(n)}catch(e){console.error(`copyToClipboard catch block: value: ${n} error: ${e} ${e.stack}`)}}function lt(n){let e,t;return{c(){e=v("p"),t=le(n[1]),this.h()},l(s){e=w(s,"P",{class:!0});var l=q(e);t=ue(l,n[1]),l.forEach(E),this.h()},h(){h(e,"class","credential description")},m(s,l){Y(s,e,l),u(e,t)},p(s,l){l&2&&Ne(t,s[1])},d(s){s&&E(e)}}}function Ot(n){let e,t,s,l,i,a,c="Update",r,o,b="Delete",m,d,p,y="Copy Email/Username",f,_,C="Copy Password",D,S,g,P="Description",I,k,T,V=n[1]&&lt(n);return{c(){e=v("div"),t=v("h2"),s=le(n[0]),l=B(),i=v("div"),a=v("button"),a.textContent=c,r=B(),o=v("button"),o.textContent=b,m=B(),d=v("div"),p=v("button"),p.textContent=y,f=B(),_=v("button"),_.textContent=C,D=B(),S=v("div"),g=v("button"),g.textContent=P,I=B(),V&&V.c(),this.h()},l(N){e=w(N,"DIV",{class:!0});var O=q(e);t=w(O,"H2",{class:!0});var W=q(t);s=ue(W,n[0]),W.forEach(E),l=U(O),i=w(O,"DIV",{class:!0});var G=q(i);a=w(G,"BUTTON",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-ggvktn"&&(a.textContent=c),r=U(G),o=w(G,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-12ostsz"&&(o.textContent=b),G.forEach(E),m=U(O),d=w(O,"DIV",{class:!0});var H=q(d);p=w(H,"BUTTON",{class:!0,"data-svelte-h":!0}),z(p)!=="svelte-51acpn"&&(p.textContent=y),f=U(H),_=w(H,"BUTTON",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-1o8qm1s"&&(_.textContent=C),H.forEach(E),D=U(O),S=w(O,"DIV",{class:!0});var ne=q(S);g=w(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-wjijel"&&(g.textContent=P),I=U(ne),V&&V.l(ne),ne.forEach(E),O.forEach(E),this.h()},h(){h(t,"class","credential name"),h(a,"class","credential button update"),h(o,"class","credential button delete"),h(i,"class","credential buttons update delete"),h(p,"class","credential button copy email-username"),h(_,"class","credential button copy password"),h(d,"class","credential buttons copy"),h(g,"class","credential description toggle"),h(S,"class","credential description container"),h(e,"class","credential")},m(N,O){Y(N,e,O),u(e,t),u(t,s),u(e,l),u(e,i),u(i,a),u(i,r),u(i,o),u(e,m),u(e,d),u(d,p),u(d,f),u(d,_),u(e,D),u(e,S),u(S,g),u(S,I),V&&V.m(S,null),k||(T=[X(a,"click",n[3]),X(o,"click",n[4]),X(p,"click",n[5]),X(_,"click",n[6]),X(g,"click",n[2])],k=!0)},p(N,[O]){O&1&&Ne(s,N[0]),N[1]?V?V.p(N,O):(V=lt(N),V.c(),V.m(S,null)):V&&(V.d(1),V=null)},i:ae,o:ae,d(N){N&&E(e),V&&V.d(),k=!1,qe(T)}}}function Lt(n,e,t){let{id:s,name:l}=e,i="";async function a(){if(i){t(1,i="");return}const m=await Ie.get.description(s);m.success?t(1,i=m.description):"auth"in m&&!m.auth?Ee():te(m.error)}async function c(){const m=await Ie.get.credentials(s);if(!m.success)"auth"in m&&!m.auth?Ee():te(m.error);else{const d=Nt(m.credential);Re.set({...d,credentialID:s}),ye.credentials.updater()}}async function r(){const m=await Ie.delete.credential(s);m.success?Ae.update(d=>(delete d[s],d)):"auth"in m&&!m.auth?Ee():te(m.error)}async function o(){if(!navigator.clipboard){const d="copy emailUsername error: no navigator clipboard";console.error(d),te.set(d);return}const m=await Ie.get.emailUsername(s);m.success?await ot(m.emailUsername):"auth"in m&&!m.auth?Ee():te(m.error)}async function b(){if(!navigator.clipboard){const d="copy password error: no navigator clipboard";console.error(d),te.set(d);return}const m=await Ie.get.password(s);m.success?await ot(m.password):"auth"in m&&!m.auth?Ee():te(m.error)}return n.$$set=m=>{"id"in m&&t(7,s=m.id),"name"in m&&t(0,l=m.name)},[l,i,a,c,r,o,b,s]}class Ft extends ge{constructor(e){super(),ve(this,e,Lt,Ot,_e,{id:7,name:0})}}function ut(n,e,t){const s=n.slice();return s[2]=e[t][0],s[3]=e[t][1],s}function ct(n,e){let t,s,l;return s=new Ft({props:{id:e[2],name:e[3]}}),{key:n,first:null,c(){t=Me(),de(s.$$.fragment),this.h()},l(i){t=Me(),fe(s.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){Y(i,t,a),me(s,i,a),l=!0},p(i,a){e=i;const c={};a&1&&(c.id=e[2]),a&1&&(c.name=e[3]),s.$set(c)},i(i){l||(ee(s.$$.fragment,i),l=!0)},o(i){x(s.$$.fragment,i),l=!1},d(i){i&&E(t),pe(s,i)}}}function At(n){let e,t,s="",l,i,a=[],c=new Map,r,o=it(Object.entries(n[0].credSetStore));const b=m=>m[2];for(let m=0;m<o.length;m+=1){let d=ut(n,o,m),p=b(d);c.set(p,a[m]=ct(p,d))}return{c(){e=v("div"),t=v("div"),t.innerHTML=s,l=B(),i=v("div");for(let m=0;m<a.length;m+=1)a[m].c();this.h()},l(m){e=w(m,"DIV",{class:!0});var d=q(e);t=w(d,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-k2cro1"&&(t.innerHTML=s),l=U(d),i=w(d,"DIV",{class:!0});var p=q(i);for(let y=0;y<a.length;y+=1)a[y].l(p);p.forEach(E),d.forEach(E),this.h()},h(){h(t,"class","credentials-search"),h(i,"class","credentials-list svelte-1ht3s0y"),h(e,"class","credentials-main")},m(m,d){Y(m,e,d),u(e,t),u(e,l),u(e,i);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null);r=!0},p(m,[d]){d&1&&(o=it(Object.entries(m[0].credSetStore)),Ge(),a=Bt(a,d,b,1,m,o,c,i,Dt,ct,null,ut),Qe())},i(m){if(!r){for(let d=0;d<o.length;d+=1)ee(a[d]);r=!0}},o(m){for(let d=0;d<a.length;d+=1)x(a[d]);r=!1},d(m){m&&E(e);for(let d=0;d<a.length;d+=1)a[d].d()}}}function jt(n,e,t){const s={credSetStore:Ae};let l={};for(const[i,a]of Object.entries(s)){const c=a.subscribe(r=>{const o={...l};o[i]=r,t(0,l=o)});Ce(c)}return[l]}class Mt extends ge{constructor(e){super(),ve(this,e,jt,At,_e,{})}}const Ht=()=>{const{subscribe:n,set:e}=Oe(!1);return{subscribe:n,true:()=>{e(!0)},false:()=>{e(!1)},reset:()=>{e(!1)}}},ze=Ht();function $t(n){let e,t,s,l="Name",i,a,c,r,o,b,m="Email/Username",d,p,y,f,_,C,D="Password",S,g,P,I,k,T="Description",V,N,O,W,G,H,ne,j,L;return{c(){e=v("form"),t=v("div"),s=v("label"),s.textContent=l,i=B(),a=v("input"),r=B(),o=v("div"),b=v("label"),b.textContent=m,d=B(),p=v("input"),f=B(),_=v("div"),C=v("label"),C.textContent=D,S=B(),g=v("input"),P=B(),I=v("div"),k=v("label"),k.textContent=T,V=B(),N=v("textarea"),W=B(),G=v("button"),H=le(n[5]),this.h()},l(R){e=w(R,"FORM",{});var $=q(e);t=w($,"DIV",{class:!0});var se=q(t);s=w(se,"LABEL",{for:!0,"data-svelte-h":!0}),z(s)!=="svelte-1f757gv"&&(s.textContent=l),i=U(se),a=w(se,"INPUT",{id:!0,type:!0}),se.forEach(E),r=U($),o=w($,"DIV",{class:!0});var K=q(o);b=w(K,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-p1kt7x"&&(b.textContent=m),d=U(K),p=w(K,"INPUT",{id:!0,type:!0}),K.forEach(E),f=U($),_=w($,"DIV",{class:!0});var F=q(_);C=w(F,"LABEL",{for:!0,"data-svelte-h":!0}),z(C)!=="svelte-1so3zff"&&(C.textContent=D),S=U(F),g=w(F,"INPUT",{id:!0,type:!0}),F.forEach(E),P=U($),I=w($,"DIV",{class:!0});var A=q(I);k=w(A,"LABEL",{for:!0,"data-svelte-h":!0}),z(k)!=="svelte-r4xeun"&&(k.textContent=T),V=U(A),N=w(A,"TEXTAREA",{id:!0}),q(N).forEach(E),A.forEach(E),W=U($),G=w($,"BUTTON",{type:!0});var oe=q(G);H=ue(oe,n[5]),oe.forEach(E),$.forEach(E),this.h()},h(){h(s,"for","credential-creator-name"),h(a,"id","credential-creator-name"),h(a,"type","text"),a.disabled=c=n[6].disableButtonStateStore,a.required=!0,h(t,"class","credential-creator name container"),h(b,"for","credential-creator-email-username"),h(p,"id","credential-creator-email-username"),h(p,"type","text"),p.disabled=y=n[6].disableButtonStateStore,h(o,"class","credential-creator email container"),h(C,"for","credential-creator-password"),h(g,"id","credential-creator-password"),h(g,"type","password"),h(_,"class","credential-creator password"),h(k,"for","credential-creator-description"),h(N,"id","credential-creator-description"),N.disabled=O=n[6].disableButtonStateStore,h(I,"class","credential-creator description"),h(G,"type","submit"),G.disabled=ne=!n[7]},m(R,$){Y(R,e,$),u(e,t),u(t,s),u(t,i),u(t,a),J(a,n[0]),u(e,r),u(e,o),u(o,b),u(o,d),u(o,p),J(p,n[1]),u(e,f),u(e,_),u(_,C),u(_,S),u(_,g),J(g,n[2]),u(e,P),u(e,I),u(I,k),u(I,V),u(I,N),J(N,n[3]),u(e,W),u(e,G),u(G,H),j||(L=[X(a,"input",n[9]),X(p,"input",n[10]),X(g,"input",n[11]),X(N,"input",n[12]),X(e,"submit",function(){_t(n[4])&&n[4].apply(this,arguments)})],j=!0)},p(R,[$]){n=R,$&64&&c!==(c=n[6].disableButtonStateStore)&&(a.disabled=c),$&1&&a.value!==n[0]&&J(a,n[0]),$&64&&y!==(y=n[6].disableButtonStateStore)&&(p.disabled=y),$&2&&p.value!==n[1]&&J(p,n[1]),$&4&&g.value!==n[2]&&J(g,n[2]),$&64&&O!==(O=n[6].disableButtonStateStore)&&(N.disabled=O),$&8&&J(N,n[3]),$&32&&Ne(H,n[5]),$&128&&ne!==(ne=!n[7])&&(G.disabled=ne)},i:ae,o:ae,d(R){R&&E(e),j=!1,qe(L)}}}function zt(n,e,t){let s,{handleSubmit:l,submitEnabled:i,submitText:a}=e,{name:c,emailUsername:r,password:o,description:b}=e;const m={disableButtonStateStore:ze};let d={};for(const[C,D]of Object.entries(m)){const S=D.subscribe(g=>{const P={...d};P[C]=g,t(6,d=P)});Ce(S)}function p(){c=this.value,t(0,c)}function y(){r=this.value,t(1,r)}function f(){o=this.value,t(2,o)}function _(){b=this.value,t(3,b)}return n.$$set=C=>{"handleSubmit"in C&&t(4,l=C.handleSubmit),"submitEnabled"in C&&t(8,i=C.submitEnabled),"submitText"in C&&t(5,a=C.submitText),"name"in C&&t(0,c=C.name),"emailUsername"in C&&t(1,r=C.emailUsername),"password"in C&&t(2,o=C.password),"description"in C&&t(3,b=C.description)},n.$$.update=()=>{n.$$.dirty&320&&t(7,s=i&&!d.disableButtonStateStore)},[c,r,o,b,l,a,d,s,i,p,y,f,_]}class ht extends ge{constructor(e){super(),ve(this,e,zt,$t,_e,{handleSubmit:4,submitEnabled:8,submitText:5,name:0,emailUsername:1,password:2,description:3})}}function dt(n){let e,t="Credential Created!";return{c(){e=v("p"),e.textContent=t},l(s){e=w(s,"P",{"data-svelte-h":!0}),z(e)!=="svelte-fkqjxo"&&(e.textContent=t)},m(s,l){Y(s,e,l)},d(s){s&&E(e)}}}function Rt(n){let e,t,s,l,i,a,c,r,o=n[4]&&dt();function b(f){n[9](f)}function m(f){n[10](f)}function d(f){n[11](f)}function p(f){n[12](f)}let y={handleSubmit:n[6],submitEnabled:n[5],submitText:"Create"};return n[0]!==void 0&&(y.name=n[0]),n[1]!==void 0&&(y.emailUsername=n[1]),n[2]!==void 0&&(y.password=n[2]),n[3]!==void 0&&(y.description=n[3]),s=new ht({props:y}),Se.push(()=>ke(s,"name",b)),Se.push(()=>ke(s,"emailUsername",m)),Se.push(()=>ke(s,"password",d)),Se.push(()=>ke(s,"description",p)),{c(){e=v("div"),o&&o.c(),t=B(),de(s.$$.fragment),this.h()},l(f){e=w(f,"DIV",{class:!0});var _=q(e);o&&o.l(_),t=U(_),fe(s.$$.fragment,_),_.forEach(E),this.h()},h(){h(e,"class","credentials-creator")},m(f,_){Y(f,e,_),o&&o.m(e,null),u(e,t),me(s,e,null),r=!0},p(f,[_]){f[4]?o||(o=dt(),o.c(),o.m(e,t)):o&&(o.d(1),o=null);const C={};_&32&&(C.submitEnabled=f[5]),!l&&_&1&&(l=!0,C.name=f[0],Te(()=>l=!1)),!i&&_&2&&(i=!0,C.emailUsername=f[1],Te(()=>i=!1)),!a&&_&4&&(a=!0,C.password=f[2],Te(()=>a=!1)),!c&&_&8&&(c=!0,C.description=f[3],Te(()=>c=!1)),s.$set(C)},i(f){r||(ee(s.$$.fragment,f),r=!0)},o(f){x(s.$$.fragment,f),r=!1},d(f){f&&E(e),o&&o.d(),pe(s)}}}function Gt(n,e,t){let s;const l={credSetStore:Ae};let i={};for(const[I,k]of Object.entries(l)){const T=k.subscribe(V=>{const N={...i};N[I]=V,i=N});Ce(T)}let a,c,r,o,b=!1;async function m(I){if(I.preventDefault(),!C(a)){te.set(`Failed to add credential, the name '${a}' is
         already associated with an existing credential.`),f();return}t(7,b=!0);const k=await Ie.post.credential(a,c,r,o);k.success?(Ae.update(T=>({...T,[k.credentialID]:a})),_(),y(),f(2e3)):"auth"in k&&!k.auth?Ee():(te.set(k.error),f()),t(7,b=!1)}let d=!1,p=!1;function y(I=2e3){t(4,d=!0),setTimeout(()=>{t(4,d=!1)},I)}function f(I=3e3){t(8,p=!0),setTimeout(()=>{t(8,p=!1)},I)}function _(){t(0,a=""),t(1,c=""),t(2,r=""),t(3,o="")}function C(I){return!Object.values(i.credSetStore).includes(I)}function D(I){a=I,t(0,a)}function S(I){c=I,t(1,c)}function g(I){r=I,t(2,r)}function P(I){o=I,t(3,o)}return n.$$.update=()=>{n.$$.dirty&384&&t(5,s=!b&&!p)},[a,c,r,o,d,s,m,b,p,D,S,g,P]}class Qt extends ge{constructor(e){super(),ve(this,e,Gt,Rt,_e,{})}}function ft(n){let e,t="Credential Updated!";return{c(){e=v("p"),e.textContent=t},l(s){e=w(s,"P",{"data-svelte-h":!0}),z(e)!=="svelte-vurctt"&&(e.textContent=t)},m(s,l){Y(s,e,l)},d(s){s&&E(e)}}}function Yt(n){let e,t,s,l,i,a,c,r,o=n[4]&&ft();function b(f){n[11](f)}function m(f){n[12](f)}function d(f){n[13](f)}function p(f){n[14](f)}let y={handleSubmit:n[6],submitEnabled:n[5],submitText:"Update"};return n[0]!==void 0&&(y.name=n[0]),n[1]!==void 0&&(y.emailUsername=n[1]),n[2]!==void 0&&(y.password=n[2]),n[3]!==void 0&&(y.description=n[3]),s=new ht({props:y}),Se.push(()=>ke(s,"name",b)),Se.push(()=>ke(s,"emailUsername",m)),Se.push(()=>ke(s,"password",d)),Se.push(()=>ke(s,"description",p)),{c(){e=v("div"),o&&o.c(),t=B(),de(s.$$.fragment),this.h()},l(f){e=w(f,"DIV",{class:!0});var _=q(e);o&&o.l(_),t=U(_),fe(s.$$.fragment,_),_.forEach(E),this.h()},h(){h(e,"class","credentials-updater")},m(f,_){Y(f,e,_),o&&o.m(e,null),u(e,t),me(s,e,null),r=!0},p(f,[_]){f[4]?o||(o=ft(),o.c(),o.m(e,t)):o&&(o.d(1),o=null);const C={};_&32&&(C.submitEnabled=f[5]),!l&&_&1&&(l=!0,C.name=f[0],Te(()=>l=!1)),!i&&_&2&&(i=!0,C.emailUsername=f[1],Te(()=>i=!1)),!a&&_&4&&(a=!0,C.password=f[2],Te(()=>a=!1)),!c&&_&8&&(c=!0,C.description=f[3],Te(()=>c=!1)),s.$set(C)},i(f){r||(ee(s.$$.fragment,f),r=!0)},o(f){x(s.$$.fragment,f),r=!1},d(f){f&&E(e),o&&o.d(),pe(s)}}}function Xt(n,e,t){let s,l;const i={updaterStateStore:Re,credSetStore:Ae};let a={};for(const[T,V]of Object.entries(i)){const N=V.subscribe(O=>{const W={...a};W[T]=O,t(7,a=W)});Ce(N)}let c,r,o,b,m=!1;async function d(T){T.preventDefault();const V=p();if("name"in V&&!S(V.name)){te.set(`Failed to update credential, the name '${c}' is
         already associated with a different existing credential.`),D();return}t(8,m=!0);const N=await Ie.put.credential(a.updaterStateStore.credentialID,V);N.success?(y(V),C(),D(2e3)):"auth"in N&&!N.auth?Ee():(te.set(N.error),D()),t(8,m=!1)}function p(){const T={};return c!==a.updaterStateStore.name&&(T.name=c),r!==a.updaterStateStore.emailUsername&&(T.emailUsername=r),o!==a.updaterStateStore.password&&(T.password=o),b!==a.updaterStateStore.description&&(T.description=b),T}function y(T){"name"in T&&Ae.update(V=>({...V,[a.updaterStateStore.credentialID]:T.name})),Re.update(V=>({...V,...T}))}let f=!1,_=!1;function C(T=2e3){t(4,f=!0),setTimeout(()=>{t(4,f=!1)},T)}function D(T=3e3){t(9,_=!0),setTimeout(()=>{t(9,_=!1)},T)}function S(T){return!Object.values(a.credSetStore).includes(T)}gt(()=>{t(0,c=a.updaterStateStore.name),t(1,r=a.updaterStateStore.emailUsername),t(2,o=a.updaterStateStore.password),t(3,b=a.updaterStateStore.description)});function g(T){c=T,t(0,c)}function P(T){r=T,t(1,r)}function I(T){o=T,t(2,o)}function k(T){b=T,t(3,b)}return n.$$.update=()=>{n.$$.dirty&143&&t(10,s=a.updaterStateStore.name!==c||a.updaterStateStore.emailUsername!==r||a.updaterStateStore.password!==o||a.updaterStateStore.description!==b),n.$$.dirty&1792&&t(5,l=!m&&!_&&s)},[c,r,o,b,f,l,d,a,m,_,s,g,P,I,k]}class Wt extends ge{constructor(e){super(),ve(this,e,Xt,Yt,_e,{})}}function Jt(n){let e,t;return e=new Wt({}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function Kt(n){let e,t;return e=new Qt({}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function Zt(n){let e,t;return e=new Mt({}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function xt(n){let e,t,s,l;const i=[Zt,Kt,Jt],a=[];function c(r,o){return r[0].secondaryFocusStore===ie.credentials.main?0:r[0].secondaryFocusStore===ie.credentials.creator?1:r[0].secondaryFocusStore===ie.credentials.updater?2:-1}return~(t=c(n))&&(s=a[t]=i[t](n)),{c(){e=v("div"),s&&s.c(),this.h()},l(r){e=w(r,"DIV",{class:!0});var o=q(e);s&&s.l(o),o.forEach(E),this.h()},h(){h(e,"class","credentials container")},m(r,o){Y(r,e,o),~t&&a[t].m(e,null),l=!0},p(r,[o]){let b=t;t=c(r),t!==b&&(s&&(Ge(),x(a[b],1,1,()=>{a[b]=null}),Qe()),~t?(s=a[t],s||(s=a[t]=i[t](r),s.c()),ee(s,1),s.m(e,null)):s=null)},i(r){l||(ee(s),l=!0)},o(r){x(s),l=!1},d(r){r&&E(e),~t&&a[t].d()}}}function en(n,e,t){const s={secondaryFocusStore:ye};let l={};for(const[i,a]of Object.entries(s)){const c=a.subscribe(r=>{const o={...l};o[i]=r,t(0,l=o)});Ce(c)}return[l]}class tn extends ge{constructor(e){super(),ve(this,e,en,xt,_e,{})}}const He={get:{data:async()=>await we("/home/settings","GET")},put:{password:async(n,e)=>await we("/home/settings/password","PUT",{oldPassword:n,newPassword:e}),email:async(n,e,t)=>await we("/home/settings/email","PUT",{oldEmail:n,password:e,newEmail:t})},delete:{account:async(n,e)=>await we("/home/settings/account","DELETE",{email:n,password:e})},verifyEmail:{post:async()=>await we("/home/settings/verify-email","POST"),put:async n=>await we("/home/settings/verify-email","PUT",{code:n})}};function nn(n){let e,t,s="Delete Your Account",l,i,a="Desc Here",c,r,o,b="Email",m,d,p,y,f,_="Password",C,D,S,g,P,I="Confirm Password",k,T,V,N,O,W,G,H,ne;return{c(){e=v("div"),t=v("h3"),t.textContent=s,l=B(),i=v("p"),i.textContent=a,c=B(),r=v("form"),o=v("label"),o.textContent=b,m=B(),d=v("input"),y=B(),f=v("label"),f.textContent=_,C=B(),D=v("input"),g=B(),P=v("label"),P.textContent=I,k=B(),T=v("input"),N=B(),O=v("button"),W=le("Delete"),this.h()},l(j){e=w(j,"DIV",{class:!0});var L=q(e);t=w(L,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-bjgs3s"&&(t.textContent=s),l=U(L),i=w(L,"P",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-1tvstg1"&&(i.textContent=a),c=U(L),r=w(L,"FORM",{action:!0,method:!0});var R=q(r);o=w(R,"LABEL",{for:!0,"data-svelte-h":!0}),z(o)!=="svelte-2vstyi"&&(o.textContent=b),m=U(R),d=w(R,"INPUT",{id:!0,name:!0,type:!0}),y=U(R),f=w(R,"LABEL",{for:!0,"data-svelte-h":!0}),z(f)!=="svelte-9e3l82"&&(f.textContent=_),C=U(R),D=w(R,"INPUT",{id:!0,name:!0,type:!0}),g=U(R),P=w(R,"LABEL",{for:!0,"data-svelte-h":!0}),z(P)!=="svelte-14qrn4n"&&(P.textContent=I),k=U(R),T=w(R,"INPUT",{id:!0,name:!0,type:!0}),N=U(R),O=w(R,"BUTTON",{type:!0});var $=q(O);W=ue($,"Delete"),$.forEach(E),R.forEach(E),L.forEach(E),this.h()},h(){h(t,"class","delete-account header"),h(i,"class","delete-account description"),h(o,"for","delete-account-email"),h(d,"id","delete-account-email"),h(d,"name","email"),h(d,"type","email"),d.disabled=p=n[0].disableButtonStateStore,h(f,"for","delete-account-password"),h(D,"id","delete-account-password"),h(D,"name","password"),h(D,"type","password"),D.disabled=S=n[0].disableButtonStateStore,h(P,"for","delete-account-confirm-password"),h(T,"id","delete-account-confirm-password"),h(T,"name","confirmPassword"),h(T,"type","password"),T.disabled=V=n[0].disableButtonStateStore,h(O,"type","submit"),O.disabled=G=!n[4],h(r,"action","/home/settings/delete-account"),h(r,"method","POST"),h(e,"class","delete-account container")},m(j,L){Y(j,e,L),u(e,t),u(e,l),u(e,i),u(e,c),u(e,r),u(r,o),u(r,m),u(r,d),J(d,n[1]),u(r,y),u(r,f),u(r,C),u(r,D),J(D,n[2]),u(r,g),u(r,P),u(r,k),u(r,T),J(T,n[3]),u(r,N),u(r,O),u(O,W),H||(ne=[X(d,"input",n[8]),X(D,"input",n[9]),X(T,"input",n[10]),X(r,"submit",n[5])],H=!0)},p(j,[L]){L&1&&p!==(p=j[0].disableButtonStateStore)&&(d.disabled=p),L&2&&d.value!==j[1]&&J(d,j[1]),L&1&&S!==(S=j[0].disableButtonStateStore)&&(D.disabled=S),L&4&&D.value!==j[2]&&J(D,j[2]),L&1&&V!==(V=j[0].disableButtonStateStore)&&(T.disabled=V),L&8&&T.value!==j[3]&&J(T,j[3]),L&16&&G!==(G=!j[4])&&(O.disabled=G)},i:ae,o:ae,d(j){j&&E(e),H=!1,qe(ne)}}}function sn(n,e,t){let s;const l={disableButtonStateStore:ze};let i={};for(const[_,C]of Object.entries(l)){const D=C.subscribe(S=>{const g={...i};g[_]=S,t(0,i=g)});Ce(D)}let a,c,r,o=!1,b=!1;async function m(_){_.preventDefault(),t(6,o=!0);const C=await He.delete.account(a,c);C.success?(Ve.true(),De.authedFalse()):"auth"in C&&!C.auth?Ee():(te.set(C.error),d()),t(6,o=!1)}function d(_=2e3){t(7,b=!0),setTimeout(()=>{t(7,b=!1)},_)}function p(){a=this.value,t(1,a)}function y(){c=this.value,t(2,c)}function f(){r=this.value,t(3,r)}return n.$$.update=()=>{n.$$.dirty&207&&t(4,s=a&&c&&r&&!o&&!b&&!i.disableButtonStateStore)},[i,a,c,r,s,m,o,b,p,y,f]}class rn extends ge{constructor(e){super(),ve(this,e,sn,nn,_e,{})}}function an(n){let e,t,s="New Password",l,i,a="Desc Here",c,r,o,b,m="Old Password",d,p,y,f,_,C,D,S,g,P="New Password",I,k,T,V,N,O,W,G,H,ne="Confirm New Password",j,L,R,$,se,K,F,A,oe;return{c(){e=v("div"),t=v("h3"),t.textContent=s,l=B(),i=v("p"),i.textContent=a,c=B(),r=v("form"),o=v("div"),b=v("label"),b.textContent=m,d=B(),p=v("input"),f=B(),_=v("p"),C=le(n[4]),D=B(),S=v("div"),g=v("label"),g.textContent=P,I=B(),k=v("input"),V=B(),N=v("p"),O=le(n[5]),W=B(),G=v("div"),H=v("label"),H.textContent=ne,j=B(),L=v("input"),$=B(),se=v("button"),K=le("Set"),this.h()},l(Z){e=w(Z,"DIV",{class:!0});var M=q(e);t=w(M,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1pzclo9"&&(t.textContent=s),l=U(M),i=w(M,"P",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-17yatlw"&&(i.textContent=a),c=U(M),r=w(M,"FORM",{});var ce=q(r);o=w(ce,"DIV",{class:!0});var be=q(o);b=w(be,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-1dztljq"&&(b.textContent=m),d=U(be),p=w(be,"INPUT",{id:!0,name:!0,type:!0}),be.forEach(E),f=U(ce),_=w(ce,"P",{class:!0});var Be=q(_);C=ue(Be,n[4]),Be.forEach(E),D=U(ce),S=w(ce,"DIV",{class:!0});var Q=q(S);g=w(Q,"LABEL",{for:!0,"data-svelte-h":!0}),z(g)!=="svelte-gu95ju"&&(g.textContent=P),I=U(Q),k=w(Q,"INPUT",{id:!0,name:!0,type:!0}),Q.forEach(E),V=U(ce),N=w(ce,"P",{class:!0});var re=q(N);O=ue(re,n[5]),re.forEach(E),W=U(ce),G=w(ce,"DIV",{class:!0});var he=q(G);H=w(he,"LABEL",{for:!0,"data-svelte-h":!0}),z(H)!=="svelte-1w1roi4"&&(H.textContent=ne),j=U(he),L=w(he,"INPUT",{id:!0,name:!0,type:!0}),he.forEach(E),$=U(ce),se=w(ce,"BUTTON",{type:!0});var Le=q(se);K=ue(Le,"Set"),Le.forEach(E),ce.forEach(E),M.forEach(E),this.h()},h(){h(t,"class","new-password header"),h(i,"class","new-password description"),h(b,"for","new-password-old-password"),h(p,"id","new-password-old-password"),h(p,"name","oldPassword"),h(p,"type","password"),p.disabled=y=n[0].disableButtonStateStore,h(o,"class","new-password-old-password container"),h(_,"class","new-password-new-password error-message"),h(g,"for","new-password-new-password"),h(k,"id","new-password-new-password"),h(k,"name","newPassword"),h(k,"type","password"),k.disabled=T=n[0].disableButtonStateStore,h(S,"class","new-password-new-password container"),h(N,"class","new-password-confirm-password error-message"),h(H,"for","new-password-confirm-password"),h(L,"id","new-password-confirm-password"),h(L,"name","confirmPassword"),h(L,"type","password"),L.disabled=R=n[0].disableButtonStateStore,h(G,"class","new-password-confirm-password container"),h(se,"type","submit"),se.disabled=F=!n[6],h(e,"class","new-password container")},m(Z,M){Y(Z,e,M),u(e,t),u(e,l),u(e,i),u(e,c),u(e,r),u(r,o),u(o,b),u(o,d),u(o,p),J(p,n[1]),u(r,f),u(r,_),u(_,C),u(r,D),u(r,S),u(S,g),u(S,I),u(S,k),J(k,n[2]),u(r,V),u(r,N),u(N,O),u(r,W),u(r,G),u(G,H),u(G,j),u(G,L),J(L,n[3]),u(r,$),u(r,se),u(se,K),A||(oe=[X(p,"input",n[10]),X(k,"input",n[11]),X(L,"input",n[12]),X(r,"submit",n[7])],A=!0)},p(Z,[M]){M&1&&y!==(y=Z[0].disableButtonStateStore)&&(p.disabled=y),M&2&&p.value!==Z[1]&&J(p,Z[1]),M&16&&Ne(C,Z[4]),M&1&&T!==(T=Z[0].disableButtonStateStore)&&(k.disabled=T),M&4&&k.value!==Z[2]&&J(k,Z[2]),M&32&&Ne(O,Z[5]),M&1&&R!==(R=Z[0].disableButtonStateStore)&&(L.disabled=R),M&8&&L.value!==Z[3]&&J(L,Z[3]),M&64&&F!==(F=!Z[6])&&(se.disabled=F)},i:ae,o:ae,d(Z){Z&&E(e),A=!1,qe(oe)}}}function on(n,e,t){let s;const l={disableButtonStateStore:ze};let i={};for(const[D,S]of Object.entries(l)){const g=S.subscribe(P=>{const I={...i};I[D]=P,t(0,i=I)});Ce(g)}let a,c,r,o,b,m=!1,d=!1;async function p(D){D.preventDefault(),t(8,m=!0);const S=await He.put.password(a,c);S.success?(Ve.true(),De.authedFalse()):"auth"in S&&!S.auth?Ee():(te.set(S.error),y()),t(8,m=!1)}function y(D=2e3){t(9,d=!0),setTimeout(()=>{t(9,d=!1)},D)}function f(){a=this.value,t(1,a)}function _(){c=this.value,t(2,c)}function C(){r=this.value,t(3,r)}return n.$$.update=()=>{n.$$.dirty&4&&(c?t(4,o=Et(c)):t(4,o="")),n.$$.dirty&12&&(r&&c?t(5,b=Tt(r,c)):t(5,b="")),n.$$.dirty&831&&t(6,s=a&&c&&r&&!o&&!b&&!m&&!d&&!i.disableButtonStateStore)},[i,a,c,r,o,b,s,p,m,d,f,_,C]}class ln extends ge{constructor(e){super(),ve(this,e,on,an,_e,{})}}function un(n){let e,t,s="Update Account Email",l,i,a="Desc Here",c,r,o,b,m="Current Email",d,p,y,f,_,C,D="Password",S,g,P,I,k,T,V,N,O,W="New Email",G,H,ne,j,L,R,$,se,K;return{c(){e=v("div"),t=v("h3"),t.textContent=s,l=B(),i=v("p"),i.textContent=a,c=B(),r=v("form"),o=v("div"),b=v("label"),b.textContent=m,d=B(),p=v("input"),f=B(),_=v("div"),C=v("label"),C.textContent=D,S=B(),g=v("input"),I=B(),k=v("p"),T=le(n[4]),V=B(),N=v("div"),O=v("label"),O.textContent=W,G=B(),H=v("input"),j=B(),L=v("button"),R=le("Set"),this.h()},l(F){e=w(F,"DIV",{class:!0});var A=q(e);t=w(A,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-tlkmds"&&(t.textContent=s),l=U(A),i=w(A,"P",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-npnfgg"&&(i.textContent=a),c=U(A),r=w(A,"FORM",{});var oe=q(r);o=w(oe,"DIV",{class:!0});var Z=q(o);b=w(Z,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-18m3fc4"&&(b.textContent=m),d=U(Z),p=w(Z,"INPUT",{id:!0,type:!0,name:!0}),Z.forEach(E),f=U(oe),_=w(oe,"DIV",{class:!0});var M=q(_);C=w(M,"LABEL",{for:!0,"data-svelte-h":!0}),z(C)!=="svelte-1zdtl7"&&(C.textContent=D),S=U(M),g=w(M,"INPUT",{id:!0,type:!0,name:!0}),M.forEach(E),I=U(oe),k=w(oe,"P",{class:!0});var ce=q(k);T=ue(ce,n[4]),ce.forEach(E),V=U(oe),N=w(oe,"DIV",{class:!0});var be=q(N);O=w(be,"LABEL",{for:!0,"data-svelte-h":!0}),z(O)!=="svelte-d2nd6i"&&(O.textContent=W),G=U(be),H=w(be,"INPUT",{id:!0,type:!0,name:!0}),be.forEach(E),j=U(oe),L=w(oe,"BUTTON",{type:!0});var Be=q(L);R=ue(Be,"Set"),Be.forEach(E),oe.forEach(E),A.forEach(E),this.h()},h(){h(t,"class","update-email header"),h(i,"class","update-email description"),h(b,"for","update-email-current-email"),h(p,"id","update-email-current-email"),h(p,"type","email"),h(p,"name","email"),p.disabled=y=n[0].disableButtonStateStore,h(o,"class","update-email current-email container"),h(C,"for","update-email-password"),h(g,"id","update-email-password"),h(g,"type","password"),h(g,"name","password"),g.disabled=P=n[0].disableButtonStateStore,h(_,"class","update-email password container"),h(k,"class","update-email-new-email error-message"),h(O,"for","update-email-new-email"),h(H,"id","update-email-new-email"),h(H,"type","email"),h(H,"name","newEmail"),H.disabled=ne=n[0].disableButtonStateStore,h(N,"class","update-email new-email container"),h(L,"type","submit"),L.disabled=$=!n[5],h(e,"class","update-email")},m(F,A){Y(F,e,A),u(e,t),u(e,l),u(e,i),u(e,c),u(e,r),u(r,o),u(o,b),u(o,d),u(o,p),J(p,n[1]),u(r,f),u(r,_),u(_,C),u(_,S),u(_,g),J(g,n[2]),u(r,I),u(r,k),u(k,T),u(r,V),u(r,N),u(N,O),u(N,G),u(N,H),J(H,n[3]),u(r,j),u(r,L),u(L,R),se||(K=[X(p,"input",n[9]),X(g,"input",n[10]),X(H,"input",n[11]),X(r,"submit",n[6])],se=!0)},p(F,[A]){A&1&&y!==(y=F[0].disableButtonStateStore)&&(p.disabled=y),A&2&&p.value!==F[1]&&J(p,F[1]),A&1&&P!==(P=F[0].disableButtonStateStore)&&(g.disabled=P),A&4&&g.value!==F[2]&&J(g,F[2]),A&16&&Ne(T,F[4]),A&1&&ne!==(ne=F[0].disableButtonStateStore)&&(H.disabled=ne),A&8&&H.value!==F[3]&&J(H,F[3]),A&32&&$!==($=!F[5])&&(L.disabled=$)},i:ae,o:ae,d(F){F&&E(e),se=!1,qe(K)}}}function cn(n,e,t){let s;const l={disableButtonStateStore:ze};let i={};for(const[C,D]of Object.entries(l)){const S=D.subscribe(g=>{const P={...i};P[C]=g,t(0,i=P)});Ce(S)}let a,c,r,o,b=!1,m=!1;async function d(C){C.preventDefault(),t(7,b=!0);const D=await He.put.email(a,c,r);D.success?(Ve.true(),De.authedFalse()):"auth"in D&&!D.auth?Ee():(te.set(D.error),p()),t(7,b=!1)}function p(C=2e3){t(8,m=!0),setTimeout(()=>{t(8,m=!1)},C)}function y(){a=this.value,t(1,a)}function f(){c=this.value,t(2,c)}function _(){r=this.value,t(3,r)}return n.$$.update=()=>{n.$$.dirty&8&&(r?t(4,o=kt(r)):t(4,o="")),n.$$.dirty&415&&t(5,s=a&&c&&r&&!o&&!b&&!m&&!i.disableButtonStateStore)},[i,a,c,r,o,s,d,b,m,y,f,_]}class dn extends ge{constructor(e){super(),ve(this,e,cn,un,_e,{})}}const fn=()=>{const{subscribe:n,update:e,set:t}=Oe({});return{subscribe:n,update:e,set:t,clear:()=>{t({})}}},mn=()=>{const{subscribe:n,set:e}=Oe(!1);return{subscribe:n,true:()=>{e(!0)},false:()=>{e(!1)}}},We=fn(),$e=mn();function pn(n){let e,t=`You have not verified your email associated with this account. Verify your\r
      account by submitting the code sent to your email!`,s,l,i,a,c,r,o,b="Verification Code",m,d,p,y,f,_,C,D,S=n[3]&&mt();return{c(){e=v("p"),e.textContent=t,s=B(),S&&S.c(),l=B(),i=v("button"),a=le("Send Verification Code"),c=B(),r=v("form"),o=v("label"),o.textContent=b,m=B(),d=v("input"),p=B(),y=v("button"),f=le("Verify"),this.h()},l(g){e=w(g,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-3sj0qw"&&(e.textContent=t),s=U(g),S&&S.l(g),l=U(g),i=w(g,"BUTTON",{});var P=q(i);a=ue(P,"Send Verification Code"),P.forEach(E),c=U(g),r=w(g,"FORM",{});var I=q(r);o=w(I,"LABEL",{for:!0,"data-svelte-h":!0}),z(o)!=="svelte-1879wan"&&(o.textContent=b),m=U(I),d=w(I,"INPUT",{id:!0,name:!0}),p=U(I),y=w(I,"BUTTON",{type:!0});var k=q(y);f=ue(k,"Verify"),k.forEach(E),I.forEach(E),this.h()},h(){h(e,"class","verify-email description"),i.disabled=n[2],h(o,"for","verify-email-code-input"),h(d,"id","verify-email-code-input"),h(d,"name","verification-code"),y.disabled=_=!n[4],h(y,"type","submit")},m(g,P){Y(g,e,P),Y(g,s,P),S&&S.m(g,P),Y(g,l,P),Y(g,i,P),u(i,a),Y(g,c,P),Y(g,r,P),u(r,o),u(r,m),u(r,d),J(d,n[0]),u(r,p),u(r,y),u(y,f),C||(D=[X(i,"click",n[5]),X(d,"input",n[8]),X(r,"submit",n[6])],C=!0)},p(g,P){g[3]?S||(S=mt(),S.c(),S.m(l.parentNode,l)):S&&(S.d(1),S=null),P&4&&(i.disabled=g[2]),P&1&&d.value!==g[0]&&J(d,g[0]),P&16&&_!==(_=!g[4])&&(y.disabled=_)},d(g){g&&(E(e),E(s),E(l),E(i),E(c),E(r)),S&&S.d(g),C=!1,qe(D)}}}function bn(n){let e,t="Your account is verified!";return{c(){e=v("p"),e.textContent=t},l(s){e=w(s,"P",{"data-svelte-h":!0}),z(e)!=="svelte-hq25f"&&(e.textContent=t)},m(s,l){Y(s,e,l)},p:ae,d(s){s&&E(e)}}}function mt(n){let e,t=`If you do not see the code in your email, check your spam. If it is not\r
        in spam, click the 'send code' button again.`;return{c(){e=v("p"),e.textContent=t},l(s){e=w(s,"P",{"data-svelte-h":!0}),z(e)!=="svelte-h3gsco"&&(e.textContent=t)},m(s,l){Y(s,e,l)},d(s){s&&E(e)}}}function hn(n){let e,t,s="Verify Email",l;function i(r,o){return r[1].settingsDataStore.verified?bn:pn}let a=i(n),c=a(n);return{c(){e=v("div"),t=v("h3"),t.textContent=s,l=B(),c.c(),this.h()},l(r){e=w(r,"DIV",{class:!0});var o=q(e);t=w(o,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1soy2pv"&&(t.textContent=s),l=U(o),c.l(o),o.forEach(E),this.h()},h(){h(t,"class","verify-email header"),h(e,"class","verify-email container")},m(r,o){Y(r,e,o),u(e,t),u(e,l),c.m(e,null)},p(r,[o]){a===(a=i(r))&&c?c.p(r,o):(c.d(1),c=a(r),c&&(c.c(),c.m(e,null)))},i:ae,o:ae,d(r){r&&E(e),c.d()}}}function _n(n,e,t){let s;const l={settingsDataStore:We};let i={};for(const[f,_]of Object.entries(l)){const C=_.subscribe(D=>{const S={...i};S[f]=D,t(1,i=S)});Ce(C)}let a,c=!1,r=!1;async function o(){r||t(3,r=!0);const f=await He.verifyEmail.post();f.success?b(1e3):"auth"in f&&!f.auth?Ee():(te.set(f.error),b())}function b(f=2e3){t(2,c=!0),setTimeout(()=>{t(2,c=!1)},f)}let m=!1;async function d(){const f=await He.verifyEmail.put(a);f.success?We.update(_=>({..._,verified:!0})):"auth"in f&&!f.auth?Ee():(te.set(f.error),p())}function p(f=3e3){t(7,m=!0),setTimeout(()=>{t(7,m=!1)},f)}function y(){a=this.value,t(0,a)}return n.$$.update=()=>{n.$$.dirty&129&&t(4,s=a&&!m)},[a,i,c,r,s,o,d,m,y]}class gn extends ge{constructor(e){super(),ve(this,e,_n,hn,_e,{})}}function vn(n){let e,t,s="Account",l,i,a,c,r,o,b,m,d;return i=new rn({}),c=new ln({}),o=new dn({}),m=new gn({}),{c(){e=v("div"),t=v("h2"),t.textContent=s,l=B(),de(i.$$.fragment),a=B(),de(c.$$.fragment),r=B(),de(o.$$.fragment),b=B(),de(m.$$.fragment),this.h()},l(p){e=w(p,"DIV",{class:!0});var y=q(e);t=w(y,"H2",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-xopwpk"&&(t.textContent=s),l=U(y),fe(i.$$.fragment,y),a=U(y),fe(c.$$.fragment,y),r=U(y),fe(o.$$.fragment,y),b=U(y),fe(m.$$.fragment,y),y.forEach(E),this.h()},h(){h(t,"class","settings-account header"),h(e,"class","settings-account container svelte-15u0fo5")},m(p,y){Y(p,e,y),u(e,t),u(e,l),me(i,e,null),u(e,a),me(c,e,null),u(e,r),me(o,e,null),u(e,b),me(m,e,null),n[1](e),d=!0},p:ae,i(p){d||(ee(i.$$.fragment,p),ee(c.$$.fragment,p),ee(o.$$.fragment,p),ee(m.$$.fragment,p),d=!0)},o(p){x(i.$$.fragment,p),x(c.$$.fragment,p),x(o.$$.fragment,p),x(m.$$.fragment,p),d=!1},d(p){p&&E(e),pe(i),pe(c),pe(o),pe(m),n[1](null)}}}function wn(n,e,t){let{accountContainer:s}=e;function l(i){Se[i?"unshift":"push"](()=>{s=i,t(0,s)})}return n.$$set=i=>{"accountContainer"in i&&t(0,s=i.accountContainer)},[s,l]}class Sn extends ge{constructor(e){super(),ve(this,e,wn,vn,_e,{accountContainer:0})}}function Cn(n){let e,t='<h2 class="settings-preferences header">Preferences</h2> <div class="settings-preferences general container svelte-svrx2m"></div> <div class="settings-preferences theme container svelte-svrx2m"></div> <div class="settings-preferences font container svelte-svrx2m"></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-h1uwy9"&&(e.innerHTML=t),this.h()},h(){h(e,"class","settings-preferences container svelte-svrx2m")},m(s,l){Y(s,e,l),n[1](e)},p:ae,i:ae,o:ae,d(s){s&&E(e),n[1](null)}}}function yn(n,e,t){let{preferencesContainer:s}=e;function l(i){Se[i?"unshift":"push"](()=>{s=i,t(0,s)})}return n.$$set=i=>{"preferencesContainer"in i&&t(0,s=i.preferencesContainer)},[s,l]}class En extends ge{constructor(e){super(),ve(this,e,yn,Cn,_e,{preferencesContainer:0})}}function Tn(n){let e,t='<h2 class="settings-faq header">FAQ</h2> <div class="settings-faq about container svelte-iytjw8"></div> <div class="settings-faq is-it-safe container svelte-iytjw8"></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-7lj1tf"&&(e.innerHTML=t),this.h()},h(){h(e,"class","settings-faq container svelte-iytjw8")},m(s,l){Y(s,e,l),n[1](e)},p:ae,i:ae,o:ae,d(s){s&&E(e),n[1](null)}}}function kn(n,e,t){let{faqContainer:s}=e;function l(i){Se[i?"unshift":"push"](()=>{s=i,t(0,s)})}return n.$$set=i=>{"faqContainer"in i&&t(0,s=i.faqContainer)},[s,l]}class Dn extends ge{constructor(e){super(),ve(this,e,kn,Tn,_e,{faqContainer:0})}}function Bn(n){let e,t,s,l,i,a,c,r,o,b,m,d;function p(S){n[6](S)}let y={};n[1]!==void 0&&(y.accountContainer=n[1]),t=new Sn({props:y}),Se.push(()=>ke(t,"accountContainer",p));function f(S){n[7](S)}let _={};n[2]!==void 0&&(_.preferencesContainer=n[2]),i=new En({props:_}),Se.push(()=>ke(i,"preferencesContainer",f));function C(S){n[8](S)}let D={};return n[3]!==void 0&&(D.faqContainer=n[3]),r=new Dn({props:D}),Se.push(()=>ke(r,"faqContainer",C)),{c(){e=v("div"),de(t.$$.fragment),l=B(),de(i.$$.fragment),c=B(),de(r.$$.fragment),this.h()},l(S){e=w(S,"DIV",{class:!0});var g=q(e);fe(t.$$.fragment,g),l=U(g),fe(i.$$.fragment,g),c=U(g),fe(r.$$.fragment,g),g.forEach(E),this.h()},h(){h(e,"class","settings container svelte-1ruvxrw")},m(S,g){Y(S,e,g),me(t,e,null),u(e,l),me(i,e,null),u(e,c),me(r,e,null),n[9](e),b=!0,m||(d=X(e,"scroll",n[4]),m=!0)},p(S,[g]){const P={};!s&&g&2&&(s=!0,P.accountContainer=S[1],Te(()=>s=!1)),t.$set(P);const I={};!a&&g&4&&(a=!0,I.preferencesContainer=S[2],Te(()=>a=!1)),i.$set(I);const k={};!o&&g&8&&(o=!0,k.faqContainer=S[3],Te(()=>o=!1)),r.$set(k)},i(S){b||(ee(t.$$.fragment,S),ee(i.$$.fragment,S),ee(r.$$.fragment,S),b=!0)},o(S){x(t.$$.fragment,S),x(i.$$.fragment,S),x(r.$$.fragment,S),b=!1},d(S){S&&E(e),pe(t),pe(i),pe(r),n[9](null),m=!1,d()}}}function Un(n,e,t){const s={primaryFocusStore:Fe,secondaryFocusStore:ye,settingsNavClickedStore:$e};let l={};for(const[f,_]of Object.entries(s)){const C=_.subscribe(D=>{const S={...l};S[f]=D,t(5,l=S)});Ce(C)}let i,a,c,r;async function o(){await Ye();const f={[ie.settings.account]:a.offsetTop,[ie.settings.preferences]:c.offsetTop,[ie.settings.faq]:r.offsetTop};t(0,i.scrollTop=f[l.secondaryFocusStore]-f[ie.settings.account],i),await Ye(),$e.false()}async function b(){if(l.settingsNavClickedStore)return;await Ye();const{scrollTop:f}=i;f>=0&&f<a.offsetTop?ye.settings.account():f>a.offsetTop&&f<=c.offsetTop?ye.settings.preferences():ye.settings.faq()}function m(f){a=f,t(1,a)}function d(f){c=f,t(2,c)}function p(f){r=f,t(3,r)}function y(f){Se[f?"unshift":"push"](()=>{i=f,t(0,i)})}return n.$$.update=()=>{n.$$.dirty&32&&l.settingsNavClickedStore&&o()},[i,a,c,r,b,l,m,d,p,y]}class Pn extends ge{constructor(e){super(),ve(this,e,Un,Bn,_e,{})}}function pt(n){let e,t="X",s,l,i,a=n[0].errorMessageStore+"",c,r,o;return{c(){e=v("button"),e.textContent=t,s=B(),l=v("div"),i=v("p"),c=le(a),this.h()},l(b){e=w(b,"BUTTON",{"data-svelte-h":!0}),z(e)!=="svelte-16nmebw"&&(e.textContent=t),s=U(b),l=w(b,"DIV",{class:!0});var m=q(l);i=w(m,"P",{class:!0});var d=q(i);c=ue(d,a),d.forEach(E),m.forEach(E),this.h()},h(){h(i,"class","error-message"),h(l,"class","error-popup container")},m(b,m){Y(b,e,m),Y(b,s,m),Y(b,l,m),u(l,i),u(i,c),r||(o=X(e,"click",n[1]),r=!0)},p(b,m){m&1&&a!==(a=b[0].errorMessageStore+"")&&Ne(c,a)},d(b){b&&(E(e),E(s),E(l)),r=!1,o()}}}function In(n){let e,t=n[0].errorMessageStore&&pt(n);return{c(){t&&t.c(),e=Me()},l(s){t&&t.l(s),e=Me()},m(s,l){t&&t.m(s,l),Y(s,e,l)},p(s,[l]){s[0].errorMessageStore?t?t.p(s,l):(t=pt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ae,o:ae,d(s){s&&E(e),t&&t.d(s)}}}function Vn(n,e,t){const s={errorMessageStore:te};let l={};for(const[a,c]of Object.entries(s)){const r=c.subscribe(o=>{const b={...l};b[a]=o,t(0,l=b)});Ce(r)}function i(){te.clear()}return[l,i]}let Nn=class extends ge{constructor(e){super(),ve(this,e,Vn,In,_e,{})}};function bt(n){let e,t,s,l,i;return{c(){e=v("button"),t=le("Back to main"),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var c=q(e);t=ue(c,"Back to main"),c.forEach(E),this.h()},h(){h(e,"class","credentials-main button"),e.disabled=s=n[1].disableButtonStateStore},m(a,c){Y(a,e,c),u(e,t),l||(i=X(e,"click",n[6].credentials.main),l=!0)},p(a,c){c&2&&s!==(s=a[1].disableButtonStateStore)&&(e.disabled=s)},d(a){a&&E(e),l=!1,i()}}}function qn(n){let e,t;return e=new tn({}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function On(n){let e,t;return e=new Pn({}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function Ln(n){let e,t,s,l,i,a,c,r,o,b,m,d,p,y,f,_,C,D,S,g,P,I="Settings",k,T,V,N,O,W,G,H,ne,j,L,R,$,se,K,F,A,oe,Z;t=new Nn({});let M=n[1].secondaryFocusStore!==ie.credentials.main&&bt(n);const ce=[On,qn],be=[];function Be(Q,re){return Q[1].primaryFocusStore===je.settings?0:Q[1].primaryFocusStore===je.credentials?1:-1}return~(K=Be(n))&&(F=be[K]=ce[K](n)),{c(){e=v("div"),de(t.$$.fragment),s=B(),l=v("nav"),i=v("div"),a=v("h1"),c=le(n[0]),r=B(),o=v("button"),b=le("Log out"),d=B(),p=v("div"),M&&M.c(),y=B(),f=v("div"),_=v("button"),C=le("New Credentials"),S=B(),g=v("div"),P=v("h1"),P.textContent=I,k=B(),T=v("button"),V=le("Account"),O=B(),W=v("button"),G=le("Preferences"),ne=B(),j=v("button"),L=le("FAQ"),$=B(),se=v("main"),F&&F.c(),this.h()},l(Q){e=w(Q,"DIV",{class:!0});var re=q(e);fe(t.$$.fragment,re),s=U(re),l=w(re,"NAV",{});var he=q(l);i=w(he,"DIV",{class:!0});var Le=q(i);a=w(Le,"H1",{class:!0});var Je=q(a);c=ue(Je,n[0]),Je.forEach(E),r=U(Le),o=w(Le,"BUTTON",{class:!0});var Ke=q(o);b=ue(Ke,"Log out"),Ke.forEach(E),Le.forEach(E),d=U(he),p=w(he,"DIV",{class:!0});var Ze=q(p);M&&M.l(Ze),Ze.forEach(E),y=U(he),f=w(he,"DIV",{class:!0});var xe=q(f);_=w(xe,"BUTTON",{class:!0});var et=q(_);C=ue(et,"New Credentials"),et.forEach(E),xe.forEach(E),S=U(he),g=w(he,"DIV",{class:!0});var Ue=q(g);P=w(Ue,"H1",{class:!0,"data-svelte-h":!0}),z(P)!=="svelte-d985ew"&&(P.textContent=I),k=U(Ue),T=w(Ue,"BUTTON",{class:!0});var tt=q(T);V=ue(tt,"Account"),tt.forEach(E),O=U(Ue),W=w(Ue,"BUTTON",{class:!0});var nt=q(W);G=ue(nt,"Preferences"),nt.forEach(E),ne=U(Ue),j=w(Ue,"BUTTON",{class:!0});var st=q(j);L=ue(st,"FAQ"),st.forEach(E),Ue.forEach(E),he.forEach(E),$=U(re),se=w(re,"MAIN",{});var rt=q(se);F&&F.l(rt),rt.forEach(E),re.forEach(E),this.h()},h(){h(a,"class","censored-email"),h(o,"class","log-out"),o.disabled=m=n[2]||n[3],h(i,"class","profile container"),h(p,"class","credentials-main button container"),h(_,"class","credentials-creator button svelte-qi1hey"),_.disabled=D=n[1].disableButtonStateStore,Pe(_,"selected",n[4].creator),h(f,"class","credentials-creator button container"),h(P,"class","settings header"),h(T,"class","settings-account button svelte-qi1hey"),T.disabled=N=n[1].disableButtonStateStore,Pe(T,"selected",n[4].account),h(W,"class","settings-preferences button svelte-qi1hey"),W.disabled=H=n[1].disableButtonStateStore,Pe(W,"selected",n[4].preferences),h(j,"class","settings-faq button svelte-qi1hey"),j.disabled=R=n[1].disableButtonStateStore,Pe(j,"selected",n[4].faq),h(g,"class","settings-button container"),h(e,"class","page home")},m(Q,re){Y(Q,e,re),me(t,e,null),u(e,s),u(e,l),u(l,i),u(i,a),u(a,c),u(i,r),u(i,o),u(o,b),u(l,d),u(l,p),M&&M.m(p,null),u(l,y),u(l,f),u(f,_),u(_,C),u(l,S),u(l,g),u(g,P),u(g,k),u(g,T),u(T,V),u(g,O),u(g,W),u(W,G),u(g,ne),u(g,j),u(j,L),u(e,$),u(e,se),~K&&be[K].m(se,null),A=!0,oe||(Z=[X(o,"click",n[5]),X(_,"click",n[6].credentials.creator),X(T,"click",n[6].settings.account),X(W,"click",n[6].settings.preferences),X(j,"click",n[6].settings.faq)],oe=!0)},p(Q,[re]){(!A||re&1)&&Ne(c,Q[0]),(!A||re&12&&m!==(m=Q[2]||Q[3]))&&(o.disabled=m),Q[1].secondaryFocusStore!==ie.credentials.main?M?M.p(Q,re):(M=bt(Q),M.c(),M.m(p,null)):M&&(M.d(1),M=null),(!A||re&2&&D!==(D=Q[1].disableButtonStateStore))&&(_.disabled=D),(!A||re&16)&&Pe(_,"selected",Q[4].creator),(!A||re&2&&N!==(N=Q[1].disableButtonStateStore))&&(T.disabled=N),(!A||re&16)&&Pe(T,"selected",Q[4].account),(!A||re&2&&H!==(H=Q[1].disableButtonStateStore))&&(W.disabled=H),(!A||re&16)&&Pe(W,"selected",Q[4].preferences),(!A||re&2&&R!==(R=Q[1].disableButtonStateStore))&&(j.disabled=R),(!A||re&16)&&Pe(j,"selected",Q[4].faq);let he=K;K=Be(Q),K!==he&&(F&&(Ge(),x(be[he],1,1,()=>{be[he]=null}),Qe()),~K?(F=be[K],F||(F=be[K]=ce[K](Q),F.c()),ee(F,1),F.m(se,null)):F=null)},i(Q){A||(ee(t.$$.fragment,Q),ee(F),A=!0)},o(Q){x(t.$$.fragment,Q),x(F),A=!1},d(Q){Q&&E(e),pe(t),M&&M.d(),~K&&be[K].d(),oe=!1,qe(Z)}}}function Fn(n,e,t){let s,{email:l}=e;const i={primaryFocusStore:Fe,secondaryFocusStore:ye,errorMessageStore:te,disableButtonStateStore:ze};let a={};for(const[d,p]of Object.entries(i)){const y=p.subscribe(f=>{const _={...a};_[d]=f,t(1,a=_)});Ce(y)}let c=!1,r=!1;async function o(){t(2,c=!0);const d=await vt.post.logout();!d.success&&!("auth"in d)?(te.set(d.error),b()):(Ve.true(),De.authedFalse()),t(2,c=!1)}function b(d=2e3){t(3,r=!0),setTimeout(()=>{t(3,r=!1)},d)}const m={credentials:{main:()=>{Fe.credentials(),ye.credentials.main()},creator:()=>{Fe.credentials(),ye.credentials.creator()}},settings:{account:()=>{$e.true(),Fe.settings(),ye.settings.account()},preferences:()=>{$e.true(),Fe.settings(),ye.settings.preferences()},faq:()=>{$e.true(),Fe.settings(),ye.settings.faq()}}};return n.$$set=d=>{"email"in d&&t(0,l=d.email)},n.$$.update=()=>{n.$$.dirty&2&&t(4,s={creator:a.secondaryFocusStore===ie.credentials.creator,account:a.secondaryFocusStore===ie.settings.account,preferences:a.secondaryFocusStore===ie.settings.preferences,faq:a.secondaryFocusStore===ie.settings.faq}),n.$$.dirty&2&&a.secondaryFocusStore!==ie.credentials.updater&&Re.clear()},[l,a,c,r,s,o,m]}class An extends ge{constructor(e){super(),ve(this,e,Fn,Ln,_e,{email:0})}}const jn={get:{email:async()=>we("/home/email","GET")}},Xe={settings:async()=>{const n=await He.get.data();if(!n.success){if("auth"in n&&!n.auth){Ve.true(),De.authedFalse();return}te.set(n.error);return}We.set(n.settings)},credSet:async()=>{const n=await Ie.get.idAndNameSet();if(!n){if("auth"in n&&!n.auth){Ve.true(),De.authedFalse();return}te.set(n.error);return}const e={};for(const t of n.idAndNameSet)e[t.credential_id]=t.credential_name;Ae.set(e)},email:async()=>{const n=await jn.get.email();if(!n.success){if("auth"in n&&!n.auth){Ve.true(),De.authedFalse();return}return te.set(n.error),""}return n.email}};function Mn(n){let e,t;return e=new yt({}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},p:ae,i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function Hn(n){let e,t;return e=new An({props:{email:n[1]}}),{c(){de(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,l){me(e,s,l),t=!0},p(s,l){const i={};l&2&&(i.email=s[1]),e.$set(i)},i(s){t||(ee(e.$$.fragment,s),t=!0)},o(s){x(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function $n(n){let e,t,s,l;const i=[Hn,Mn],a=[];function c(r,o){return!r[0].pendingAuthCheckStore&&r[0].authStateStore&&!r[2]?0:1}return e=c(n),t=a[e]=i[e](n),{c(){t.c(),s=Me()},l(r){t.l(r),s=Me()},m(r,o){a[e].m(r,o),Y(r,s,o),l=!0},p(r,[o]){let b=e;e=c(r),e===b?a[e].p(r,o):(Ge(),x(a[b],1,1,()=>{a[b]=null}),Qe(),t=a[e],t?t.p(r,o):(t=a[e]=i[e](r),t.c()),ee(t,1),t.m(s.parentNode,s))},i(r){l||(ee(t),l=!0)},o(r){x(t),l=!1},d(r){r&&E(s),a[e].d(r)}}}function zn(n,e,t){const s={pendingAuthCheckStore:Ct,authStateStore:De,redirectToHomeStore:at};let l={};for(const[r,o]of Object.entries(s)){const b=o.subscribe(m=>{const d={...l};d[r]=m,t(0,l=d)});Ce(b)}!l.pendingAuthCheckStore&&!l.redirectToHomeStore&&wt(),at.false();let i="",a=!1;async function c(){t(2,a=!0),await Xe.settings(),await Xe.credSet(),t(1,i=await Xe.email()),t(2,a=!1)}return n.$$.update=()=>{n.$$.dirty&1&&!l.pendingAuthCheckStore&&!l.authStateStore&&St("/log-in"),n.$$.dirty&1&&!l.pendingAuthCheckStore&&l.authStateStore&&c()},[l,i,a]}class Kn extends ge{constructor(e){super(),ve(this,e,zn,$n,_e,{})}}export{Kn as component};
