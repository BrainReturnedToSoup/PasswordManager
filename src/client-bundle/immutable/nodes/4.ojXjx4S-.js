import{s as W,n as G,r as ae,e as oe}from"../chunks/scheduler.XwmuOfpH.js";import{S as X,i as Y,g as h,s as w,m as Z,h as b,j as L,c as E,x as j,f as k,n as x,k as f,a as z,y as i,A as P,z as A,o as le,e as J,t as V,b as ie,d as B,p as ue,r as ee,u as te,v as re,w as ne}from"../chunks/index.BP64-74v.js";import{b as ce,a as se,c as fe,g as pe,p as de,L as me}from"../chunks/navigation.SwcUdgsl.js";import{a as _e,r as K}from"../chunks/redirect.qSmBOq2d.js";function Q(a){let e,t;return{c(){e=h("p"),t=Z(a[3]),this.h()},l(r){e=b(r,"P",{class:!0});var n=L(e);t=x(n,a[3]),n.forEach(k),this.h()},h(){f(e,"class","server-error-response")},m(r,n){z(r,e,n),i(e,t)},p(r,n){n&8&&le(t,r[3])},d(r){r&&k(e)}}}function he(a){let e,t,r,n,o,l="Email",g,s,m,p,v,T="Password",C,d,M,S,q,I,O,$,F="New user? Sign up here!",U,H,u=a[3]&&Q(a);return{c(){e=h("div"),t=h("form"),u&&u.c(),r=w(),n=h("div"),o=h("label"),o.textContent=l,g=w(),s=h("input"),m=w(),p=h("div"),v=h("label"),v.textContent=T,C=w(),d=h("input"),M=w(),S=h("button"),q=Z("Log in!"),O=w(),$=h("a"),$.textContent=F,this.h()},l(c){e=b(c,"DIV",{class:!0});var _=L(e);t=b(_,"FORM",{});var y=L(t);u&&u.l(y),r=E(y),n=b(y,"DIV",{class:!0});var D=L(n);o=b(D,"LABEL",{for:!0,"data-svelte-h":!0}),j(o)!=="svelte-1p9d3fm"&&(o.textContent=l),g=E(D),s=b(D,"INPUT",{type:!0,id:!0,autocomplete:!0}),D.forEach(k),m=E(y),p=b(y,"DIV",{class:!0});var N=L(p);v=b(N,"LABEL",{for:!0,"data-svelte-h":!0}),j(v)!=="svelte-pepa0a"&&(v.textContent=T),C=E(N),d=b(N,"INPUT",{type:!0,id:!0,autocomplete:!0}),N.forEach(k),M=E(y),S=b(y,"BUTTON",{type:!0});var R=L(S);q=x(R,"Log in!"),R.forEach(k),y.forEach(k),O=E(_),$=b(_,"A",{class:!0,href:!0,"data-svelte-h":!0}),j($)!=="svelte-180bc3l"&&($.textContent=F),_.forEach(k),this.h()},h(){f(o,"for","email"),f(s,"type","email"),f(s,"id","email"),f(s,"autocomplete","on"),s.disabled=a[2],s.required=!0,f(n,"class","input-container"),f(v,"for","password"),f(d,"type","password"),f(d,"id","password"),f(d,"autocomplete","on"),d.disabled=a[2],d.required=!0,f(p,"class","input-container"),f(S,"type","submit"),S.disabled=I=!a[4],t.noValidate=!0,f($,"class","page-redirect-link"),f($,"href","/sign-up"),f(e,"class","page log-in")},m(c,_){z(c,e,_),i(e,t),u&&u.m(t,null),i(t,r),i(t,n),i(n,o),i(n,g),i(n,s),P(s,a[0]),i(t,m),i(t,p),i(p,v),i(p,C),i(p,d),P(d,a[1]),i(t,M),i(t,S),i(S,q),i(e,O),i(e,$),U||(H=[A(s,"input",a[6].clearMessage),A(s,"input",a[7]),A(d,"input",a[6].clearMessage),A(d,"input",a[8]),A(t,"submit",a[5])],U=!0)},p(c,[_]){c[3]?u?u.p(c,_):(u=Q(c),u.c(),u.m(t,r)):u&&(u.d(1),u=null),_&4&&(s.disabled=c[2]),_&1&&s.value!==c[0]&&P(s,c[0]),_&4&&(d.disabled=c[2]),_&2&&d.value!==c[1]&&P(d,c[1]),_&16&&I!==(I=!c[4])&&(S.disabled=I)},i:G,o:G,d(c){c&&k(e),u&&u.d(),U=!1,ae(H)}}}function be(a,e,t){let r,n,o,l=!1;async function g(T){T.preventDefault(),t(2,l=!0);const C=await ce.post.login(n,o);!C.success&&!C.auth?t(3,s=C.error):(_e.true(),se.authedTrue()),t(2,l=!1)}let s="";const m={clearMessage:()=>{t(3,s="")}};function p(){n=this.value,t(0,n)}function v(){o=this.value,t(1,o)}return a.$$.update=()=>{a.$$.dirty&15&&t(4,r=n&&o&&!s&&!l)},[n,o,l,s,r,g,m,p,v]}class ge extends X{constructor(e){super(),Y(this,e,be,he,W,{})}}function ve(a){let e,t;return e=new me({}),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,n){re(e,r,n),t=!0},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){V(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function ke(a){let e,t;return e=new ge({}),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,n){re(e,r,n),t=!0},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){V(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function Se(a){let e,t,r,n;const o=[ke,ve],l=[];function g(s,m){return!s[0].pendingAuthCheckStore&&!s[0].authStateStore?0:1}return e=g(a),t=l[e]=o[e](a),{c(){t.c(),r=J()},l(s){t.l(s),r=J()},m(s,m){l[e].m(s,m),z(s,r,m),n=!0},p(s,[m]){let p=e;e=g(s),e!==p&&(ue(),V(l[p],1,1,()=>{l[p]=null}),ie(),t=l[e],t||(t=l[e]=o[e](s),t.c()),B(t,1),t.m(r.parentNode,r))},i(s){n||(B(t),n=!0)},o(s){V(t),n=!1},d(s){s&&k(r),l[e].d(s)}}}function $e(a,e,t){const r={pendingAuthCheckStore:de,authStateStore:se,redirectToLoginStore:K};let n={};for(const[o,l]of Object.entries(r)){const g=l.subscribe(s=>{const m={...n};m[o]=s,t(0,n=m)});oe(g)}return n.pendingAuthCheckStore||fe(),K.false(),a.$$.update=()=>{a.$$.dirty&1&&!n.pendingAuthCheckStore&&n.authStateStore&&pe("/home")},[n]}class Le extends X{constructor(e){super(),Y(this,e,$e,Se,W,{})}}export{Le as component};
