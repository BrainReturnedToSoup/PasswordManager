import{k as u,w as a}from"./singletons.1smXsNVI.js";import{s as d,n as o}from"./scheduler.ycOvhNHW.js";import{S as h,i as f,g as m,h as p,x as g,a as S,f as _}from"./index.5tyFQWbo.js";const F=u("goto");function b(t){let e,s="Loading Page";return{c(){e=m("div"),e.textContent=s},l(r){e=p(r,"DIV",{"data-svelte-h":!0}),g(e)!=="svelte-9c5yrp"&&(e.textContent=s)},m(r,l){S(r,e,l)},p:o,i:o,o,d(r){r&&_(e)}}}class L extends h{constructor(e){super(),f(this,e,null,b,d,{})}}const A=()=>{const{subscribe:t,set:e}=a(!1);return{subscribe:t,pendingTrue:()=>{e(!0)},pendingFalse:()=>{e(!1)},reset:()=>{e(!1)}}},C=()=>{const{subscribe:t,set:e}=a(!1);return{subscribe:t,authedTrue:()=>{e(!0)},authedFalse:()=>{e(!1)},reset:()=>{e(!1)}}},E=()=>{const{subscribe:t,set:e}=a("");return{subscribe:t,setEmail:s=>{e(s)},clearEmail:()=>{e("")}}},T=()=>{const{subscribe:t,set:e}=a(!1);return{subscribe:t,true:()=>{e(!0)},false:()=>{e(!1)}}},x=()=>{const{subscribe:t,set:e}=a(!1);return{subscribe:t,true:()=>{e(!0)},false:()=>{e(!1)}}},i=A(),n=C(),c=E(),q=T(),R=x(),k=async()=>await(await fetch("/auth-state")).json(),H=async()=>{i.pendingTrue();let t,e;try{t=await k()}catch(s){e=s}e&&(console.error("checkAuth Request Error",e,e.stack),n.authedFalse(),c.clearEmail()),t.success&&t.auth?(n.authedTrue(),c.setEmail(t.email)):(n.authedFalse(),c.clearEmail()),i.pendingFalse()};export{L,n as a,c as b,H as c,q as d,F as g,i as p,R as r};
