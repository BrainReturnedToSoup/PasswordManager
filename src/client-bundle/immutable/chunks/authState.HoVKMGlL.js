import{k as u,w as r}from"./singletons.jwAqg-mR.js";import{s as d,n as o}from"./scheduler.ycOvhNHW.js";import{S as h,i as f,g as m,h as p,x as g,a as S,f as b}from"./index.5tyFQWbo.js";const F=u("goto");function _(t){let e,s="Loading Page";return{c(){e=m("div"),e.textContent=s},l(a){e=p(a,"DIV",{"data-svelte-h":!0}),g(e)!=="svelte-9c5yrp"&&(e.textContent=s)},m(a,i){S(a,e,i)},p:o,i:o,o,d(a){a&&b(e)}}}class L extends h{constructor(e){super(),f(this,e,null,_,d,{})}}const A=()=>{const{subscribe:t,set:e}=r(!1);return{subscribe:t,pendingTrue:()=>{e(!0)},pendingFalse:()=>{e(!1)},reset:()=>{e(!1)}}},C=()=>{const{subscribe:t,set:e}=r(!1);return{subscribe:t,authedTrue:()=>{e(!0)},authedFalse:()=>{e(!1)},reset:()=>{e(!1)}}},T=()=>{const{subscribe:t,set:e}=r("");return{subscribe:t,setEmail:s=>{e(s)},clearEmail:()=>{e("")}}},k=()=>{const{subscribe:t,set:e}=r(!1);return{subscribe:t,true:()=>{e(!0)},false:()=>{e(!1)}}},x=()=>{const{subscribe:t,set:e}=r(!1);return{subscribe:t,true:()=>{e(!0)},false:()=>{e(!1)}}},l=A(),n=C(),c=T(),q=k(),H=x(),E=async()=>await(await fetch("/auth-state")).json(),R=async()=>{l.pendingTrue();let t,e;try{t=await E()}catch(s){console.error(`checkAuth catch block: ${s} ${s.stack}`),e=s}e&&(n.authedFalse(),c.clearEmail()),t.success&&t.auth?(n.authedTrue(),c.setEmail(t.email)):(n.authedFalse(),c.clearEmail()),l.pendingFalse()};export{L,n as a,c as b,R as c,q as d,F as g,l as p,H as r};
